(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _l(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},Ar=[],We=()=>{},eg=()=>!1,po=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),El=e=>e.startsWith("onUpdate:"),de=Object.assign,vl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ng=Object.prototype.hasOwnProperty,vt=(e,t)=>ng.call(e,t),ot=Array.isArray,Ir=e=>mo(e)==="[object Map]",yf=e=>mo(e)==="[object Set]",ct=e=>typeof e=="function",Ut=e=>typeof e=="string",Un=e=>typeof e=="symbol",Vt=e=>e!==null&&typeof e=="object",_f=e=>(Vt(e)||ct(e))&&ct(e.then)&&ct(e.catch),Ef=Object.prototype.toString,mo=e=>Ef.call(e),rg=e=>mo(e).slice(8,-1),vf=e=>mo(e)==="[object Object]",Tl=e=>Ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ys=_l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),go=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},sg=/-(\w)/g,xn=go(e=>e.replace(sg,(t,n)=>n?n.toUpperCase():"")),ig=/\B([A-Z])/g,ur=go(e=>e.replace(ig,"-$1").toLowerCase()),Tf=go(e=>e.charAt(0).toUpperCase()+e.slice(1)),la=go(e=>e?`on${Tf(e)}`:""),An=(e,t)=>!Object.is(e,t),Pi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},xa=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Va=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let yc;const yo=()=>yc||(yc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wl(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ut(r)?ug(r):wl(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ut(e)||Vt(e))return e}const og=/;(?![^(]*\))/g,ag=/:([^]+)/,lg=/\/\*[^]*?\*\//g;function ug(e){const t={};return e.replace(lg,"").split(og).forEach(n=>{if(n){const r=n.split(ag);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Hs(e){let t="";if(Ut(e))t=e;else if(ot(e))for(let n=0;n<e.length;n++){const r=Hs(e[n]);r&&(t+=r+" ")}else if(Vt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const cg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hg=_l(cg);function wf(e){return!!e||e===""}const bf=e=>!!(e&&e.__v_isRef===!0),ke=e=>Ut(e)?e:e==null?"":ot(e)||Vt(e)&&(e.toString===Ef||!ct(e.toString))?bf(e)?ke(e.value):JSON.stringify(e,Af,2):String(e),Af=(e,t)=>bf(t)?Af(e,t.value):Ir(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[ua(r,i)+" =>"]=s,n),{})}:yf(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ua(n))}:Un(t)?ua(t):Vt(t)&&!ot(t)&&!vf(t)?String(t):t,ua=(e,t="")=>{var n;return Un(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pe;class fg{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!t&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=pe;try{return pe=this,t()}finally{pe=n}}}on(){++this._on===1&&(this.prevScope=pe,pe=this)}off(){this._on>0&&--this._on===0&&(pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function dg(){return pe}let Rt;const ca=new WeakSet;class If{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ca.has(this)&&(ca.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Sf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_c(this),Cf(this);const t=Rt,n=Me;Rt=this,Me=!0;try{return this.fn()}finally{Pf(this),Rt=t,Me=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Il(t);this.deps=this.depsTail=void 0,_c(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ca.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Da(this)&&this.run()}get dirty(){return Da(this)}}let Rf=0,_s,Es;function Sf(e,t=!1){if(e.flags|=8,t){e.next=Es,Es=e;return}e.next=_s,_s=e}function bl(){Rf++}function Al(){if(--Rf>0)return;if(Es){let t=Es;for(Es=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;_s;){let t=_s;for(_s=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Cf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Il(r),pg(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Da(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(xf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function xf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ps)||(e.globalVersion=Ps,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Da(e))))return;e.flags|=2;const t=e.dep,n=Rt,r=Me;Rt=e,Me=!0;try{Cf(e);const s=e.fn(e._value);(t.version===0||An(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Rt=n,Me=r,Pf(e),e.flags&=-3}}function Il(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Il(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function pg(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Me=!0;const Vf=[];function un(){Vf.push(Me),Me=!1}function cn(){const e=Vf.pop();Me=e===void 0?!0:e}function _c(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Rt;Rt=void 0;try{t()}finally{Rt=n}}}let Ps=0;class mg{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rl{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Rt||!Me||Rt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Rt)n=this.activeLink=new mg(Rt,this),Rt.deps?(n.prevDep=Rt.depsTail,Rt.depsTail.nextDep=n,Rt.depsTail=n):Rt.deps=Rt.depsTail=n,Df(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Rt.depsTail,n.nextDep=void 0,Rt.depsTail.nextDep=n,Rt.depsTail=n,Rt.deps===n&&(Rt.deps=r)}return n}trigger(t){this.version++,Ps++,this.notify(t)}notify(t){bl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Al()}}}function Df(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Df(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Na=new WeakMap,rr=Symbol(""),Oa=Symbol(""),xs=Symbol("");function oe(e,t,n){if(Me&&Rt){let r=Na.get(e);r||Na.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Rl),s.map=r,s.key=n),s.track()}}function an(e,t,n,r,s,i){const a=Na.get(e);if(!a){Ps++;return}const l=u=>{u&&u.trigger()};if(bl(),t==="clear")a.forEach(l);else{const u=ot(e),f=u&&Tl(n);if(u&&n==="length"){const h=Number(r);a.forEach((p,g)=>{(g==="length"||g===xs||!Un(g)&&g>=h)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(xs)),t){case"add":u?f&&l(a.get("length")):(l(a.get(rr)),Ir(e)&&l(a.get(Oa)));break;case"delete":u||(l(a.get(rr)),Ir(e)&&l(a.get(Oa)));break;case"set":Ir(e)&&l(a.get(rr));break}}Al()}function yr(e){const t=Et(e);return t===e?t:(oe(t,"iterate",xs),Ve(e)?t:t.map(Xt))}function _o(e){return oe(e=Et(e),"iterate",xs),e}const gg={__proto__:null,[Symbol.iterator](){return ha(this,Symbol.iterator,Xt)},concat(...e){return yr(this).concat(...e.map(t=>ot(t)?yr(t):t))},entries(){return ha(this,"entries",e=>(e[1]=Xt(e[1]),e))},every(e,t){return sn(this,"every",e,t,void 0,arguments)},filter(e,t){return sn(this,"filter",e,t,n=>n.map(Xt),arguments)},find(e,t){return sn(this,"find",e,t,Xt,arguments)},findIndex(e,t){return sn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return sn(this,"findLast",e,t,Xt,arguments)},findLastIndex(e,t){return sn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return sn(this,"forEach",e,t,void 0,arguments)},includes(...e){return fa(this,"includes",e)},indexOf(...e){return fa(this,"indexOf",e)},join(e){return yr(this).join(e)},lastIndexOf(...e){return fa(this,"lastIndexOf",e)},map(e,t){return sn(this,"map",e,t,void 0,arguments)},pop(){return us(this,"pop")},push(...e){return us(this,"push",e)},reduce(e,...t){return Ec(this,"reduce",e,t)},reduceRight(e,...t){return Ec(this,"reduceRight",e,t)},shift(){return us(this,"shift")},some(e,t){return sn(this,"some",e,t,void 0,arguments)},splice(...e){return us(this,"splice",e)},toReversed(){return yr(this).toReversed()},toSorted(e){return yr(this).toSorted(e)},toSpliced(...e){return yr(this).toSpliced(...e)},unshift(...e){return us(this,"unshift",e)},values(){return ha(this,"values",Xt)}};function ha(e,t,n){const r=_o(e),s=r[t]();return r!==e&&!Ve(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const yg=Array.prototype;function sn(e,t,n,r,s,i){const a=_o(e),l=a!==e&&!Ve(e),u=a[t];if(u!==yg[t]){const p=u.apply(e,i);return l?Xt(p):p}let f=n;a!==e&&(l?f=function(p,g){return n.call(this,Xt(p),g,e)}:n.length>2&&(f=function(p,g){return n.call(this,p,g,e)}));const h=u.call(a,f,r);return l&&s?s(h):h}function Ec(e,t,n,r){const s=_o(e);let i=n;return s!==e&&(Ve(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,Xt(l),u,e)}),s[t](i,...r)}function fa(e,t,n){const r=Et(e);oe(r,"iterate",xs);const s=r[t](...n);return(s===-1||s===!1)&&xl(n[0])?(n[0]=Et(n[0]),r[t](...n)):s}function us(e,t,n=[]){un(),bl();const r=Et(e)[t].apply(e,n);return Al(),cn(),r}const _g=_l("__proto__,__v_isRef,__isVue"),Nf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Un));function Eg(e){Un(e)||(e=String(e));const t=Et(this);return oe(t,"has",e),t.hasOwnProperty(e)}class Of{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Pg:Ff:i?Lf:Mf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ot(t);if(!s){let u;if(a&&(u=gg[n]))return u;if(n==="hasOwnProperty")return Eg}const l=Reflect.get(t,n,Zt(t)?t:r);return(Un(n)?Nf.has(n):_g(n))||(s||oe(t,"get",n),i)?l:Zt(l)?a&&Tl(n)?l:l.value:Vt(l)?s?Uf(l):Cl(l):l}}class kf extends Of{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=Vn(i);if(!Ve(r)&&!Vn(r)&&(i=Et(i),r=Et(r)),!ot(t)&&Zt(i)&&!Zt(r))return u?!1:(i.value=r,!0)}const a=ot(t)&&Tl(n)?Number(n)<t.length:vt(t,n),l=Reflect.set(t,n,r,Zt(t)?t:s);return t===Et(s)&&(a?An(r,i)&&an(t,"set",n,r):an(t,"add",n,r)),l}deleteProperty(t,n){const r=vt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&an(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Un(n)||!Nf.has(n))&&oe(t,"has",n),r}ownKeys(t){return oe(t,"iterate",ot(t)?"length":rr),Reflect.ownKeys(t)}}class vg extends Of{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Tg=new kf,wg=new vg,bg=new kf(!0);const ka=e=>e,Ei=e=>Reflect.getPrototypeOf(e);function Ag(e,t,n){return function(...r){const s=this.__v_raw,i=Et(s),a=Ir(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),h=n?ka:t?Hi:Xt;return!t&&oe(i,"iterate",u?Oa:rr),{next(){const{value:p,done:g}=f.next();return g?{value:p,done:g}:{value:l?[h(p[0]),h(p[1])]:h(p),done:g}},[Symbol.iterator](){return this}}}}function vi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ig(e,t){const n={get(s){const i=this.__v_raw,a=Et(i),l=Et(s);e||(An(s,l)&&oe(a,"get",s),oe(a,"get",l));const{has:u}=Ei(a),f=t?ka:e?Hi:Xt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&oe(Et(s),"iterate",rr),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Et(i),l=Et(s);return e||(An(s,l)&&oe(a,"has",s),oe(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=Et(l),f=t?ka:e?Hi:Xt;return!e&&oe(u,"iterate",rr),l.forEach((h,p)=>s.call(i,f(h),f(p),a))}};return de(n,e?{add:vi("add"),set:vi("set"),delete:vi("delete"),clear:vi("clear")}:{add(s){!t&&!Ve(s)&&!Vn(s)&&(s=Et(s));const i=Et(this);return Ei(i).has.call(i,s)||(i.add(s),an(i,"add",s,s)),this},set(s,i){!t&&!Ve(i)&&!Vn(i)&&(i=Et(i));const a=Et(this),{has:l,get:u}=Ei(a);let f=l.call(a,s);f||(s=Et(s),f=l.call(a,s));const h=u.call(a,s);return a.set(s,i),f?An(i,h)&&an(a,"set",s,i):an(a,"add",s,i),this},delete(s){const i=Et(this),{has:a,get:l}=Ei(i);let u=a.call(i,s);u||(s=Et(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&an(i,"delete",s,void 0),f},clear(){const s=Et(this),i=s.size!==0,a=s.clear();return i&&an(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Ag(s,e,t)}),n}function Sl(e,t){const n=Ig(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(vt(n,s)&&s in r?n:r,s,i)}const Rg={get:Sl(!1,!1)},Sg={get:Sl(!1,!0)},Cg={get:Sl(!0,!1)};const Mf=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,Pg=new WeakMap;function xg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vg(e){return e.__v_skip||!Object.isExtensible(e)?0:xg(rg(e))}function Cl(e){return Vn(e)?e:Pl(e,!1,Tg,Rg,Mf)}function Dg(e){return Pl(e,!1,bg,Sg,Lf)}function Uf(e){return Pl(e,!0,wg,Cg,Ff)}function Pl(e,t,n,r,s){if(!Vt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Vg(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function Rr(e){return Vn(e)?Rr(e.__v_raw):!!(e&&e.__v_isReactive)}function Vn(e){return!!(e&&e.__v_isReadonly)}function Ve(e){return!!(e&&e.__v_isShallow)}function xl(e){return e?!!e.__v_raw:!1}function Et(e){const t=e&&e.__v_raw;return t?Et(t):e}function Ng(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&xa(e,"__v_skip",!0),e}const Xt=e=>Vt(e)?Cl(e):e,Hi=e=>Vt(e)?Uf(e):e;function Zt(e){return e?e.__v_isRef===!0:!1}function De(e){return Og(e,!1)}function Og(e,t){return Zt(e)?e:new kg(e,t)}class kg{constructor(t,n){this.dep=new Rl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Et(t),this._value=n?t:Xt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ve(t)||Vn(t);t=r?t:Et(t),An(t,n)&&(this._rawValue=t,this._value=r?t:Xt(t),this.dep.trigger())}}function Xn(e){return Zt(e)?e.value:e}const Mg={get:(e,t,n)=>t==="__v_raw"?e:Xn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Zt(s)&&!Zt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Bf(e){return Rr(e)?e:new Proxy(e,Mg)}class Lg{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Rl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ps-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Rt!==this)return Sf(this,!0),!0}get value(){const t=this.dep.track();return xf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Fg(e,t,n=!1){let r,s;return ct(e)?r=e:(r=e.get,s=e.set),new Lg(r,s,n)}const Ti={},zi=new WeakMap;let Yn;function Ug(e,t=!1,n=Yn){if(n){let r=zi.get(n);r||zi.set(n,r=[]),r.push(e)}}function Bg(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=Q=>s?Q:Ve(Q)||s===!1||s===0?ln(Q,1):ln(Q);let h,p,g,I,R=!1,N=!1;if(Zt(e)?(p=()=>e.value,R=Ve(e)):Rr(e)?(p=()=>f(e),R=!0):ot(e)?(N=!0,R=e.some(Q=>Rr(Q)||Ve(Q)),p=()=>e.map(Q=>{if(Zt(Q))return Q.value;if(Rr(Q))return f(Q);if(ct(Q))return u?u(Q,2):Q()})):ct(e)?t?p=u?()=>u(e,2):e:p=()=>{if(g){un();try{g()}finally{cn()}}const Q=Yn;Yn=h;try{return u?u(e,3,[I]):e(I)}finally{Yn=Q}}:p=We,t&&s){const Q=p,st=s===!0?1/0:s;p=()=>ln(Q(),st)}const x=dg(),$=()=>{h.stop(),x&&x.active&&vl(x.effects,h)};if(i&&t){const Q=t;t=(...st)=>{Q(...st),$()}}let L=N?new Array(e.length).fill(Ti):Ti;const q=Q=>{if(!(!(h.flags&1)||!h.dirty&&!Q))if(t){const st=h.run();if(s||R||(N?st.some((dt,w)=>An(dt,L[w])):An(st,L))){g&&g();const dt=Yn;Yn=h;try{const w=[st,L===Ti?void 0:N&&L[0]===Ti?[]:L,I];L=st,u?u(t,3,w):t(...w)}finally{Yn=dt}}}else h.run()};return l&&l(q),h=new If(p),h.scheduler=a?()=>a(q,!1):q,I=Q=>Ug(Q,!1,h),g=h.onStop=()=>{const Q=zi.get(h);if(Q){if(u)u(Q,4);else for(const st of Q)st();zi.delete(h)}},t?r?q(!0):L=h.run():a?a(q.bind(null,!0),!0):h.run(),$.pause=h.pause.bind(h),$.resume=h.resume.bind(h),$.stop=$,$}function ln(e,t=1/0,n){if(t<=0||!Vt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Zt(e))ln(e.value,t,n);else if(ot(e))for(let r=0;r<e.length;r++)ln(e[r],t,n);else if(yf(e)||Ir(e))e.forEach(r=>{ln(r,t,n)});else if(vf(e)){for(const r in e)ln(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&ln(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zs(e,t,n,r){try{return r?e(...r):e()}catch(s){Eo(s,t,n)}}function Ye(e,t,n,r){if(ct(e)){const s=zs(e,t,n,r);return s&&_f(s)&&s.catch(i=>{Eo(i,t,n)}),s}if(ot(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Ye(e[i],t,n,r));return s}}function Eo(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](e,u,f)===!1)return}l=l.parent}if(i){un(),zs(i,null,10,[e,u,f]),cn();return}}jg(e,n,s,r,a)}function jg(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const he=[];let He=-1;const Sr=[];let Tn=null,_r=0;const jf=Promise.resolve();let Ki=null;function $g(e){const t=Ki||jf;return e?t.then(this?e.bind(this):e):t}function qg(e){let t=He+1,n=he.length;for(;t<n;){const r=t+n>>>1,s=he[r],i=Vs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Vl(e){if(!(e.flags&1)){const t=Vs(e),n=he[he.length-1];!n||!(e.flags&2)&&t>=Vs(n)?he.push(e):he.splice(qg(t),0,e),e.flags|=1,$f()}}function $f(){Ki||(Ki=jf.then(Hf))}function Hg(e){ot(e)?Sr.push(...e):Tn&&e.id===-1?Tn.splice(_r+1,0,e):e.flags&1||(Sr.push(e),e.flags|=1),$f()}function vc(e,t,n=He+1){for(;n<he.length;n++){const r=he[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;he.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function qf(e){if(Sr.length){const t=[...new Set(Sr)].sort((n,r)=>Vs(n)-Vs(r));if(Sr.length=0,Tn){Tn.push(...t);return}for(Tn=t,_r=0;_r<Tn.length;_r++){const n=Tn[_r];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Tn=null,_r=0}}const Vs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Hf(e){try{for(He=0;He<he.length;He++){const t=he[He];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;He<he.length;He++){const t=he[He];t&&(t.flags&=-2)}He=-1,he.length=0,qf(),Ki=null,(he.length||Sr.length)&&Hf()}}let xe=null,zf=null;function Wi(e){const t=xe;return xe=e,zf=e&&e.type.__scopeId||null,t}function zg(e,t=xe,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Pc(-1);const i=Wi(t);let a;try{a=e(...s)}finally{Wi(i),r._d&&Pc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Se(e,t){if(xe===null)return e;const n=bo(xe),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=It]=t[s];i&&(ct(i)&&(i={mounted:i,updated:i}),i.deep&&ln(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function Qn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(un(),Ye(u,n,8,[e.el,l,e,t]),cn())}}const Kg=Symbol("_vte"),Wg=e=>e.__isTeleport;function Dl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Dl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Kf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function vs(e,t,n,r,s=!1){if(ot(e)){e.forEach((R,N)=>vs(R,t&&(ot(t)?t[N]:t),n,r,s));return}if(Ts(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&vs(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?bo(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,h=l.refs===It?l.refs={}:l.refs,p=l.setupState,g=Et(p),I=p===It?()=>!1:R=>vt(g,R);if(f!=null&&f!==u&&(Ut(f)?(h[f]=null,I(f)&&(p[f]=null)):Zt(f)&&(f.value=null)),ct(u))zs(u,l,12,[a,h]);else{const R=Ut(u),N=Zt(u);if(R||N){const x=()=>{if(e.f){const $=R?I(u)?p[u]:h[u]:u.value;s?ot($)&&vl($,i):ot($)?$.includes(i)||$.push(i):R?(h[u]=[i],I(u)&&(p[u]=h[u])):(u.value=[i],e.k&&(h[e.k]=u.value))}else R?(h[u]=a,I(u)&&(p[u]=a)):N&&(u.value=a,e.k&&(h[e.k]=a))};a?(x.id=-1,Te(x,n)):x()}}}yo().requestIdleCallback;yo().cancelIdleCallback;const Ts=e=>!!e.type.__asyncLoader,Wf=e=>e.type.__isKeepAlive;function Gg(e,t){Gf(e,"a",t)}function Qg(e,t){Gf(e,"da",t)}function Gf(e,t,n=fe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(vo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Wf(s.parent.vnode)&&Jg(r,t,n,s),s=s.parent}}function Jg(e,t,n,r){const s=vo(t,e,r,!0);Jf(()=>{vl(r[t],s)},n)}function vo(e,t,n=fe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{un();const l=Ks(n),u=Ye(t,n,e,a);return l(),cn(),u});return r?s.unshift(i):s.push(i),i}}const mn=e=>(t,n=fe)=>{(!Ns||e==="sp")&&vo(e,(...r)=>t(...r),n)},Xg=mn("bm"),Qf=mn("m"),Yg=mn("bu"),Zg=mn("u"),ty=mn("bum"),Jf=mn("um"),ey=mn("sp"),ny=mn("rtg"),ry=mn("rtc");function sy(e,t=fe){vo("ec",e,t)}const iy=Symbol.for("v-ndc");function Nl(e,t,n,r){let s;const i=n,a=ot(e);if(a||Ut(e)){const l=a&&Rr(e);let u=!1,f=!1;l&&(u=!Ve(e),f=Vn(e),e=_o(e)),s=new Array(e.length);for(let h=0,p=e.length;h<p;h++)s[h]=t(u?f?Hi(Xt(e[h])):Xt(e[h]):e[h],h,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Vt(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const h=l[u];s[u]=t(e[h],h,u,i)}}else s=[];return s}const Ma=e=>e?yd(e)?bo(e):Ma(e.parent):null,ws=de(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ma(e.parent),$root:e=>Ma(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Yf(e),$forceUpdate:e=>e.f||(e.f=()=>{Vl(e.update)}),$nextTick:e=>e.n||(e.n=$g.bind(e.proxy)),$watch:e=>Sy.bind(e)}),da=(e,t)=>e!==It&&!e.__isScriptSetup&&vt(e,t),oy={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const I=a[t];if(I!==void 0)switch(I){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(da(r,t))return a[t]=1,r[t];if(s!==It&&vt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&vt(f,t))return a[t]=3,i[t];if(n!==It&&vt(n,t))return a[t]=4,n[t];La&&(a[t]=0)}}const h=ws[t];let p,g;if(h)return t==="$attrs"&&oe(e.attrs,"get",""),h(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==It&&vt(n,t))return a[t]=4,n[t];if(g=u.config.globalProperties,vt(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return da(s,t)?(s[t]=n,!0):r!==It&&vt(r,t)?(r[t]=n,!0):vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==It&&vt(e,a)||da(t,a)||(l=i[0])&&vt(l,a)||vt(r,a)||vt(ws,a)||vt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Tc(e){return ot(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let La=!0;function ay(e){const t=Yf(e),n=e.proxy,r=e.ctx;La=!1,t.beforeCreate&&wc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:h,beforeMount:p,mounted:g,beforeUpdate:I,updated:R,activated:N,deactivated:x,beforeDestroy:$,beforeUnmount:L,destroyed:q,unmounted:Q,render:st,renderTracked:dt,renderTriggered:w,errorCaptured:y,serverPrefetch:v,expose:b,inheritAttrs:A,components:P,directives:E,filters:Ee}=t;if(f&&ly(f,r,null),a)for(const bt in a){const yt=a[bt];ct(yt)&&(r[bt]=yt.bind(n))}if(s){const bt=s.call(n,n);Vt(bt)&&(e.data=Cl(bt))}if(La=!0,i)for(const bt in i){const yt=i[bt],Ne=ct(yt)?yt.bind(n,n):ct(yt.get)?yt.get.bind(n,n):We,$n=!ct(yt)&&ct(yt.set)?yt.set.bind(n):We,tn=Ed({get:Ne,set:$n});Object.defineProperty(r,bt,{enumerable:!0,configurable:!0,get:()=>tn.value,set:Bt=>tn.value=Bt})}if(l)for(const bt in l)Xf(l[bt],r,n,bt);if(u){const bt=ct(u)?u.call(n):u;Reflect.ownKeys(bt).forEach(yt=>{py(yt,bt[yt])})}h&&wc(h,e,"c");function zt(bt,yt){ot(yt)?yt.forEach(Ne=>bt(Ne.bind(n))):yt&&bt(yt.bind(n))}if(zt(Xg,p),zt(Qf,g),zt(Yg,I),zt(Zg,R),zt(Gg,N),zt(Qg,x),zt(sy,y),zt(ry,dt),zt(ny,w),zt(ty,L),zt(Jf,Q),zt(ey,v),ot(b))if(b.length){const bt=e.exposed||(e.exposed={});b.forEach(yt=>{Object.defineProperty(bt,yt,{get:()=>n[yt],set:Ne=>n[yt]=Ne})})}else e.exposed||(e.exposed={});st&&e.render===We&&(e.render=st),A!=null&&(e.inheritAttrs=A),P&&(e.components=P),E&&(e.directives=E),v&&Kf(e)}function ly(e,t,n=We){ot(e)&&(e=Fa(e));for(const r in e){const s=e[r];let i;Vt(s)?"default"in s?i=xi(s.from||r,s.default,!0):i=xi(s.from||r):i=xi(s),Zt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function wc(e,t,n){Ye(ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Xf(e,t,n,r){let s=r.includes(".")?hd(n,r):()=>n[r];if(Ut(e)){const i=t[e];ct(i)&&Vi(s,i)}else if(ct(e))Vi(s,e.bind(n));else if(Vt(e))if(ot(e))e.forEach(i=>Xf(i,t,n,r));else{const i=ct(e.handler)?e.handler.bind(n):t[e.handler];ct(i)&&Vi(s,i,e)}}function Yf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>Gi(u,f,a,!0)),Gi(u,t,a)),Vt(t)&&i.set(t,u),u}function Gi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Gi(e,i,n,!0),s&&s.forEach(a=>Gi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=uy[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const uy={data:bc,props:Ac,emits:Ac,methods:fs,computed:fs,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:fs,directives:fs,watch:hy,provide:bc,inject:cy};function bc(e,t){return t?e?function(){return de(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function cy(e,t){return fs(Fa(e),Fa(t))}function Fa(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function fs(e,t){return e?de(Object.create(null),e,t):t}function Ac(e,t){return e?ot(e)&&ot(t)?[...new Set([...e,...t])]:de(Object.create(null),Tc(e),Tc(t??{})):t}function hy(e,t){if(!e)return t;if(!t)return e;const n=de(Object.create(null),e);for(const r in t)n[r]=ce(e[r],t[r]);return n}function Zf(){return{app:null,config:{isNativeTag:eg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fy=0;function dy(e,t){return function(r,s=null){ct(r)||(r=de({},r)),s!=null&&!Vt(s)&&(s=null);const i=Zf(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:fy++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Gy,get config(){return i.config},set config(h){},use(h,...p){return a.has(h)||(h&&ct(h.install)?(a.add(h),h.install(f,...p)):ct(h)&&(a.add(h),h(f,...p))),f},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),f},component(h,p){return p?(i.components[h]=p,f):i.components[h]},directive(h,p){return p?(i.directives[h]=p,f):i.directives[h]},mount(h,p,g){if(!u){const I=f._ceVNode||Le(r,s);return I.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),e(I,h,g),u=!0,f._container=h,h.__vue_app__=f,bo(I.component)}},onUnmount(h){l.push(h)},unmount(){u&&(Ye(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(h,p){return i.provides[h]=p,f},runWithContext(h){const p=Cr;Cr=f;try{return h()}finally{Cr=p}}};return f}}let Cr=null;function py(e,t){if(fe){let n=fe.provides;const r=fe.parent&&fe.parent.provides;r===n&&(n=fe.provides=Object.create(r)),n[e]=t}}function xi(e,t,n=!1){const r=fe||xe;if(r||Cr){let s=Cr?Cr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ct(t)?t.call(r&&r.proxy):t}}const td={},ed=()=>Object.create(td),nd=e=>Object.getPrototypeOf(e)===td;function my(e,t,n,r=!1){const s={},i=ed();e.propsDefaults=Object.create(null),rd(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Dg(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function gy(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=Et(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const h=e.vnode.dynamicProps;for(let p=0;p<h.length;p++){let g=h[p];if(To(e.emitsOptions,g))continue;const I=t[g];if(u)if(vt(i,g))I!==i[g]&&(i[g]=I,f=!0);else{const R=xn(g);s[R]=Ua(u,l,R,I,e,!1)}else I!==i[g]&&(i[g]=I,f=!0)}}}else{rd(e,t,s,i)&&(f=!0);let h;for(const p in l)(!t||!vt(t,p)&&((h=ur(p))===p||!vt(t,h)))&&(u?n&&(n[p]!==void 0||n[h]!==void 0)&&(s[p]=Ua(u,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!vt(t,p))&&(delete i[p],f=!0)}f&&an(e.attrs,"set","")}function rd(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(ys(u))continue;const f=t[u];let h;s&&vt(s,h=xn(u))?!i||!i.includes(h)?n[h]=f:(l||(l={}))[h]=f:To(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=Et(n),f=l||It;for(let h=0;h<i.length;h++){const p=i[h];n[p]=Ua(s,u,p,f[p],e,!vt(f,p))}}return a}function Ua(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=vt(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&ct(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const h=Ks(s);r=f[n]=u.call(null,t),h()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===ur(n))&&(r=!0))}return r}const yy=new WeakMap;function sd(e,t,n=!1){const r=n?yy:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!ct(e)){const h=p=>{u=!0;const[g,I]=sd(p,t,!0);de(a,g),I&&l.push(...I)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!i&&!u)return Vt(e)&&r.set(e,Ar),Ar;if(ot(i))for(let h=0;h<i.length;h++){const p=xn(i[h]);Ic(p)&&(a[p]=It)}else if(i)for(const h in i){const p=xn(h);if(Ic(p)){const g=i[h],I=a[p]=ot(g)||ct(g)?{type:g}:de({},g),R=I.type;let N=!1,x=!0;if(ot(R))for(let $=0;$<R.length;++$){const L=R[$],q=ct(L)&&L.name;if(q==="Boolean"){N=!0;break}else q==="String"&&(x=!1)}else N=ct(R)&&R.name==="Boolean";I[0]=N,I[1]=x,(N||vt(I,"default"))&&l.push(p)}}const f=[a,l];return Vt(e)&&r.set(e,f),f}function Ic(e){return e[0]!=="$"&&!ys(e)}const Ol=e=>e[0]==="_"||e==="$stable",kl=e=>ot(e)?e.map(Ke):[Ke(e)],_y=(e,t,n)=>{if(t._n)return t;const r=zg((...s)=>kl(t(...s)),n);return r._c=!1,r},id=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Ol(s))continue;const i=e[s];if(ct(i))t[s]=_y(s,i,r);else if(i!=null){const a=kl(i);t[s]=()=>a}}},od=(e,t)=>{const n=kl(t);e.slots.default=()=>n},ad=(e,t,n)=>{for(const r in t)(n||!Ol(r))&&(e[r]=t[r])},Ey=(e,t,n)=>{const r=e.slots=ed();if(e.vnode.shapeFlag&32){const s=t.__;s&&xa(r,"__",s,!0);const i=t._;i?(ad(r,t,n),n&&xa(r,"_",i,!0)):id(t,r)}else t&&od(e,t)},vy=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:ad(s,t,n):(i=!t.$stable,id(t,s)),a=t}else t&&(od(e,t),a={default:1});if(i)for(const l in s)!Ol(l)&&a[l]==null&&delete s[l]},Te=Oy;function Ty(e){return wy(e)}function wy(e,t){const n=yo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:h,parentNode:p,nextSibling:g,setScopeId:I=We,insertStaticContent:R}=e,N=(_,T,O,B=null,F=null,U=null,G=void 0,z=null,H=!!T.dynamicChildren)=>{if(_===T)return;_&&!cs(_,T)&&(B=en(_),Bt(_,F,U,!0),_=null),T.patchFlag===-2&&(H=!1,T.dynamicChildren=null);const{type:j,ref:Z,shapeFlag:W}=T;switch(j){case wo:x(_,T,O,B);break;case Dn:$(_,T,O,B);break;case Di:_==null&&L(T,O,B,G);break;case we:P(_,T,O,B,F,U,G,z,H);break;default:W&1?st(_,T,O,B,F,U,G,z,H):W&6?E(_,T,O,B,F,U,G,z,H):(W&64||W&128)&&j.process(_,T,O,B,F,U,G,z,H,je)}Z!=null&&F?vs(Z,_&&_.ref,U,T||_,!T):Z==null&&_&&_.ref!=null&&vs(_.ref,null,U,_,!0)},x=(_,T,O,B)=>{if(_==null)r(T.el=l(T.children),O,B);else{const F=T.el=_.el;T.children!==_.children&&f(F,T.children)}},$=(_,T,O,B)=>{_==null?r(T.el=u(T.children||""),O,B):T.el=_.el},L=(_,T,O,B)=>{[_.el,_.anchor]=R(_.children,T,O,B,_.el,_.anchor)},q=({el:_,anchor:T},O,B)=>{let F;for(;_&&_!==T;)F=g(_),r(_,O,B),_=F;r(T,O,B)},Q=({el:_,anchor:T})=>{let O;for(;_&&_!==T;)O=g(_),s(_),_=O;s(T)},st=(_,T,O,B,F,U,G,z,H)=>{T.type==="svg"?G="svg":T.type==="math"&&(G="mathml"),_==null?dt(T,O,B,F,U,G,z,H):v(_,T,F,U,G,z,H)},dt=(_,T,O,B,F,U,G,z)=>{let H,j;const{props:Z,shapeFlag:W,transition:Y,dirs:rt}=_;if(H=_.el=a(_.type,U,Z&&Z.is,Z),W&8?h(H,_.children):W&16&&y(_.children,H,null,B,F,pa(_,U),G,z),rt&&Qn(_,null,B,"created"),w(H,_,_.scopeId,G,B),Z){for(const lt in Z)lt!=="value"&&!ys(lt)&&i(H,lt,null,Z[lt],U,B);"value"in Z&&i(H,"value",null,Z.value,U),(j=Z.onVnodeBeforeMount)&&$e(j,B,_)}rt&&Qn(_,null,B,"beforeMount");const et=by(F,Y);et&&Y.beforeEnter(H),r(H,T,O),((j=Z&&Z.onVnodeMounted)||et||rt)&&Te(()=>{j&&$e(j,B,_),et&&Y.enter(H),rt&&Qn(_,null,B,"mounted")},F)},w=(_,T,O,B,F)=>{if(O&&I(_,O),B)for(let U=0;U<B.length;U++)I(_,B[U]);if(F){let U=F.subTree;if(T===U||dd(U.type)&&(U.ssContent===T||U.ssFallback===T)){const G=F.vnode;w(_,G,G.scopeId,G.slotScopeIds,F.parent)}}},y=(_,T,O,B,F,U,G,z,H=0)=>{for(let j=H;j<_.length;j++){const Z=_[j]=z?wn(_[j]):Ke(_[j]);N(null,Z,T,O,B,F,U,G,z)}},v=(_,T,O,B,F,U,G)=>{const z=T.el=_.el;let{patchFlag:H,dynamicChildren:j,dirs:Z}=T;H|=_.patchFlag&16;const W=_.props||It,Y=T.props||It;let rt;if(O&&Jn(O,!1),(rt=Y.onVnodeBeforeUpdate)&&$e(rt,O,T,_),Z&&Qn(T,_,O,"beforeUpdate"),O&&Jn(O,!0),(W.innerHTML&&Y.innerHTML==null||W.textContent&&Y.textContent==null)&&h(z,""),j?b(_.dynamicChildren,j,z,O,B,pa(T,F),U):G||yt(_,T,z,null,O,B,pa(T,F),U,!1),H>0){if(H&16)A(z,W,Y,O,F);else if(H&2&&W.class!==Y.class&&i(z,"class",null,Y.class,F),H&4&&i(z,"style",W.style,Y.style,F),H&8){const et=T.dynamicProps;for(let lt=0;lt<et.length;lt++){const pt=et[lt],Kt=W[pt],Wt=Y[pt];(Wt!==Kt||pt==="value")&&i(z,pt,Kt,Wt,F,O)}}H&1&&_.children!==T.children&&h(z,T.children)}else!G&&j==null&&A(z,W,Y,O,F);((rt=Y.onVnodeUpdated)||Z)&&Te(()=>{rt&&$e(rt,O,T,_),Z&&Qn(T,_,O,"updated")},B)},b=(_,T,O,B,F,U,G)=>{for(let z=0;z<T.length;z++){const H=_[z],j=T[z],Z=H.el&&(H.type===we||!cs(H,j)||H.shapeFlag&198)?p(H.el):O;N(H,j,Z,null,B,F,U,G,!0)}},A=(_,T,O,B,F)=>{if(T!==O){if(T!==It)for(const U in T)!ys(U)&&!(U in O)&&i(_,U,T[U],null,F,B);for(const U in O){if(ys(U))continue;const G=O[U],z=T[U];G!==z&&U!=="value"&&i(_,U,z,G,F,B)}"value"in O&&i(_,"value",T.value,O.value,F)}},P=(_,T,O,B,F,U,G,z,H)=>{const j=T.el=_?_.el:l(""),Z=T.anchor=_?_.anchor:l("");let{patchFlag:W,dynamicChildren:Y,slotScopeIds:rt}=T;rt&&(z=z?z.concat(rt):rt),_==null?(r(j,O,B),r(Z,O,B),y(T.children||[],O,Z,F,U,G,z,H)):W>0&&W&64&&Y&&_.dynamicChildren?(b(_.dynamicChildren,Y,O,F,U,G,z),(T.key!=null||F&&T===F.subTree)&&ld(_,T,!0)):yt(_,T,O,Z,F,U,G,z,H)},E=(_,T,O,B,F,U,G,z,H)=>{T.slotScopeIds=z,_==null?T.shapeFlag&512?F.ctx.activate(T,O,B,G,H):Ee(T,O,B,F,U,G,H):gn(_,T,H)},Ee=(_,T,O,B,F,U,G)=>{const z=_.component=$y(_,B,F);if(Wf(_)&&(z.ctx.renderer=je),qy(z,!1,G),z.asyncDep){if(F&&F.registerDep(z,zt,G),!_.el){const H=z.subTree=Le(Dn);$(null,H,T,O)}}else zt(z,_,T,O,F,U,G)},gn=(_,T,O)=>{const B=T.component=_.component;if(Dy(_,T,O))if(B.asyncDep&&!B.asyncResolved){bt(B,T,O);return}else B.next=T,B.update();else T.el=_.el,B.vnode=T},zt=(_,T,O,B,F,U,G)=>{const z=()=>{if(_.isMounted){let{next:W,bu:Y,u:rt,parent:et,vnode:lt}=_;{const ee=ud(_);if(ee){W&&(W.el=lt.el,bt(_,W,G)),ee.asyncDep.then(()=>{_.isUnmounted||z()});return}}let pt=W,Kt;Jn(_,!1),W?(W.el=lt.el,bt(_,W,G)):W=lt,Y&&Pi(Y),(Kt=W.props&&W.props.onVnodeBeforeUpdate)&&$e(Kt,et,W,lt),Jn(_,!0);const Wt=Sc(_),Ie=_.subTree;_.subTree=Wt,N(Ie,Wt,p(Ie.el),en(Ie),_,F,U),W.el=Wt.el,pt===null&&Ny(_,Wt.el),rt&&Te(rt,F),(Kt=W.props&&W.props.onVnodeUpdated)&&Te(()=>$e(Kt,et,W,lt),F)}else{let W;const{el:Y,props:rt}=T,{bm:et,m:lt,parent:pt,root:Kt,type:Wt}=_,Ie=Ts(T);Jn(_,!1),et&&Pi(et),!Ie&&(W=rt&&rt.onVnodeBeforeMount)&&$e(W,pt,T),Jn(_,!0);{Kt.ce&&Kt.ce._def.shadowRoot!==!1&&Kt.ce._injectChildStyle(Wt);const ee=_.subTree=Sc(_);N(null,ee,O,B,_,F,U),T.el=ee.el}if(lt&&Te(lt,F),!Ie&&(W=rt&&rt.onVnodeMounted)){const ee=T;Te(()=>$e(W,pt,ee),F)}(T.shapeFlag&256||pt&&Ts(pt.vnode)&&pt.vnode.shapeFlag&256)&&_.a&&Te(_.a,F),_.isMounted=!0,T=O=B=null}};_.scope.on();const H=_.effect=new If(z);_.scope.off();const j=_.update=H.run.bind(H),Z=_.job=H.runIfDirty.bind(H);Z.i=_,Z.id=_.uid,H.scheduler=()=>Vl(Z),Jn(_,!0),j()},bt=(_,T,O)=>{T.component=_;const B=_.vnode.props;_.vnode=T,_.next=null,gy(_,T.props,B,O),vy(_,T.children,O),un(),vc(_),cn()},yt=(_,T,O,B,F,U,G,z,H=!1)=>{const j=_&&_.children,Z=_?_.shapeFlag:0,W=T.children,{patchFlag:Y,shapeFlag:rt}=T;if(Y>0){if(Y&128){$n(j,W,O,B,F,U,G,z,H);return}else if(Y&256){Ne(j,W,O,B,F,U,G,z,H);return}}rt&8?(Z&16&&Hn(j,F,U),W!==j&&h(O,W)):Z&16?rt&16?$n(j,W,O,B,F,U,G,z,H):Hn(j,F,U,!0):(Z&8&&h(O,""),rt&16&&y(W,O,B,F,U,G,z,H))},Ne=(_,T,O,B,F,U,G,z,H)=>{_=_||Ar,T=T||Ar;const j=_.length,Z=T.length,W=Math.min(j,Z);let Y;for(Y=0;Y<W;Y++){const rt=T[Y]=H?wn(T[Y]):Ke(T[Y]);N(_[Y],rt,O,null,F,U,G,z,H)}j>Z?Hn(_,F,U,!0,!1,W):y(T,O,B,F,U,G,z,H,W)},$n=(_,T,O,B,F,U,G,z,H)=>{let j=0;const Z=T.length;let W=_.length-1,Y=Z-1;for(;j<=W&&j<=Y;){const rt=_[j],et=T[j]=H?wn(T[j]):Ke(T[j]);if(cs(rt,et))N(rt,et,O,null,F,U,G,z,H);else break;j++}for(;j<=W&&j<=Y;){const rt=_[W],et=T[Y]=H?wn(T[Y]):Ke(T[Y]);if(cs(rt,et))N(rt,et,O,null,F,U,G,z,H);else break;W--,Y--}if(j>W){if(j<=Y){const rt=Y+1,et=rt<Z?T[rt].el:B;for(;j<=Y;)N(null,T[j]=H?wn(T[j]):Ke(T[j]),O,et,F,U,G,z,H),j++}}else if(j>Y)for(;j<=W;)Bt(_[j],F,U,!0),j++;else{const rt=j,et=j,lt=new Map;for(j=et;j<=Y;j++){const Gt=T[j]=H?wn(T[j]):Ke(T[j]);Gt.key!=null&&lt.set(Gt.key,j)}let pt,Kt=0;const Wt=Y-et+1;let Ie=!1,ee=0;const yn=new Array(Wt);for(j=0;j<Wt;j++)yn[j]=0;for(j=rt;j<=W;j++){const Gt=_[j];if(Kt>=Wt){Bt(Gt,F,U,!0);continue}let Re;if(Gt.key!=null)Re=lt.get(Gt.key);else for(pt=et;pt<=Y;pt++)if(yn[pt-et]===0&&cs(Gt,T[pt])){Re=pt;break}Re===void 0?Bt(Gt,F,U,!0):(yn[Re-et]=j+1,Re>=ee?ee=Re:Ie=!0,N(Gt,T[Re],O,null,F,U,G,z,H),Kt++)}const Jr=Ie?Ay(yn):Ar;for(pt=Jr.length-1,j=Wt-1;j>=0;j--){const Gt=et+j,Re=T[Gt],ri=Gt+1<Z?T[Gt+1].el:B;yn[j]===0?N(null,Re,O,ri,F,U,G,z,H):Ie&&(pt<0||j!==Jr[pt]?tn(Re,O,ri,2):pt--)}}},tn=(_,T,O,B,F=null)=>{const{el:U,type:G,transition:z,children:H,shapeFlag:j}=_;if(j&6){tn(_.component.subTree,T,O,B);return}if(j&128){_.suspense.move(T,O,B);return}if(j&64){G.move(_,T,O,je);return}if(G===we){r(U,T,O);for(let W=0;W<H.length;W++)tn(H[W],T,O,B);r(_.anchor,T,O);return}if(G===Di){q(_,T,O);return}if(B!==2&&j&1&&z)if(B===0)z.beforeEnter(U),r(U,T,O),Te(()=>z.enter(U),F);else{const{leave:W,delayLeave:Y,afterLeave:rt}=z,et=()=>{_.ctx.isUnmounted?s(U):r(U,T,O)},lt=()=>{W(U,()=>{et(),rt&&rt()})};Y?Y(U,et,lt):lt()}else r(U,T,O)},Bt=(_,T,O,B=!1,F=!1)=>{const{type:U,props:G,ref:z,children:H,dynamicChildren:j,shapeFlag:Z,patchFlag:W,dirs:Y,cacheIndex:rt}=_;if(W===-2&&(F=!1),z!=null&&(un(),vs(z,null,O,_,!0),cn()),rt!=null&&(T.renderCache[rt]=void 0),Z&256){T.ctx.deactivate(_);return}const et=Z&1&&Y,lt=!Ts(_);let pt;if(lt&&(pt=G&&G.onVnodeBeforeUnmount)&&$e(pt,T,_),Z&6)qn(_.component,O,B);else{if(Z&128){_.suspense.unmount(O,B);return}et&&Qn(_,null,T,"beforeUnmount"),Z&64?_.type.remove(_,T,O,je,B):j&&!j.hasOnce&&(U!==we||W>0&&W&64)?Hn(j,T,O,!1,!0):(U===we&&W&384||!F&&Z&16)&&Hn(H,T,O),B&&jt(_)}(lt&&(pt=G&&G.onVnodeUnmounted)||et)&&Te(()=>{pt&&$e(pt,T,_),et&&Qn(_,null,T,"unmounted")},O)},jt=_=>{const{type:T,el:O,anchor:B,transition:F}=_;if(T===we){Ko(O,B);return}if(T===Di){Q(_);return}const U=()=>{s(O),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(_.shapeFlag&1&&F&&!F.persisted){const{leave:G,delayLeave:z}=F,H=()=>G(O,U);z?z(_.el,U,H):H()}else U()},Ko=(_,T)=>{let O;for(;_!==T;)O=g(_),s(_),_=O;s(T)},qn=(_,T,O)=>{const{bum:B,scope:F,job:U,subTree:G,um:z,m:H,a:j,parent:Z,slots:{__:W}}=_;Rc(H),Rc(j),B&&Pi(B),Z&&ot(W)&&W.forEach(Y=>{Z.renderCache[Y]=void 0}),F.stop(),U&&(U.flags|=8,Bt(G,_,T,O)),z&&Te(z,T),Te(()=>{_.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},Hn=(_,T,O,B=!1,F=!1,U=0)=>{for(let G=U;G<_.length;G++)Bt(_[G],T,O,B,F)},en=_=>{if(_.shapeFlag&6)return en(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const T=g(_.anchor||_.el),O=T&&T[Kg];return O?g(O):T};let Gr=!1;const ni=(_,T,O)=>{_==null?T._vnode&&Bt(T._vnode,null,null,!0):N(T._vnode||null,_,T,null,null,null,O),T._vnode=_,Gr||(Gr=!0,vc(),qf(),Gr=!1)},je={p:N,um:Bt,m:tn,r:jt,mt:Ee,mc:y,pc:yt,pbc:b,n:en,o:e};return{render:ni,hydrate:void 0,createApp:dy(ni)}}function pa({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Jn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function by(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ld(e,t,n=!1){const r=e.children,s=t.children;if(ot(r)&&ot(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=wn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&ld(a,l)),l.type===wo&&(l.el=a.el),l.type===Dn&&!l.el&&(l.el=a.el)}}function Ay(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function ud(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ud(t)}function Rc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Iy=Symbol.for("v-scx"),Ry=()=>xi(Iy);function Vi(e,t,n){return cd(e,t,n)}function cd(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=de({},n),u=t&&r||!t&&i!=="post";let f;if(Ns){if(i==="sync"){const I=Ry();f=I.__watcherHandles||(I.__watcherHandles=[])}else if(!u){const I=()=>{};return I.stop=We,I.resume=We,I.pause=We,I}}const h=fe;l.call=(I,R,N)=>Ye(I,h,R,N);let p=!1;i==="post"?l.scheduler=I=>{Te(I,h&&h.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(I,R)=>{R?I():Vl(I)}),l.augmentJob=I=>{t&&(I.flags|=4),p&&(I.flags|=2,h&&(I.id=h.uid,I.i=h))};const g=Bg(e,t,l);return Ns&&(f?f.push(g):u&&g()),g}function Sy(e,t,n){const r=this.proxy,s=Ut(e)?e.includes(".")?hd(r,e):()=>r[e]:e.bind(r,r);let i;ct(t)?i=t:(i=t.handler,n=t);const a=Ks(this),l=cd(s,i.bind(r),n);return a(),l}function hd(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Cy=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${xn(t)}Modifiers`]||e[`${ur(t)}Modifiers`];function Py(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&Cy(r,t.slice(7));a&&(a.trim&&(s=n.map(h=>Ut(h)?h.trim():h)),a.number&&(s=n.map(Va)));let l,u=r[l=la(t)]||r[l=la(xn(t))];!u&&i&&(u=r[l=la(ur(t))]),u&&Ye(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ye(f,e,6,s)}}function fd(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!ct(e)){const u=f=>{const h=fd(f,t,!0);h&&(l=!0,de(a,h))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(Vt(e)&&r.set(e,null),null):(ot(i)?i.forEach(u=>a[u]=null):de(a,i),Vt(e)&&r.set(e,a),a)}function To(e,t){return!e||!po(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,ur(t))||vt(e,t))}function Sc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:h,props:p,data:g,setupState:I,ctx:R,inheritAttrs:N}=e,x=Wi(e);let $,L;try{if(n.shapeFlag&4){const Q=s||r,st=Q;$=Ke(f.call(st,Q,h,p,I,g,R)),L=l}else{const Q=t;$=Ke(Q.length>1?Q(p,{attrs:l,slots:a,emit:u}):Q(p,null)),L=t.props?l:xy(l)}}catch(Q){bs.length=0,Eo(Q,e,1),$=Le(Dn)}let q=$;if(L&&N!==!1){const Q=Object.keys(L),{shapeFlag:st}=q;Q.length&&st&7&&(i&&Q.some(El)&&(L=Vy(L,i)),q=Nr(q,L,!1,!0))}return n.dirs&&(q=Nr(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&Dl(q,n.transition),$=q,Wi(x),$}const xy=e=>{let t;for(const n in e)(n==="class"||n==="style"||po(n))&&((t||(t={}))[n]=e[n]);return t},Vy=(e,t)=>{const n={};for(const r in e)(!El(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Dy(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Cc(r,a,f):!!a;if(u&8){const h=t.dynamicProps;for(let p=0;p<h.length;p++){const g=h[p];if(a[g]!==r[g]&&!To(f,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Cc(r,a,f):!0:!!a;return!1}function Cc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!To(n,i))return!0}return!1}function Ny({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const dd=e=>e.__isSuspense;function Oy(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):Hg(e)}const we=Symbol.for("v-fgt"),wo=Symbol.for("v-txt"),Dn=Symbol.for("v-cmt"),Di=Symbol.for("v-stc"),bs=[];let be=null;function Tt(e=!1){bs.push(be=e?null:[])}function ky(){bs.pop(),be=bs[bs.length-1]||null}let Ds=1;function Pc(e,t=!1){Ds+=e,e<0&&be&&t&&(be.hasOnce=!0)}function pd(e){return e.dynamicChildren=Ds>0?be||Ar:null,ky(),Ds>0&&be&&be.push(e),e}function Pt(e,t,n,r,s,i){return pd(C(e,t,n,r,s,i,!0))}function ds(e,t,n,r,s){return pd(Le(e,t,n,r,s,!0))}function md(e){return e?e.__v_isVNode===!0:!1}function cs(e,t){return e.type===t.type&&e.key===t.key}const gd=({key:e})=>e??null,Ni=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ut(e)||Zt(e)||ct(e)?{i:xe,r:e,k:t,f:!!n}:e:null);function C(e,t=null,n=null,r=0,s=null,i=e===we?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&gd(t),ref:t&&Ni(t),scopeId:zf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:xe};return l?(Ll(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Ut(n)?8:16),Ds>0&&!a&&be&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&be.push(u),u}const Le=My;function My(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===iy)&&(e=Dn),md(e)){const l=Nr(e,t,!0);return n&&Ll(l,n),Ds>0&&!i&&be&&(l.shapeFlag&6?be[be.indexOf(e)]=l:be.push(l)),l.patchFlag=-2,l}if(Wy(e)&&(e=e.__vccOpts),t){t=Ly(t);let{class:l,style:u}=t;l&&!Ut(l)&&(t.class=Hs(l)),Vt(u)&&(xl(u)&&!ot(u)&&(u=de({},u)),t.style=wl(u))}const a=Ut(e)?1:dd(e)?128:Wg(e)?64:Vt(e)?4:ct(e)?2:0;return C(e,t,n,r,s,a,i,!0)}function Ly(e){return e?xl(e)||nd(e)?de({},e):e:null}function Nr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?Uy(s||{},t):s,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&gd(f),ref:t&&t.ref?n&&i?ot(i)?i.concat(Ni(t)):[i,Ni(t)]:Ni(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==we?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nr(e.ssContent),ssFallback:e.ssFallback&&Nr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&Dl(h,u.clone(h)),h}function Ml(e=" ",t=0){return Le(wo,null,e,t)}function Fy(e,t){const n=Le(Di,null,e);return n.staticCount=t,n}function tr(e="",t=!1){return t?(Tt(),ds(Dn,null,e)):Le(Dn,null,e)}function Ke(e){return e==null||typeof e=="boolean"?Le(Dn):ot(e)?Le(we,null,e.slice()):md(e)?wn(e):Le(wo,null,String(e))}function wn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Nr(e)}function Ll(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ot(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ll(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!nd(t)?t._ctx=xe:s===3&&xe&&(xe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:xe},n=32):(t=String(t),r&64?(n=16,t=[Ml(t)]):n=8);e.children=t,e.shapeFlag|=n}function Uy(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Hs([t.class,r.class]));else if(s==="style")t.style=wl([t.style,r.style]);else if(po(s)){const i=t[s],a=r[s];a&&i!==a&&!(ot(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function $e(e,t,n,r=null){Ye(e,t,7,[n,r])}const By=Zf();let jy=0;function $y(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||By,i={uid:jy++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sd(r,s),emitsOptions:fd(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Py.bind(null,i),e.ce&&e.ce(i),i}let fe=null,Qi,Ba;{const e=yo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Qi=t("__VUE_INSTANCE_SETTERS__",n=>fe=n),Ba=t("__VUE_SSR_SETTERS__",n=>Ns=n)}const Ks=e=>{const t=fe;return Qi(e),e.scope.on(),()=>{e.scope.off(),Qi(t)}},xc=()=>{fe&&fe.scope.off(),Qi(null)};function yd(e){return e.vnode.shapeFlag&4}let Ns=!1;function qy(e,t=!1,n=!1){t&&Ba(t);const{props:r,children:s}=e.vnode,i=yd(e);my(e,r,i,t),Ey(e,s,n||t);const a=i?Hy(e,t):void 0;return t&&Ba(!1),a}function Hy(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,oy);const{setup:r}=n;if(r){un();const s=e.setupContext=r.length>1?Ky(e):null,i=Ks(e),a=zs(r,e,0,[e.props,s]),l=_f(a);if(cn(),i(),(l||e.sp)&&!Ts(e)&&Kf(e),l){if(a.then(xc,xc),t)return a.then(u=>{Vc(e,u)}).catch(u=>{Eo(u,e,0)});e.asyncDep=a}else Vc(e,a)}else _d(e)}function Vc(e,t,n){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Vt(t)&&(e.setupState=Bf(t)),_d(e)}function _d(e,t,n){const r=e.type;e.render||(e.render=r.render||We);{const s=Ks(e);un();try{ay(e)}finally{cn(),s()}}}const zy={get(e,t){return oe(e,"get",""),e[t]}};function Ky(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,zy),slots:e.slots,emit:e.emit,expose:t}}function bo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Bf(Ng(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ws)return ws[n](e)},has(t,n){return n in t||n in ws}})):e.proxy}function Wy(e){return ct(e)&&"__vccOpts"in e}const Ed=(e,t)=>Fg(e,t,Ns),Gy="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ja;const Dc=typeof window<"u"&&window.trustedTypes;if(Dc)try{ja=Dc.createPolicy("vue",{createHTML:e=>e})}catch{}const vd=ja?e=>ja.createHTML(e):e=>e,Qy="http://www.w3.org/2000/svg",Jy="http://www.w3.org/1998/Math/MathML",on=typeof document<"u"?document:null,Nc=on&&on.createElement("template"),Xy={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?on.createElementNS(Qy,e):t==="mathml"?on.createElementNS(Jy,e):n?on.createElement(e,{is:n}):on.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>on.createTextNode(e),createComment:e=>on.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>on.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Nc.innerHTML=vd(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Nc.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yy=Symbol("_vtc");function Zy(e,t,n){const r=e[Yy];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Oc=Symbol("_vod"),t_=Symbol("_vsh"),e_=Symbol(""),n_=/(^|;)\s*display\s*:/;function r_(e,t,n){const r=e.style,s=Ut(n);let i=!1;if(n&&!s){if(t)if(Ut(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Oi(r,l,"")}else for(const a in t)n[a]==null&&Oi(r,a,"");for(const a in n)a==="display"&&(i=!0),Oi(r,a,n[a])}else if(s){if(t!==n){const a=r[e_];a&&(n+=";"+a),r.cssText=n,i=n_.test(n)}}else t&&e.removeAttribute("style");Oc in e&&(e[Oc]=i?r.display:"",e[t_]&&(r.display="none"))}const kc=/\s*!important$/;function Oi(e,t,n){if(ot(n))n.forEach(r=>Oi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=s_(e,t);kc.test(n)?e.setProperty(ur(r),n.replace(kc,""),"important"):e[r]=n}}const Mc=["Webkit","Moz","ms"],ma={};function s_(e,t){const n=ma[t];if(n)return n;let r=xn(t);if(r!=="filter"&&r in e)return ma[t]=r;r=Tf(r);for(let s=0;s<Mc.length;s++){const i=Mc[s]+r;if(i in e)return ma[t]=i}return t}const Lc="http://www.w3.org/1999/xlink";function Fc(e,t,n,r,s,i=hg(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Lc,t.slice(6,t.length)):e.setAttributeNS(Lc,t,n):n==null||i&&!wf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Un(n)?String(n):n)}function Uc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?vd(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=wf(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Er(e,t,n,r){e.addEventListener(t,n,r)}function i_(e,t,n,r){e.removeEventListener(t,n,r)}const Bc=Symbol("_vei");function o_(e,t,n,r,s=null){const i=e[Bc]||(e[Bc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=a_(t);if(r){const f=i[t]=c_(r,s);Er(e,l,f,u)}else a&&(i_(e,l,a,u),i[t]=void 0)}}const jc=/(?:Once|Passive|Capture)$/;function a_(e){let t;if(jc.test(e)){t={};let r;for(;r=e.match(jc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ur(e.slice(2)),t]}let ga=0;const l_=Promise.resolve(),u_=()=>ga||(l_.then(()=>ga=0),ga=Date.now());function c_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ye(h_(r,n.value),t,5,[r])};return n.value=e,n.attached=u_(),n}function h_(e,t){if(ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const $c=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,f_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Zy(e,r,a):t==="style"?r_(e,n,r):po(t)?El(t)||o_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):d_(e,t,r,a))?(Uc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Fc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ut(r))?Uc(e,xn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Fc(e,t,r,a))};function d_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&$c(t)&&ct(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return $c(t)&&Ut(n)?!1:t in e}const qc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?n=>Pi(t,n):t};function p_(e){e.target.composing=!0}function Hc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ya=Symbol("_assign"),Ce={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[ya]=qc(s);const i=r||s.props&&s.props.type==="number";Er(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Va(l)),e[ya](l)}),n&&Er(e,"change",()=>{e.value=e.value.trim()}),t||(Er(e,"compositionstart",p_),Er(e,"compositionend",Hc),Er(e,"change",Hc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[ya]=qc(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Va(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},m_=["ctrl","shift","alt","meta"],g_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>m_.some(n=>e[`${n}Key`]&&!t.includes(n))},Td=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let a=0;a<t.length;a++){const l=g_[t[a]];if(l&&l(s,t))return}return e(s,...i)})},y_=de({patchProp:f_},Xy);let zc;function __(){return zc||(zc=Ty(y_))}const E_=(...e)=>{const t=__().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=T_(r);if(!s)return;const i=t._component;!ct(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,v_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function v_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function T_(e){return Ut(e)?document.querySelector(e):e}const w_="./logo.png";function wd(e,t){return function(){return e.apply(t,arguments)}}const{toString:b_}=Object.prototype,{getPrototypeOf:Fl}=Object,{iterator:Ao,toStringTag:bd}=Symbol,Io=(e=>t=>{const n=b_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Be=e=>(e=e.toLowerCase(),t=>Io(t)===e),Ro=e=>t=>typeof t===e,{isArray:Br}=Array,Os=Ro("undefined");function A_(e){return e!==null&&!Os(e)&&e.constructor!==null&&!Os(e.constructor)&&ye(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ad=Be("ArrayBuffer");function I_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ad(e.buffer),t}const R_=Ro("string"),ye=Ro("function"),Id=Ro("number"),So=e=>e!==null&&typeof e=="object",S_=e=>e===!0||e===!1,ki=e=>{if(Io(e)!=="object")return!1;const t=Fl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(bd in e)&&!(Ao in e)},C_=Be("Date"),P_=Be("File"),x_=Be("Blob"),V_=Be("FileList"),D_=e=>So(e)&&ye(e.pipe),N_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ye(e.append)&&((t=Io(e))==="formdata"||t==="object"&&ye(e.toString)&&e.toString()==="[object FormData]"))},O_=Be("URLSearchParams"),[k_,M_,L_,F_]=["ReadableStream","Request","Response","Headers"].map(Be),U_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ws(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Br(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(r=0;r<a;r++)l=i[r],t.call(null,e[l],l,e)}}function Rd(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const er=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sd=e=>!Os(e)&&e!==er;function $a(){const{caseless:e}=Sd(this)&&this||{},t={},n=(r,s)=>{const i=e&&Rd(t,s)||s;ki(t[i])&&ki(r)?t[i]=$a(t[i],r):ki(r)?t[i]=$a({},r):Br(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ws(arguments[r],n);return t}const B_=(e,t,n,{allOwnKeys:r}={})=>(Ws(t,(s,i)=>{n&&ye(s)?e[i]=wd(s,n):e[i]=s},{allOwnKeys:r}),e),j_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$_=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},q_=(e,t,n,r)=>{let s,i,a;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&Fl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},H_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},z_=e=>{if(!e)return null;if(Br(e))return e;let t=e.length;if(!Id(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},K_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fl(Uint8Array)),W_=(e,t)=>{const r=(e&&e[Ao]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},G_=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Q_=Be("HTMLFormElement"),J_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Kc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),X_=Be("RegExp"),Cd=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ws(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(r[i]=a||s)}),Object.defineProperties(e,r)},Y_=e=>{Cd(e,(t,n)=>{if(ye(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ye(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Z_=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Br(e)?r(e):r(String(e).split(t)),n},tE=()=>{},eE=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function nE(e){return!!(e&&ye(e.append)&&e[bd]==="FormData"&&e[Ao])}const rE=e=>{const t=new Array(10),n=(r,s)=>{if(So(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const i=Br(r)?[]:{};return Ws(r,(a,l)=>{const u=n(a,s+1);!Os(u)&&(i[l]=u)}),t[s]=void 0,i}}return r};return n(e,0)},sE=Be("AsyncFunction"),iE=e=>e&&(So(e)||ye(e))&&ye(e.then)&&ye(e.catch),Pd=((e,t)=>e?setImmediate:t?((n,r)=>(er.addEventListener("message",({source:s,data:i})=>{s===er&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),er.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ye(er.postMessage)),oE=typeof queueMicrotask<"u"?queueMicrotask.bind(er):typeof process<"u"&&process.nextTick||Pd,aE=e=>e!=null&&ye(e[Ao]),V={isArray:Br,isArrayBuffer:Ad,isBuffer:A_,isFormData:N_,isArrayBufferView:I_,isString:R_,isNumber:Id,isBoolean:S_,isObject:So,isPlainObject:ki,isReadableStream:k_,isRequest:M_,isResponse:L_,isHeaders:F_,isUndefined:Os,isDate:C_,isFile:P_,isBlob:x_,isRegExp:X_,isFunction:ye,isStream:D_,isURLSearchParams:O_,isTypedArray:K_,isFileList:V_,forEach:Ws,merge:$a,extend:B_,trim:U_,stripBOM:j_,inherits:$_,toFlatObject:q_,kindOf:Io,kindOfTest:Be,endsWith:H_,toArray:z_,forEachEntry:W_,matchAll:G_,isHTMLForm:Q_,hasOwnProperty:Kc,hasOwnProp:Kc,reduceDescriptors:Cd,freezeMethods:Y_,toObjectSet:Z_,toCamelCase:J_,noop:tE,toFiniteNumber:eE,findKey:Rd,global:er,isContextDefined:Sd,isSpecCompliantForm:nE,toJSONObject:rE,isAsyncFn:sE,isThenable:iE,setImmediate:Pd,asap:oE,isIterable:aE};function ut(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const xd=ut.prototype,Vd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Vd[e]={value:e}});Object.defineProperties(ut,Vd);Object.defineProperty(xd,"isAxiosError",{value:!0});ut.from=(e,t,n,r,s,i)=>{const a=Object.create(xd);return V.toFlatObject(e,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),ut.call(a,e.message,t,n,r,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const lE=null;function qa(e){return V.isPlainObject(e)||V.isArray(e)}function Dd(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function Wc(e,t,n){return e?e.concat(t).map(function(s,i){return s=Dd(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function uE(e){return V.isArray(e)&&!e.some(qa)}const cE=V.toFlatObject(V,{},null,function(t){return/^is[A-Z]/.test(t)});function Co(e,t,n){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,x){return!V.isUndefined(x[N])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function f(R){if(R===null)return"";if(V.isDate(R))return R.toISOString();if(V.isBoolean(R))return R.toString();if(!u&&V.isBlob(R))throw new ut("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(R)||V.isTypedArray(R)?u&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function h(R,N,x){let $=R;if(R&&!x&&typeof R=="object"){if(V.endsWith(N,"{}"))N=r?N:N.slice(0,-2),R=JSON.stringify(R);else if(V.isArray(R)&&uE(R)||(V.isFileList(R)||V.endsWith(N,"[]"))&&($=V.toArray(R)))return N=Dd(N),$.forEach(function(q,Q){!(V.isUndefined(q)||q===null)&&t.append(a===!0?Wc([N],Q,i):a===null?N:N+"[]",f(q))}),!1}return qa(R)?!0:(t.append(Wc(x,N,i),f(R)),!1)}const p=[],g=Object.assign(cE,{defaultVisitor:h,convertValue:f,isVisitable:qa});function I(R,N){if(!V.isUndefined(R)){if(p.indexOf(R)!==-1)throw Error("Circular reference detected in "+N.join("."));p.push(R),V.forEach(R,function($,L){(!(V.isUndefined($)||$===null)&&s.call(t,$,V.isString(L)?L.trim():L,N,g))===!0&&I($,N?N.concat(L):[L])}),p.pop()}}if(!V.isObject(e))throw new TypeError("data must be an object");return I(e),t}function Gc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ul(e,t){this._pairs=[],e&&Co(e,this,t)}const Nd=Ul.prototype;Nd.append=function(t,n){this._pairs.push([t,n])};Nd.toString=function(t){const n=t?function(r){return t.call(this,r,Gc)}:Gc;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function hE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Od(e,t,n){if(!t)return e;const r=n&&n.encode||hE;V.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=V.isURLSearchParams(t)?t.toString():new Ul(t,n).toString(r),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Qc{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){V.forEach(this.handlers,function(r){r!==null&&t(r)})}}const kd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fE=typeof URLSearchParams<"u"?URLSearchParams:Ul,dE=typeof FormData<"u"?FormData:null,pE=typeof Blob<"u"?Blob:null,mE={isBrowser:!0,classes:{URLSearchParams:fE,FormData:dE,Blob:pE},protocols:["http","https","file","blob","url","data"]},Bl=typeof window<"u"&&typeof document<"u",Ha=typeof navigator=="object"&&navigator||void 0,gE=Bl&&(!Ha||["ReactNative","NativeScript","NS"].indexOf(Ha.product)<0),yE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_E=Bl&&window.location.href||"http://localhost",EE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bl,hasStandardBrowserEnv:gE,hasStandardBrowserWebWorkerEnv:yE,navigator:Ha,origin:_E},Symbol.toStringTag,{value:"Module"})),le={...EE,...mE};function vE(e,t){return Co(e,new le.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return le.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function TE(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wE(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function Md(e){function t(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=i>=n.length;return a=!a&&V.isArray(s)?s.length:a,u?(V.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!V.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],i)&&V.isArray(s[a])&&(s[a]=wE(s[a])),!l)}if(V.isFormData(e)&&V.isFunction(e.entries)){const n={};return V.forEachEntry(e,(r,s)=>{t(TE(r),s,n,0)}),n}return null}function bE(e,t,n){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Gs={transitional:kd,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=V.isObject(t);if(i&&V.isHTMLForm(t)&&(t=new FormData(t)),V.isFormData(t))return s?JSON.stringify(Md(t)):t;if(V.isArrayBuffer(t)||V.isBuffer(t)||V.isStream(t)||V.isFile(t)||V.isBlob(t)||V.isReadableStream(t))return t;if(V.isArrayBufferView(t))return t.buffer;if(V.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return vE(t,this.formSerializer).toString();if((l=V.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Co(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),bE(t)):t}],transformResponse:[function(t){const n=this.transitional||Gs.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(V.isResponse(t)||V.isReadableStream(t))return t;if(t&&V.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?ut.from(l,ut.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{Gs.headers[e]={}});const AE=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),IE=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&AE[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Jc=Symbol("internals");function hs(e){return e&&String(e).trim().toLowerCase()}function Mi(e){return e===!1||e==null?e:V.isArray(e)?e.map(Mi):String(e)}function RE(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const SE=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function _a(e,t,n,r,s){if(V.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!V.isString(t)){if(V.isString(r))return t.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(t)}}function CE(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function PE(e,t){const n=V.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,a){return this[r].call(this,t,s,i,a)},configurable:!0})})}let _e=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,u,f){const h=hs(u);if(!h)throw new Error("header name must be a non-empty string");const p=V.findKey(s,h);(!p||s[p]===void 0||f===!0||f===void 0&&s[p]!==!1)&&(s[p||u]=Mi(l))}const a=(l,u)=>V.forEach(l,(f,h)=>i(f,h,u));if(V.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(V.isString(t)&&(t=t.trim())&&!SE(t))a(IE(t),n);else if(V.isObject(t)&&V.isIterable(t)){let l={},u,f;for(const h of t){if(!V.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[f=h[0]]=(u=l[f])?V.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}a(l,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=hs(t),t){const r=V.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return RE(s);if(V.isFunction(n))return n.call(this,s,r);if(V.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=hs(t),t){const r=V.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||_a(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(a){if(a=hs(a),a){const l=V.findKey(r,a);l&&(!n||_a(r,r[l],l,n))&&(delete r[l],s=!0)}}return V.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||_a(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return V.forEach(this,(s,i)=>{const a=V.findKey(r,i);if(a){n[a]=Mi(s),delete n[i];return}const l=t?CE(i):String(i).trim();l!==i&&delete n[i],n[l]=Mi(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return V.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Jc]=this[Jc]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=hs(a);r[l]||(PE(s,a),r[l]=!0)}return V.isArray(t)?t.forEach(i):i(t),this}};_e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(_e.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});V.freezeMethods(_e);function Ea(e,t){const n=this||Gs,r=t||n,s=_e.from(r.headers);let i=r.data;return V.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Ld(e){return!!(e&&e.__CANCEL__)}function jr(e,t,n){ut.call(this,e??"canceled",ut.ERR_CANCELED,t,n),this.name="CanceledError"}V.inherits(jr,ut,{__CANCEL__:!0});function Fd(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ut("Request failed with status code "+n.status,[ut.ERR_BAD_REQUEST,ut.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function xE(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function VE(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const f=Date.now(),h=r[i];a||(a=f),n[s]=u,r[s]=f;let p=i,g=0;for(;p!==s;)g+=n[p++],p=p%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),f-a<t)return;const I=h&&f-h;return I?Math.round(g*1e3/I):void 0}}function DE(e,t){let n=0,r=1e3/t,s,i;const a=(f,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),e.apply(null,f)};return[(...f)=>{const h=Date.now(),p=h-n;p>=r?a(f,h):(s=f,i||(i=setTimeout(()=>{i=null,a(s)},r-p)))},()=>s&&a(s)]}const Ji=(e,t,n=3)=>{let r=0;const s=VE(50,250);return DE(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,u=a-r,f=s(u),h=a<=l;r=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&h?(l-a)/f:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},Xc=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Yc=e=>(...t)=>V.asap(()=>e(...t)),NE=le.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,le.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(le.origin),le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent)):()=>!0,OE=le.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const a=[e+"="+encodeURIComponent(t)];V.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),V.isString(r)&&a.push("path="+r),V.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kE(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ME(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ud(e,t,n){let r=!kE(t);return e&&(r||n==!1)?ME(e,t):t}const Zc=e=>e instanceof _e?{...e}:e;function ir(e,t){t=t||{};const n={};function r(f,h,p,g){return V.isPlainObject(f)&&V.isPlainObject(h)?V.merge.call({caseless:g},f,h):V.isPlainObject(h)?V.merge({},h):V.isArray(h)?h.slice():h}function s(f,h,p,g){if(V.isUndefined(h)){if(!V.isUndefined(f))return r(void 0,f,p,g)}else return r(f,h,p,g)}function i(f,h){if(!V.isUndefined(h))return r(void 0,h)}function a(f,h){if(V.isUndefined(h)){if(!V.isUndefined(f))return r(void 0,f)}else return r(void 0,h)}function l(f,h,p){if(p in t)return r(f,h);if(p in e)return r(void 0,f)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(f,h,p)=>s(Zc(f),Zc(h),p,!0)};return V.forEach(Object.keys(Object.assign({},e,t)),function(h){const p=u[h]||s,g=p(e[h],t[h],h);V.isUndefined(g)&&p!==l||(n[h]=g)}),n}const Bd=e=>{const t=ir({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=_e.from(a),t.url=Od(Ud(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(V.isFormData(n)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[f,...h]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([f||"multipart/form-data",...h].join("; "))}}if(le.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(t)),r||r!==!1&&NE(t.url))){const f=s&&i&&OE.read(i);f&&a.set(s,f)}return t},LE=typeof XMLHttpRequest<"u",FE=LE&&function(e){return new Promise(function(n,r){const s=Bd(e);let i=s.data;const a=_e.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=s,h,p,g,I,R;function N(){I&&I(),R&&R(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function $(){if(!x)return;const q=_e.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),st={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:q,config:e,request:x};Fd(function(w){n(w),N()},function(w){r(w),N()},st),x=null}"onloadend"in x?x.onloadend=$:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout($)},x.onabort=function(){x&&(r(new ut("Request aborted",ut.ECONNABORTED,e,x)),x=null)},x.onerror=function(){r(new ut("Network Error",ut.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let Q=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const st=s.transitional||kd;s.timeoutErrorMessage&&(Q=s.timeoutErrorMessage),r(new ut(Q,st.clarifyTimeoutError?ut.ETIMEDOUT:ut.ECONNABORTED,e,x)),x=null},i===void 0&&a.setContentType(null),"setRequestHeader"in x&&V.forEach(a.toJSON(),function(Q,st){x.setRequestHeader(st,Q)}),V.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),l&&l!=="json"&&(x.responseType=s.responseType),f&&([g,R]=Ji(f,!0),x.addEventListener("progress",g)),u&&x.upload&&([p,I]=Ji(u),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",I)),(s.cancelToken||s.signal)&&(h=q=>{x&&(r(!q||q.type?new jr(null,e,x):q),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const L=xE(s.url);if(L&&le.protocols.indexOf(L)===-1){r(new ut("Unsupported protocol "+L+":",ut.ERR_BAD_REQUEST,e));return}x.send(i||null)})},UE=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(f){if(!s){s=!0,l();const h=f instanceof Error?f:this.reason;r.abort(h instanceof ut?h:new jr(h instanceof Error?h.message:h))}};let a=t&&setTimeout(()=>{a=null,i(new ut(`timeout ${t} of ms exceeded`,ut.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(i):f.removeEventListener("abort",i)}),e=null)};e.forEach(f=>f.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>V.asap(l),u}},BE=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},jE=async function*(e,t){for await(const n of $E(e))yield*BE(n,t)},$E=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},th=(e,t,n,r)=>{const s=jE(e,t);let i=0,a,l=u=>{a||(a=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:h}=await s.next();if(f){l(),u.close();return}let p=h.byteLength;if(n){let g=i+=p;n(g)}u.enqueue(new Uint8Array(h))}catch(f){throw l(f),f}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},Po=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jd=Po&&typeof ReadableStream=="function",qE=Po&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),$d=(e,...t)=>{try{return!!e(...t)}catch{return!1}},HE=jd&&$d(()=>{let e=!1;const t=new Request(le.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),eh=64*1024,za=jd&&$d(()=>V.isReadableStream(new Response("").body)),Xi={stream:za&&(e=>e.body)};Po&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Xi[t]&&(Xi[t]=V.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new ut(`Response type '${t}' is not supported`,ut.ERR_NOT_SUPPORT,r)})})})(new Response);const zE=async e=>{if(e==null)return 0;if(V.isBlob(e))return e.size;if(V.isSpecCompliantForm(e))return(await new Request(le.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(V.isArrayBufferView(e)||V.isArrayBuffer(e))return e.byteLength;if(V.isURLSearchParams(e)&&(e=e+""),V.isString(e))return(await qE(e)).byteLength},KE=async(e,t)=>{const n=V.toFiniteNumber(e.getContentLength());return n??zE(t)},WE=Po&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:u,responseType:f,headers:h,withCredentials:p="same-origin",fetchOptions:g}=Bd(e);f=f?(f+"").toLowerCase():"text";let I=UE([s,i&&i.toAbortSignal()],a),R;const N=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let x;try{if(u&&HE&&n!=="get"&&n!=="head"&&(x=await KE(h,r))!==0){let st=new Request(t,{method:"POST",body:r,duplex:"half"}),dt;if(V.isFormData(r)&&(dt=st.headers.get("content-type"))&&h.setContentType(dt),st.body){const[w,y]=Xc(x,Ji(Yc(u)));r=th(st.body,eh,w,y)}}V.isString(p)||(p=p?"include":"omit");const $="credentials"in Request.prototype;R=new Request(t,{...g,signal:I,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:$?p:void 0});let L=await fetch(R,g);const q=za&&(f==="stream"||f==="response");if(za&&(l||q&&N)){const st={};["status","statusText","headers"].forEach(v=>{st[v]=L[v]});const dt=V.toFiniteNumber(L.headers.get("content-length")),[w,y]=l&&Xc(dt,Ji(Yc(l),!0))||[];L=new Response(th(L.body,eh,w,()=>{y&&y(),N&&N()}),st)}f=f||"text";let Q=await Xi[V.findKey(Xi,f)||"text"](L,e);return!q&&N&&N(),await new Promise((st,dt)=>{Fd(st,dt,{data:Q,headers:_e.from(L.headers),status:L.status,statusText:L.statusText,config:e,request:R})})}catch($){throw N&&N(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new ut("Network Error",ut.ERR_NETWORK,e,R),{cause:$.cause||$}):ut.from($,$&&$.code,e,R)}}),Ka={http:lE,xhr:FE,fetch:WE};V.forEach(Ka,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const nh=e=>`- ${e}`,GE=e=>V.isFunction(e)||e===null||e===!1,qd={getAdapter:e=>{e=V.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let a;if(r=n,!GE(n)&&(r=Ka[(a=String(n)).toLowerCase()],r===void 0))throw new ut(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(nh).join(`
`):" "+nh(i[0]):"as no adapter specified";throw new ut("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Ka};function va(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new jr(null,e)}function rh(e){return va(e),e.headers=_e.from(e.headers),e.data=Ea.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qd.getAdapter(e.adapter||Gs.adapter)(e).then(function(r){return va(e),r.data=Ea.call(e,e.transformResponse,r),r.headers=_e.from(r.headers),r},function(r){return Ld(r)||(va(e),r&&r.response&&(r.response.data=Ea.call(e,e.transformResponse,r.response),r.response.headers=_e.from(r.response.headers))),Promise.reject(r)})}const Hd="1.10.0",xo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xo[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const sh={};xo.transitional=function(t,n,r){function s(i,a){return"[Axios v"+Hd+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(t===!1)throw new ut(s(a," has been removed"+(n?" in "+n:"")),ut.ERR_DEPRECATED);return n&&!sh[a]&&(sh[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,l):!0}};xo.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function QE(e,t,n){if(typeof e!="object")throw new ut("options must be an object",ut.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const l=e[i],u=l===void 0||a(l,i,e);if(u!==!0)throw new ut("option "+i+" must be "+u,ut.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ut("Unknown option "+i,ut.ERR_BAD_OPTION)}}const Li={assertOptions:QE,validators:xo},qe=Li.validators;let sr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Qc,response:new Qc}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ir(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Li.assertOptions(r,{silentJSONParsing:qe.transitional(qe.boolean),forcedJSONParsing:qe.transitional(qe.boolean),clarifyTimeoutError:qe.transitional(qe.boolean)},!1),s!=null&&(V.isFunction(s)?n.paramsSerializer={serialize:s}:Li.assertOptions(s,{encode:qe.function,serialize:qe.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Li.assertOptions(n,{baseUrl:qe.spelling("baseURL"),withXsrfToken:qe.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&V.merge(i.common,i[n.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],R=>{delete i[R]}),n.headers=_e.concat(a,i);const l=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(u=u&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const f=[];this.interceptors.response.forEach(function(N){f.push(N.fulfilled,N.rejected)});let h,p=0,g;if(!u){const R=[rh.bind(this),void 0];for(R.unshift.apply(R,l),R.push.apply(R,f),g=R.length,h=Promise.resolve(n);p<g;)h=h.then(R[p++],R[p++]);return h}g=l.length;let I=n;for(p=0;p<g;){const R=l[p++],N=l[p++];try{I=R(I)}catch(x){N.call(this,x);break}}try{h=rh.call(this,I)}catch(R){return Promise.reject(R)}for(p=0,g=f.length;p<g;)h=h.then(f[p++],f[p++]);return h}getUri(t){t=ir(this.defaults,t);const n=Ud(t.baseURL,t.url,t.allowAbsoluteUrls);return Od(n,t.params,t.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(t){sr.prototype[t]=function(n,r){return this.request(ir(r||{},{method:t,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,l){return this.request(ir(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}sr.prototype[t]=n(),sr.prototype[t+"Form"]=n(!0)});let JE=class zd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,l){r.reason||(r.reason=new jr(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new zd(function(s){t=s}),cancel:t}}};function XE(e){return function(n){return e.apply(null,n)}}function YE(e){return V.isObject(e)&&e.isAxiosError===!0}const Wa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wa).forEach(([e,t])=>{Wa[t]=e});function Kd(e){const t=new sr(e),n=wd(sr.prototype.request,t);return V.extend(n,sr.prototype,t,{allOwnKeys:!0}),V.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Kd(ir(e,s))},n}const Ot=Kd(Gs);Ot.Axios=sr;Ot.CanceledError=jr;Ot.CancelToken=JE;Ot.isCancel=Ld;Ot.VERSION=Hd;Ot.toFormData=Co;Ot.AxiosError=ut;Ot.Cancel=Ot.CanceledError;Ot.all=function(t){return Promise.all(t)};Ot.spread=XE;Ot.isAxiosError=YE;Ot.mergeConfig=ir;Ot.AxiosHeaders=_e;Ot.formToJSON=e=>Md(V.isHTMLForm(e)?new FormData(e):e);Ot.getAdapter=qd.getAdapter;Ot.HttpStatusCode=Wa;Ot.default=Ot;const{Axios:VI,AxiosError:DI,CanceledError:NI,isCancel:OI,CancelToken:kI,VERSION:MI,all:LI,Cancel:FI,isAxiosError:UI,spread:BI,toFormData:jI,AxiosHeaders:$I,HttpStatusCode:qI,formToJSON:HI,getAdapter:zI,mergeConfig:KI}=Ot;function Wd(){const e="546c25a59c58ad7",t="8081538c99af59dc9f09a586d1c91983";return{uploadImage:async r=>{const s=new FormData;s.append("image",r);try{const i=await Ot.post("https://api.imgur.com/3/image",s,{headers:{Authorization:`Client-ID ${e}`,"Content-Type":"multipart/form-data"}});return{success:!0,url:i.data.data.link,deleteHash:i.data.data.deletehash}}catch{try{const a=new FormData;a.append("image",r);const l=await Ot.post(`https://api.imgbb.com/1/upload?key=${t}`,a);return{success:!0,url:l.data.data.url,deleteUrl:l.data.data.delete_url}}catch(a){return{success:!1,error:a.message}}}}}}const ZE={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},tv={class:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ev={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl"},nv={class:"flex items-center justify-between"},rv={class:"space-y-2"},sv={key:0,class:"flex items-center justify-center"},iv={key:1,class:"space-y-4"},ov=["src"],av={key:2,class:"space-y-4"},lv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cv={class:"relative"},hv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fv={class:"flex items-center space-x-2"},dv=["onClick"],pv={class:"ml-2 text-sm text-gray-700"},mv={class:"flex justify-end space-x-3 pt-4"},gv={__name:"AddEntryModal",emits:["close","add-entry"],setup(e,{emit:t}){const n=t,{uploadImage:r}=Wd(),s=De({restaurant:"",dishName:"",cuisine:"",location:"",rating:5,price:"",notes:"",image:null,imageUrl:""}),i=De(!1),a=De(null),l=async f=>{const h=f.target.files[0];if(!h)return;i.value=!0;const p=await r(h);p.success?(s.value.imageUrl=p.url,s.value.image=h):alert("Failed to upload image. Please try again."),i.value=!1},u=()=>{if(!s.value.restaurant||!s.value.dishName){alert("Please fill in restaurant and dish name");return}const f={restaurant:s.value.restaurant,dishName:s.value.dishName,cuisine:s.value.cuisine,location:s.value.location,rating:s.value.rating,price:s.value.price,notes:s.value.notes,imageUrl:s.value.imageUrl,createdAt:new Date().toISOString()};n("add-entry",f),n("close")};return(f,h)=>(Tt(),Pt("div",ZE,[C("div",tv,[C("div",ev,[C("div",nv,[h[10]||(h[10]=C("h2",{class:"text-2xl font-bold text-gray-900"},"New Food Memory",-1)),C("button",{onClick:h[0]||(h[0]=p=>f.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-600 hover:text-gray-800"},h[9]||(h[9]=[C("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),C("form",{onSubmit:Td(u,["prevent"]),class:"p-6 space-y-6"},[C("div",rv,[h[14]||(h[14]=C("label",{class:"block text-sm font-medium text-gray-700"},"Photo",-1)),C("div",{class:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-sage-400 transition-colors cursor-pointer bg-gray-50 hover:bg-gray-100",onClick:h[1]||(h[1]=p=>a.value?.click())},[i.value?(Tt(),Pt("div",sv,h[11]||(h[11]=[C("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-sage-500"},null,-1),C("span",{class:"ml-2 text-gray-600"},"Uploading...",-1)]))):s.value.imageUrl?(Tt(),Pt("div",iv,[C("img",{src:s.value.imageUrl,alt:"Uploaded food",class:"mx-auto max-h-48 rounded-lg"},null,8,ov),h[12]||(h[12]=C("p",{class:"text-sm text-gray-600"},"Click to change photo",-1))])):(Tt(),Pt("div",av,h[13]||(h[13]=[C("svg",{class:"mx-auto h-12 w-12 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),C("div",null,[C("p",{class:"text-lg font-medium text-gray-900"},"Add a photo"),C("p",{class:"text-sm text-gray-600"}," Capture your delicious moment ")],-1)])))]),C("input",{ref_key:"imageInput",ref:a,type:"file",accept:"image/*",onChange:l,class:"hidden"},null,544)]),C("div",lv,[C("div",null,[h[15]||(h[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Restaurant *",-1)),Se(C("input",{"onUpdate:modelValue":h[2]||(h[2]=p=>s.value.restaurant=p),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"Where did you dine?"},null,512),[[Ce,s.value.restaurant]])]),C("div",null,[h[16]||(h[16]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dish Name *",-1)),Se(C("input",{"onUpdate:modelValue":h[3]||(h[3]=p=>s.value.dishName=p),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"What did you order?"},null,512),[[Ce,s.value.dishName]])])]),C("div",uv,[C("div",null,[h[17]||(h[17]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cuisine Type",-1)),Se(C("input",{"onUpdate:modelValue":h[4]||(h[4]=p=>s.value.cuisine=p),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"Italian, Japanese, etc."},null,512),[[Ce,s.value.cuisine]])]),C("div",null,[h[19]||(h[19]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),C("div",cv,[h[18]||(h[18]=C("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Se(C("input",{"onUpdate:modelValue":h[5]||(h[5]=p=>s.value.location=p),type:"text",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"City, neighborhood"},null,512),[[Ce,s.value.location]])])])]),C("div",hv,[C("div",null,[h[20]||(h[20]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rating",-1)),C("div",fv,[(Tt(),Pt(we,null,Nl(5,p=>C("span",{key:p,onClick:g=>s.value.rating=p,class:Hs(["cursor-pointer text-2xl transition-colors",p<=s.value.rating?"text-yellow-500":"text-gray-400"])}," ⭐ ",10,dv)),64)),C("span",pv,"("+ke(s.value.rating)+"/5)",1)])]),C("div",null,[h[21]||(h[21]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price",-1)),Se(C("input",{"onUpdate:modelValue":h[6]||(h[6]=p=>s.value.price=p),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"$25, $$, etc."},null,512),[[Ce,s.value.price]])])]),C("div",null,[h[22]||(h[22]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),Se(C("textarea",{"onUpdate:modelValue":h[7]||(h[7]=p=>s.value.notes=p),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all resize-none",placeholder:"How was the taste? Atmosphere? Would you recommend it? Share your thoughts..."},null,512),[[Ce,s.value.notes]])]),C("div",mv,[C("button",{type:"button",onClick:h[8]||(h[8]=p=>f.$emit("close")),class:"px-6 py-3 border border-gray-300 text-gray-900 rounded-xl hover:bg-gray-50 transition-colors font-medium"}," Cancel "),h[23]||(h[23]=C("button",{type:"submit",class:"px-6 py-3 bg-sage-600 text-gray-900 rounded-xl hover:bg-sage-700 transition-colors font-medium shadow-sm"}," Save Memory ",-1))])],32)])]))}},yv=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},_v={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 group"},Ev={class:"aspect-w-16 aspect-h-9 bg-gray-100"},vv=["src","alt"],Tv={key:1,class:"w-full h-48 bg-gradient-to-br from-sage-100 to-sage-200 flex items-center justify-center"},wv={class:"p-6"},bv={class:"flex justify-between items-start mb-3"},Av={class:"flex-1"},Iv={class:"text-xl font-bold text-gray-900 mb-1"},Rv={class:"text-sage-600 font-medium"},Sv={class:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity"},Cv={class:"space-y-2 mb-4"},Pv={key:0,class:"inline-block bg-sage-100 text-sage-800 text-xs px-2 py-1 rounded-full"},xv={key:1,class:"flex items-center text-sm text-gray-600"},Vv={class:"flex items-center justify-between"},Dv={class:"text-sm"},Nv={class:"text-lg"},Ov={key:0,class:"text-sm font-medium text-terracotta-700"},kv={key:0,class:"mb-4"},Mv={class:"text-gray-700 text-sm leading-relaxed line-clamp-3"},Lv={class:"text-xs text-gray-500 border-t border-gray-100 pt-3"},Fv={__name:"EntryCard",props:{entry:{type:Object,required:!0}},emits:["delete","edit"],setup(e,{emit:t}){const n=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),r=s=>"⭐".repeat(s)+"☆".repeat(5-s);return(s,i)=>(Tt(),Pt("div",_v,[C("div",Ev,[e.entry.imageUrl?(Tt(),Pt("img",{key:0,src:e.entry.imageUrl,alt:e.entry.dishName,class:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"},null,8,vv)):(Tt(),Pt("div",Tv,i[2]||(i[2]=[C("span",{class:"text-6xl"},"🍽️",-1)])))]),C("div",wv,[C("div",bv,[C("div",Av,[C("h3",Iv,ke(e.entry.dishName),1),C("p",Rv,ke(e.entry.restaurant),1)]),C("div",Sv,[C("button",{onClick:i[0]||(i[0]=a=>s.$emit("edit",e.entry)),class:"p-2 text-gray-500 hover:text-sage-700 hover:bg-sage-50 rounded-lg transition-colors"},i[3]||(i[3]=[C("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])),C("button",{onClick:i[1]||(i[1]=a=>s.$emit("delete",e.entry.id)),class:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors"},i[4]||(i[4]=[C("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]))])]),C("div",Cv,[e.entry.cuisine?(Tt(),Pt("div",Pv,ke(e.entry.cuisine),1)):tr("",!0),e.entry.location?(Tt(),Pt("div",xv,[i[5]||(i[5]=C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Ml(" "+ke(e.entry.location),1)])):tr("",!0),C("div",Vv,[C("div",Dv,[C("span",Nv,ke(r(e.entry.rating)),1)]),e.entry.price?(Tt(),Pt("div",Ov,ke(e.entry.price),1)):tr("",!0)])]),e.entry.notes?(Tt(),Pt("div",kv,[C("p",Mv,ke(e.entry.notes),1)])):tr("",!0),C("div",Lv,ke(n(e.entry.createdAt)),1)])]))}},Uv=yv(Fv,[["__scopeId","data-v-9fa107fa"]]),Bv={class:"relative"},jv=["value"],$v={__name:"SearchBar",props:{modelValue:String},emits:["update:modelValue"],setup(e,{emit:t}){return(n,r)=>(Tt(),Pt("div",Bv,[r[1]||(r[1]=C("svg",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),C("input",{value:e.modelValue,onInput:r[0]||(r[0]=s=>n.$emit("update:modelValue",s.target.value)),type:"text",placeholder:"Search restaurants, dishes, or notes...",class:"w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-2xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all text-gray-900 placeholder-gray-600"},null,40,jv)]))}},qv={class:"text-center py-16"},Hv={__name:"EmptyState",emits:["add-entry"],setup(e,{emit:t}){return(n,r)=>(Tt(),Pt("div",qv,[r[1]||(r[1]=C("div",{class:"mx-auto w-32 h-32 bg-gradient-to-br from-sage-100 to-sage-200 rounded-full flex items-center justify-center mb-6"},[C("span",{class:"text-5xl"},"📝")],-1)),r[2]||(r[2]=C("h3",{class:"text-2xl font-bold text-gray-900 mb-3"}," Start Your Food Journey ",-1)),r[3]||(r[3]=C("p",{class:"text-gray-600 mb-8 max-w-md mx-auto leading-relaxed"}," Begin sharing your culinary adventures. Add your first restaurant experience and create lasting food memories. ",-1)),C("button",{onClick:r[0]||(r[0]=s=>n.$emit("add-entry")),class:"inline-flex items-center px-6 py-3 font-medium rounded-xl hover:bg-sage-700 transition-colors shadow-sm"}," ✨ Add Your First Memory ")]))}},zv={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Kv={class:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Wv={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl"},Gv={class:"flex items-center justify-between"},Qv={class:"space-y-2"},Jv={key:0,class:"flex items-center justify-center"},Xv={key:1,class:"space-y-4"},Yv=["src"],Zv={key:2,class:"space-y-4"},tT={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},eT={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nT={class:"relative"},rT={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sT={class:"flex items-center space-x-2"},iT=["onClick"],oT={class:"ml-2 text-sm text-gray-700"},aT={class:"flex justify-end space-x-3 pt-4"},lT={__name:"EditEntryModal",props:{entry:Object},emits:["close","update-entry"],setup(e,{emit:t}){const n=e,r=t,{uploadImage:s}=Wd(),i=De({restaurant:"",dishName:"",cuisine:"",location:"",rating:5,price:"",notes:"",image:null,imageUrl:""});Vi(()=>n.entry,h=>{h&&(i.value={restaurant:h.restaurant||"",dishName:h.dishName||"",cuisine:h.cuisine||"",location:h.location||"",rating:h.rating||5,price:h.price||"",notes:h.notes||"",image:null,imageUrl:h.imageUrl||""})},{immediate:!0});const a=De(!1),l=De(null),u=async h=>{const p=h.target.files[0];if(!p)return;a.value=!0;const g=await s(p);g.success?(i.value.imageUrl=g.url,i.value.image=p):alert("Failed to upload image. Please try again."),a.value=!1},f=()=>{if(!i.value.restaurant||!i.value.dishName){alert("Please fill in restaurant and dish name");return}const h={...i.value,updatedAt:new Date().toISOString()};r("update-entry",h),r("close")};return(h,p)=>(Tt(),Pt("div",zv,[C("div",Kv,[C("div",Wv,[C("div",Gv,[p[10]||(p[10]=C("h2",{class:"text-2xl font-bold text-gray-900"},"Edit Food Memory",-1)),C("button",{onClick:p[0]||(p[0]=g=>r("close")),class:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-600 hover:text-gray-800"},p[9]||(p[9]=[C("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),C("form",{onSubmit:Td(f,["prevent"]),class:"p-6 space-y-6"},[C("div",Qv,[p[14]||(p[14]=C("label",{class:"block text-sm font-medium text-gray-700"},"Photo",-1)),C("div",{class:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-sage-400 transition-colors cursor-pointer bg-gray-50 hover:bg-gray-100",onClick:p[1]||(p[1]=g=>l.value?.click())},[a.value?(Tt(),Pt("div",Jv,p[11]||(p[11]=[C("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-sage-500"},null,-1),C("span",{class:"ml-2 text-gray-600"},"Uploading...",-1)]))):i.value.imageUrl?(Tt(),Pt("div",Xv,[C("img",{src:i.value.imageUrl,alt:"Uploaded food",class:"mx-auto max-h-48 rounded-lg"},null,8,Yv),p[12]||(p[12]=C("p",{class:"text-sm text-gray-600"},"Click to change photo",-1))])):(Tt(),Pt("div",Zv,p[13]||(p[13]=[C("svg",{class:"mx-auto h-12 w-12 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),C("div",null,[C("p",{class:"text-lg font-medium text-gray-900"},"Add a photo"),C("p",{class:"text-sm text-gray-600"}," Capture your delicious moment ")],-1)])))]),C("input",{ref_key:"imageInput",ref:l,type:"file",accept:"image/*",onChange:u,class:"hidden"},null,544)]),C("div",tT,[C("div",null,[p[15]||(p[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Restaurant *",-1)),Se(C("input",{"onUpdate:modelValue":p[2]||(p[2]=g=>i.value.restaurant=g),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"Where did you dine?"},null,512),[[Ce,i.value.restaurant]])]),C("div",null,[p[16]||(p[16]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dish Name *",-1)),Se(C("input",{"onUpdate:modelValue":p[3]||(p[3]=g=>i.value.dishName=g),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"What did you order?"},null,512),[[Ce,i.value.dishName]])])]),C("div",eT,[C("div",null,[p[17]||(p[17]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cuisine Type",-1)),Se(C("input",{"onUpdate:modelValue":p[4]||(p[4]=g=>i.value.cuisine=g),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"Italian, Japanese, etc."},null,512),[[Ce,i.value.cuisine]])]),C("div",null,[p[19]||(p[19]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),C("div",nT,[p[18]||(p[18]=C("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Se(C("input",{"onUpdate:modelValue":p[5]||(p[5]=g=>i.value.location=g),type:"text",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"City, neighborhood"},null,512),[[Ce,i.value.location]])])])]),C("div",rT,[C("div",null,[p[20]||(p[20]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rating",-1)),C("div",sT,[(Tt(),Pt(we,null,Nl(5,g=>C("span",{key:g,onClick:I=>i.value.rating=g,class:Hs(["cursor-pointer text-2xl transition-colors",g<=i.value.rating?"text-yellow-500":"text-gray-400"])}," ⭐ ",10,iT)),64)),C("span",oT,"("+ke(i.value.rating)+"/5)",1)])]),C("div",null,[p[21]||(p[21]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price",-1)),Se(C("input",{"onUpdate:modelValue":p[6]||(p[6]=g=>i.value.price=g),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all",placeholder:"$25, $$, etc."},null,512),[[Ce,i.value.price]])])]),C("div",null,[p[22]||(p[22]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),Se(C("textarea",{"onUpdate:modelValue":p[7]||(p[7]=g=>i.value.notes=g),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent transition-all resize-none",placeholder:"How was the taste? Atmosphere? Would you recommend it? Share your thoughts..."},null,512),[[Ce,i.value.notes]])]),C("div",aT,[C("button",{type:"button",onClick:p[8]||(p[8]=g=>r("close")),class:"px-6 py-3 border border-gray-300 text-gray-900 rounded-xl hover:bg-gray-50 transition-colors font-medium"}," Cancel "),p[23]||(p[23]=C("button",{type:"submit",class:"px-6 py-3 bg-sage-600 text-gray-900 rounded-xl hover:bg-sage-700 transition-colors font-medium shadow-sm"}," Save Changes ",-1))])],32)])]))}},uT=()=>{};var ih={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},cT=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Qd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|f>>6,I=f&63;u||(I=64,a||(g=64)),r.push(n[h],n[p],n[g],n[I])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):cT(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||p==null)throw new hT;const g=i<<2|l>>4;if(r.push(g),f!==64){const I=l<<4&240|f>>2;if(r.push(I),p!==64){const R=f<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fT=function(e){const t=Gd(e);return Qd.encodeByteArray(t,!0)},Yi=function(e){return fT(e).replace(/\./g,"")},dT=function(e){try{return Qd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=()=>pT().__FIREBASE_DEFAULTS__,gT=()=>{if(typeof process>"u"||typeof ih>"u")return;const e=ih.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},yT=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dT(e[1]);return t&&JSON.parse(t)},jl=()=>{try{return uT()||mT()||gT()||yT()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_T=e=>jl()?.emulatorHosts?.[e],ET=e=>{const t=_T(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jd=()=>jl()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Yi(JSON.stringify(n)),Yi(JSON.stringify(a)),""].join(".")}const As={};function bT(){const e={prod:[],emulator:[]};for(const t of Object.keys(As))As[t]?e.emulator.push(t):e.prod.push(t);return e}function AT(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let oh=!1;function IT(e,t){if(typeof window>"u"||typeof document>"u"||!$l(window.location.host)||As[e]===t||As[e]||oh)return;As[e]=t;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=bT().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,I){g.setAttribute("width","24"),g.setAttribute("id",I),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{oh=!0,a()},g}function h(g,I){g.setAttribute("id",I),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=AT(r),I=n("text"),R=document.getElementById(I)||document.createElement("span"),N=n("learnmore"),x=document.getElementById(N)||document.createElement("a"),$=n("preprendIcon"),L=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const q=g.element;l(q),h(x,N);const Q=f();u(L,$),q.append(L,R,x,Q),document.body.appendChild(q)}i?(R.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ST(){const e=jl()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CT(){return!ST()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PT(){try{return typeof indexedDB=="object"}catch{return!1}}function xT(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="FirebaseError";class $r extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=VT,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xd.prototype.create)}}class Xd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?DT(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new $r(s,l,r)}}function DT(e,t){return e.replace(NT,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const NT=/\{\$([^}]+)}/g;function Zi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(ah(i)&&ah(a)){if(!Zi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ah(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(e){return e&&e._delegate?e._delegate:e}class ks{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new vT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(MT(t))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zn){return this.instances.has(t)}getOptions(t=Zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kT(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Zn){return this.component?this.component.multipleInstances?t:Zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kT(e){return e===Zn?void 0:e}function MT(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new OT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(gt||(gt={}));const FT={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},UT=gt.INFO,BT={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},jT=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=BT[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Yd{constructor(t){this.name=t,this._logLevel=UT,this._logHandler=jT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in gt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?FT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...t),this._logHandler(this,gt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...t),this._logHandler(this,gt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...t),this._logHandler(this,gt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...t),this._logHandler(this,gt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...t),this._logHandler(this,gt.ERROR,...t)}}const $T=(e,t)=>t.some(n=>e instanceof n);let lh,uh;function qT(){return lh||(lh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HT(){return uh||(uh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zd=new WeakMap,Ga=new WeakMap,tp=new WeakMap,Ta=new WeakMap,ql=new WeakMap;function zT(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(In(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Zd.set(n,e)}).catch(()=>{}),ql.set(t,e),t}function KT(e){if(Ga.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Ga.set(e,t)}let Qa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ga.get(e);if(t==="objectStoreNames")return e.objectStoreNames||tp.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return In(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WT(e){Qa=e(Qa)}function GT(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(wa(this),t,...n);return tp.set(r,t.sort?t.sort():[t]),In(r)}:HT().includes(e)?function(...t){return e.apply(wa(this),t),In(Zd.get(this))}:function(...t){return In(e.apply(wa(this),t))}}function QT(e){return typeof e=="function"?GT(e):(e instanceof IDBTransaction&&KT(e),$T(e,qT())?new Proxy(e,Qa):e)}function In(e){if(e instanceof IDBRequest)return zT(e);if(Ta.has(e))return Ta.get(e);const t=QT(e);return t!==e&&(Ta.set(e,t),ql.set(t,e)),t}const wa=e=>ql.get(e);function JT(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=In(a);return r&&a.addEventListener("upgradeneeded",u=>{r(In(a.result),u.oldVersion,u.newVersion,In(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const XT=["get","getKey","getAll","getAllKeys","count"],YT=["put","add","delete","clear"],ba=new Map;function ch(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ba.get(t))return ba.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=YT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||XT.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return ba.set(t,i),i}WT(e=>({...e,get:(t,n,r)=>ch(t,n)||e.get(t,n,r),has:(t,n)=>!!ch(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tw(e){return e.getComponent()?.type==="VERSION"}const Ja="@firebase/app",hh="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new Yd("@firebase/app"),ew="@firebase/app-compat",nw="@firebase/analytics-compat",rw="@firebase/analytics",sw="@firebase/app-check-compat",iw="@firebase/app-check",ow="@firebase/auth",aw="@firebase/auth-compat",lw="@firebase/database",uw="@firebase/data-connect",cw="@firebase/database-compat",hw="@firebase/functions",fw="@firebase/functions-compat",dw="@firebase/installations",pw="@firebase/installations-compat",mw="@firebase/messaging",gw="@firebase/messaging-compat",yw="@firebase/performance",_w="@firebase/performance-compat",Ew="@firebase/remote-config",vw="@firebase/remote-config-compat",Tw="@firebase/storage",ww="@firebase/storage-compat",bw="@firebase/firestore",Aw="@firebase/ai",Iw="@firebase/firestore-compat",Rw="firebase",Sw="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]",Cw={[Ja]:"fire-core",[ew]:"fire-core-compat",[rw]:"fire-analytics",[nw]:"fire-analytics-compat",[iw]:"fire-app-check",[sw]:"fire-app-check-compat",[ow]:"fire-auth",[aw]:"fire-auth-compat",[lw]:"fire-rtdb",[uw]:"fire-data-connect",[cw]:"fire-rtdb-compat",[hw]:"fire-fn",[fw]:"fire-fn-compat",[dw]:"fire-iid",[pw]:"fire-iid-compat",[mw]:"fire-fcm",[gw]:"fire-fcm-compat",[yw]:"fire-perf",[_w]:"fire-perf-compat",[Ew]:"fire-rc",[vw]:"fire-rc-compat",[Tw]:"fire-gcs",[ww]:"fire-gcs-compat",[bw]:"fire-fst",[Iw]:"fire-fst-compat",[Aw]:"fire-vertex","fire-js":"fire-js",[Rw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Map,Pw=new Map,Ya=new Map;function fh(e,t){try{e.container.addComponent(t)}catch(n){fn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function eo(e){const t=e.name;if(Ya.has(t))return fn.debug(`There were multiple attempts to register component ${t}.`),!1;Ya.set(t,e);for(const n of to.values())fh(n,e);for(const n of Pw.values())fh(n,e);return!0}function xw(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vw(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rn=new Xd("app","Firebase",Dw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=Sw;function ep(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:Xa,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw Rn.create("bad-app-name",{appName:String(s)});if(n||(n=Jd()),!n)throw Rn.create("no-options");const i=to.get(s);if(i){if(Zi(n,i.options)&&Zi(r,i.config))return i;throw Rn.create("duplicate-app",{appName:s})}const a=new LT(s);for(const u of Ya.values())a.addComponent(u);const l=new Nw(n,r,a);return to.set(s,l),l}function kw(e=Xa){const t=to.get(e);if(!t&&e===Xa&&Jd())return ep();if(!t)throw Rn.create("no-app",{appName:e});return t}function Pr(e,t,n){let r=Cw[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fn.warn(a.join(" "));return}eo(new ks(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebase-heartbeat-database",Lw=1,Ms="firebase-heartbeat-store";let Aa=null;function np(){return Aa||(Aa=JT(Mw,Lw,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ms)}catch(n){console.warn(n)}}}}).catch(e=>{throw Rn.create("idb-open",{originalErrorMessage:e.message})})),Aa}async function Fw(e){try{const n=(await np()).transaction(Ms),r=await n.objectStore(Ms).get(rp(e));return await n.done,r}catch(t){if(t instanceof $r)fn.warn(t.message);else{const n=Rn.create("idb-get",{originalErrorMessage:t?.message});fn.warn(n.message)}}}async function dh(e,t){try{const r=(await np()).transaction(Ms,"readwrite");await r.objectStore(Ms).put(t,rp(e)),await r.done}catch(n){if(n instanceof $r)fn.warn(n.message);else{const r=Rn.create("idb-set",{originalErrorMessage:n?.message});fn.warn(r.message)}}}function rp(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=1024,Bw=30;class jw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ph();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Bw){const s=Hw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){fn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ph(),{heartbeatsToSend:n,unsentEntries:r}=$w(this._heartbeatsCache.heartbeats),s=Yi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return fn.warn(t),""}}}function ph(){return new Date().toISOString().substring(0,10)}function $w(e,t=Uw){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),mh(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PT()?xT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return dh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return dh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function mh(e){return Yi(JSON.stringify({version:2,heartbeats:e})).length}function Hw(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(e){eo(new ks("platform-logger",t=>new ZT(t),"PRIVATE")),eo(new ks("heartbeat",t=>new jw(t),"PRIVATE")),Pr(Ja,hh,e),Pr(Ja,hh,"esm2020"),Pr("fire-js","")}zw("");var Kw="firebase",Ww="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(Kw,Ww,"app");var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sn,sp;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,y){function v(){}v.prototype=y.prototype,w.D=y.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(b,A,P){for(var E=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)E[Ee-2]=arguments[Ee];return y.prototype[A].apply(b,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,v){v||(v=0);var b=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)b[A]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(A=0;16>A;++A)b[A]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=w.g[0],v=w.g[1],A=w.g[2];var P=w.g[3],E=y+(P^v&(A^P))+b[0]+3614090360&4294967295;y=v+(E<<7&4294967295|E>>>25),E=P+(A^y&(v^A))+b[1]+3905402710&4294967295,P=y+(E<<12&4294967295|E>>>20),E=A+(v^P&(y^v))+b[2]+606105819&4294967295,A=P+(E<<17&4294967295|E>>>15),E=v+(y^A&(P^y))+b[3]+3250441966&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(P^v&(A^P))+b[4]+4118548399&4294967295,y=v+(E<<7&4294967295|E>>>25),E=P+(A^y&(v^A))+b[5]+1200080426&4294967295,P=y+(E<<12&4294967295|E>>>20),E=A+(v^P&(y^v))+b[6]+2821735955&4294967295,A=P+(E<<17&4294967295|E>>>15),E=v+(y^A&(P^y))+b[7]+4249261313&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(P^v&(A^P))+b[8]+1770035416&4294967295,y=v+(E<<7&4294967295|E>>>25),E=P+(A^y&(v^A))+b[9]+2336552879&4294967295,P=y+(E<<12&4294967295|E>>>20),E=A+(v^P&(y^v))+b[10]+4294925233&4294967295,A=P+(E<<17&4294967295|E>>>15),E=v+(y^A&(P^y))+b[11]+2304563134&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(P^v&(A^P))+b[12]+1804603682&4294967295,y=v+(E<<7&4294967295|E>>>25),E=P+(A^y&(v^A))+b[13]+4254626195&4294967295,P=y+(E<<12&4294967295|E>>>20),E=A+(v^P&(y^v))+b[14]+2792965006&4294967295,A=P+(E<<17&4294967295|E>>>15),E=v+(y^A&(P^y))+b[15]+1236535329&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(A^P&(v^A))+b[1]+4129170786&4294967295,y=v+(E<<5&4294967295|E>>>27),E=P+(v^A&(y^v))+b[6]+3225465664&4294967295,P=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(P^y))+b[11]+643717713&4294967295,A=P+(E<<14&4294967295|E>>>18),E=v+(P^y&(A^P))+b[0]+3921069994&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(A^P&(v^A))+b[5]+3593408605&4294967295,y=v+(E<<5&4294967295|E>>>27),E=P+(v^A&(y^v))+b[10]+38016083&4294967295,P=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(P^y))+b[15]+3634488961&4294967295,A=P+(E<<14&4294967295|E>>>18),E=v+(P^y&(A^P))+b[4]+3889429448&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(A^P&(v^A))+b[9]+568446438&4294967295,y=v+(E<<5&4294967295|E>>>27),E=P+(v^A&(y^v))+b[14]+3275163606&4294967295,P=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(P^y))+b[3]+4107603335&4294967295,A=P+(E<<14&4294967295|E>>>18),E=v+(P^y&(A^P))+b[8]+1163531501&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(A^P&(v^A))+b[13]+2850285829&4294967295,y=v+(E<<5&4294967295|E>>>27),E=P+(v^A&(y^v))+b[2]+4243563512&4294967295,P=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(P^y))+b[7]+1735328473&4294967295,A=P+(E<<14&4294967295|E>>>18),E=v+(P^y&(A^P))+b[12]+2368359562&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(v^A^P)+b[5]+4294588738&4294967295,y=v+(E<<4&4294967295|E>>>28),E=P+(y^v^A)+b[8]+2272392833&4294967295,P=y+(E<<11&4294967295|E>>>21),E=A+(P^y^v)+b[11]+1839030562&4294967295,A=P+(E<<16&4294967295|E>>>16),E=v+(A^P^y)+b[14]+4259657740&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(v^A^P)+b[1]+2763975236&4294967295,y=v+(E<<4&4294967295|E>>>28),E=P+(y^v^A)+b[4]+1272893353&4294967295,P=y+(E<<11&4294967295|E>>>21),E=A+(P^y^v)+b[7]+4139469664&4294967295,A=P+(E<<16&4294967295|E>>>16),E=v+(A^P^y)+b[10]+3200236656&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(v^A^P)+b[13]+681279174&4294967295,y=v+(E<<4&4294967295|E>>>28),E=P+(y^v^A)+b[0]+3936430074&4294967295,P=y+(E<<11&4294967295|E>>>21),E=A+(P^y^v)+b[3]+3572445317&4294967295,A=P+(E<<16&4294967295|E>>>16),E=v+(A^P^y)+b[6]+76029189&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(v^A^P)+b[9]+3654602809&4294967295,y=v+(E<<4&4294967295|E>>>28),E=P+(y^v^A)+b[12]+3873151461&4294967295,P=y+(E<<11&4294967295|E>>>21),E=A+(P^y^v)+b[15]+530742520&4294967295,A=P+(E<<16&4294967295|E>>>16),E=v+(A^P^y)+b[2]+3299628645&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(A^(v|~P))+b[0]+4096336452&4294967295,y=v+(E<<6&4294967295|E>>>26),E=P+(v^(y|~A))+b[7]+1126891415&4294967295,P=y+(E<<10&4294967295|E>>>22),E=A+(y^(P|~v))+b[14]+2878612391&4294967295,A=P+(E<<15&4294967295|E>>>17),E=v+(P^(A|~y))+b[5]+4237533241&4294967295,v=A+(E<<21&4294967295|E>>>11),E=y+(A^(v|~P))+b[12]+1700485571&4294967295,y=v+(E<<6&4294967295|E>>>26),E=P+(v^(y|~A))+b[3]+2399980690&4294967295,P=y+(E<<10&4294967295|E>>>22),E=A+(y^(P|~v))+b[10]+4293915773&4294967295,A=P+(E<<15&4294967295|E>>>17),E=v+(P^(A|~y))+b[1]+2240044497&4294967295,v=A+(E<<21&4294967295|E>>>11),E=y+(A^(v|~P))+b[8]+1873313359&4294967295,y=v+(E<<6&4294967295|E>>>26),E=P+(v^(y|~A))+b[15]+4264355552&4294967295,P=y+(E<<10&4294967295|E>>>22),E=A+(y^(P|~v))+b[6]+2734768916&4294967295,A=P+(E<<15&4294967295|E>>>17),E=v+(P^(A|~y))+b[13]+1309151649&4294967295,v=A+(E<<21&4294967295|E>>>11),E=y+(A^(v|~P))+b[4]+4149444226&4294967295,y=v+(E<<6&4294967295|E>>>26),E=P+(v^(y|~A))+b[11]+3174756917&4294967295,P=y+(E<<10&4294967295|E>>>22),E=A+(y^(P|~v))+b[2]+718787259&4294967295,A=P+(E<<15&4294967295|E>>>17),E=v+(P^(A|~y))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var v=y-this.blockSize,b=this.B,A=this.h,P=0;P<y;){if(A==0)for(;P<=v;)s(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(b[A++]=w.charCodeAt(P++),A==this.blockSize){s(this,b),A=0;break}}else for(;P<y;)if(b[A++]=w[P++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var v=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=v&255,v/=256;for(this.u(w),w=Array(16),y=v=0;4>y;++y)for(var b=0;32>b;b+=8)w[v++]=this.g[y]>>>b&255;return w};function i(w,y){var v=l;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=y(w)}function a(w,y){this.h=y;for(var v=[],b=!0,A=w.length-1;0<=A;A--){var P=w[A]|0;b&&P==y||(v[A]=P,b=!1)}this.g=v}var l={};function u(w){return-128<=w&&128>w?i(w,function(y){return new a([y|0],0>y?-1:0)}):new a([w|0],0>w?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return x(f(-w));for(var y=[],v=1,b=0;w>=v;b++)y[b]=w/v|0,v*=4294967296;return new a(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return x(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=f(Math.pow(y,8)),b=p,A=0;A<w.length;A+=8){var P=Math.min(8,w.length-A),E=parseInt(w.substring(A,A+P),y);8>P?(P=f(Math.pow(y,P)),b=b.j(P).add(f(E))):(b=b.j(v),b=b.add(f(E)))}return b}var p=u(0),g=u(1),I=u(16777216);e=a.prototype,e.m=function(){if(N(this))return-x(this).m();for(var w=0,y=1,v=0;v<this.g.length;v++){var b=this.i(v);w+=(0<=b?b:4294967296+b)*y,y*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(N(this))return"-"+x(this).toString(w);for(var y=f(Math.pow(w,6)),v=this,b="";;){var A=Q(v,y).g;v=$(v,A.j(y));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=A,R(v))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function N(w){return w.h==-1}e.l=function(w){return w=$(this,w),N(w)?-1:R(w)?0:1};function x(w){for(var y=w.g.length,v=[],b=0;b<y;b++)v[b]=~w.g[b];return new a(v,~w.h).add(g)}e.abs=function(){return N(this)?x(this):this},e.add=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0,A=0;A<=y;A++){var P=b+(this.i(A)&65535)+(w.i(A)&65535),E=(P>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);b=E>>>16,P&=65535,E&=65535,v[A]=E<<16|P}return new a(v,v[v.length-1]&-2147483648?-1:0)};function $(w,y){return w.add(x(y))}e.j=function(w){if(R(this)||R(w))return p;if(N(this))return N(w)?x(this).j(x(w)):x(x(this).j(w));if(N(w))return x(this.j(x(w)));if(0>this.l(I)&&0>w.l(I))return f(this.m()*w.m());for(var y=this.g.length+w.g.length,v=[],b=0;b<2*y;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var A=0;A<w.g.length;A++){var P=this.i(b)>>>16,E=this.i(b)&65535,Ee=w.i(A)>>>16,gn=w.i(A)&65535;v[2*b+2*A]+=E*gn,L(v,2*b+2*A),v[2*b+2*A+1]+=P*gn,L(v,2*b+2*A+1),v[2*b+2*A+1]+=E*Ee,L(v,2*b+2*A+1),v[2*b+2*A+2]+=P*Ee,L(v,2*b+2*A+2)}for(b=0;b<y;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=y;b<2*y;b++)v[b]=0;return new a(v,0)};function L(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function q(w,y){this.g=w,this.h=y}function Q(w,y){if(R(y))throw Error("division by zero");if(R(w))return new q(p,p);if(N(w))return y=Q(x(w),y),new q(x(y.g),x(y.h));if(N(y))return y=Q(w,x(y)),new q(x(y.g),y.h);if(30<w.g.length){if(N(w)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,b=y;0>=b.l(w);)v=st(v),b=st(b);var A=dt(v,1),P=dt(b,1);for(b=dt(b,2),v=dt(v,2);!R(b);){var E=P.add(b);0>=E.l(w)&&(A=A.add(v),P=E),b=dt(b,1),v=dt(v,1)}return y=$(w,A.j(y)),new q(A,y)}for(A=p;0<=w.l(y);){for(v=Math.max(1,Math.floor(w.m()/y.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=f(v),E=P.j(y);N(E)||0<E.l(w);)v-=b,P=f(v),E=P.j(y);R(P)&&(P=g),A=A.add(P),w=$(w,E)}return new q(A,w)}e.A=function(w){return Q(this,w).h},e.and=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)&w.i(b);return new a(v,this.h&w.h)},e.or=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)|w.i(b);return new a(v,this.h|w.h)},e.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)^w.i(b);return new a(v,this.h^w.h)};function st(w){for(var y=w.g.length+1,v=[],b=0;b<y;b++)v[b]=w.i(b)<<1|w.i(b-1)>>>31;return new a(v,w.h)}function dt(w,y){var v=y>>5;y%=32;for(var b=w.g.length-v,A=[],P=0;P<b;P++)A[P]=0<y?w.i(P+v)>>>y|w.i(P+v+1)<<32-y:w.i(P+v);return new a(A,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sp=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=h,Sn=a}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});var wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ip,ps,op,Fi,Za,ap,lp,up;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof wi=="object"&&wi];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var S=o[m];if(!(S in d))break t;d=d[S]}o=o[o.length-1],m=d[o],c=c(m),c!=m&&c!=null&&t(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,m=!1,S={next:function(){if(!m&&d<o.length){var D=d++;return{value:c(D,o[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function h(o,c,d){return o.call.apply(o.bind,arguments)}function p(o,c,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,m),o.apply(c,S)}}return function(){return o.apply(c,arguments)}}function g(o,c,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function I(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function R(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,S,D){for(var K=Array(arguments.length-2),At=2;At<arguments.length;At++)K[At-2]=arguments[At];return c.prototype[S].apply(m,K)}}function N(o){const c=o.length;if(0<c){const d=Array(c);for(let m=0;m<c;m++)d[m]=o[m];return d}return[]}function x(o,c){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(u(m)){const S=o.length||0,D=m.length||0;o.length=S+D;for(let K=0;K<D;K++)o[S+K]=m[K]}else o.push(m)}}class ${constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function L(o){return/^[\s\xa0]*$/.test(o)}function q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function Q(o){return Q[" "](o),o}Q[" "]=function(){};var st=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function dt(o,c,d){for(const m in o)c.call(d,o[m],m,o)}function w(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function y(o){const c={};for(const d in o)c[d]=o[d];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(o,c){let d,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(d in m)o[d]=m[d];for(let D=0;D<v.length;D++)d=v[D],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function A(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function P(o){l.setTimeout(()=>{throw o},0)}function E(){var o=Ne;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ee{constructor(){this.h=this.g=null}add(c,d){const m=gn.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var gn=new $(()=>new zt,o=>o.reset());class zt{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,yt=!1,Ne=new Ee,$n=()=>{const o=l.Promise.resolve(void 0);bt=()=>{o.then(tn)}};var tn=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(d){P(d)}var c=gn;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}yt=!1};function Bt(){this.s=this.s,this.C=this.C}Bt.prototype.s=!1,Bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function jt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var Ko=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function qn(o,c){if(jt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(st){t:{try{Q(c.nodeName);var S=!0;break t}catch{}S=!1}S||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Hn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&qn.aa.h.call(this)}}R(qn,jt);var Hn={2:"touch",3:"pen",4:"mouse"};qn.prototype.h=function(){qn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),Gr=0;function ni(o,c,d,m,S){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=S,this.key=++Gr,this.da=this.fa=!1}function je(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Qr(o){this.src=o,this.g={},this.h=0}Qr.prototype.add=function(o,c,d,m,S){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var K=T(o,c,m,S);return-1<K?(c=o[K],d||(c.fa=!1)):(c=new ni(c,this.src,D,!!m,S),c.fa=d,o.push(c)),c};function _(o,c){var d=c.type;if(d in o.g){var m=o.g[d],S=Array.prototype.indexOf.call(m,c,void 0),D;(D=0<=S)&&Array.prototype.splice.call(m,S,1),D&&(je(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function T(o,c,d,m){for(var S=0;S<o.length;++S){var D=o[S];if(!D.da&&D.listener==c&&D.capture==!!d&&D.ha==m)return S}return-1}var O="closure_lm_"+(1e6*Math.random()|0),B={};function F(o,c,d,m,S){if(Array.isArray(c)){for(var D=0;D<c.length;D++)F(o,c[D],d,m,S);return null}return d=rt(d),o&&o[en]?o.K(c,d,f(m)?!!m.capture:!1,S):U(o,c,d,!1,m,S)}function U(o,c,d,m,S,D){if(!c)throw Error("Invalid event type");var K=f(S)?!!S.capture:!!S,At=W(o);if(At||(o[O]=At=new Qr(o)),d=At.add(c,d,m,K,D),d.proxy)return d;if(m=G(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)Ko||(S=K),S===void 0&&(S=!1),o.addEventListener(c.toString(),m,S);else if(o.attachEvent)o.attachEvent(j(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function G(){function o(d){return c.call(o.src,o.listener,d)}const c=Z;return o}function z(o,c,d,m,S){if(Array.isArray(c))for(var D=0;D<c.length;D++)z(o,c[D],d,m,S);else m=f(m)?!!m.capture:!!m,d=rt(d),o&&o[en]?(o=o.i,c=String(c).toString(),c in o.g&&(D=o.g[c],d=T(D,d,m,S),-1<d&&(je(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[c],o.h--)))):o&&(o=W(o))&&(c=o.g[c.toString()],o=-1,c&&(o=T(c,d,m,S)),(d=-1<o?c[o]:null)&&H(d))}function H(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[en])_(c.i,o);else{var d=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(d,m,o.capture):c.detachEvent?c.detachEvent(j(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=W(c))?(_(d,o),d.h==0&&(d.src=null,c[O]=null)):je(o)}}}function j(o){return o in B?B[o]:B[o]="on"+o}function Z(o,c){if(o.da)o=!0;else{c=new qn(c,this);var d=o.listener,m=o.ha||o.src;o.fa&&H(o),o=d.call(m,c)}return o}function W(o){return o=o[O],o instanceof Qr?o:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(o){return typeof o=="function"?o:(o[Y]||(o[Y]=function(c){return o.handleEvent(c)}),o[Y])}function et(){Bt.call(this),this.i=new Qr(this),this.M=this,this.F=null}R(et,Bt),et.prototype[en]=!0,et.prototype.removeEventListener=function(o,c,d,m){z(this,o,c,d,m)};function lt(o,c){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new jt(c,o);else if(c instanceof jt)c.target=c.target||o;else{var S=c;c=new jt(m,o),b(c,S)}if(S=!0,d)for(var D=d.length-1;0<=D;D--){var K=c.g=d[D];S=pt(K,m,!0,c)&&S}if(K=c.g=o,S=pt(K,m,!0,c)&&S,S=pt(K,m,!1,c)&&S,d)for(D=0;D<d.length;D++)K=c.g=d[D],S=pt(K,m,!1,c)&&S}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],m=0;m<d.length;m++)je(d[m]);delete o.g[c],o.h--}}this.F=null},et.prototype.K=function(o,c,d,m){return this.i.add(String(o),c,!1,d,m)},et.prototype.L=function(o,c,d,m){return this.i.add(String(o),c,!0,d,m)};function pt(o,c,d,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var S=!0,D=0;D<c.length;++D){var K=c[D];if(K&&!K.da&&K.capture==d){var At=K.listener,Qt=K.ha||K.src;K.fa&&_(o.i,K),S=At.call(Qt,m)!==!1&&S}}return S&&!m.defaultPrevented}function Kt(o,c,d){if(typeof o=="function")d&&(o=g(o,d));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Wt(o){o.g=Kt(()=>{o.g=null,o.i&&(o.i=!1,Wt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ie extends Bt{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ee(o){Bt.call(this),this.h=o,this.g={}}R(ee,Bt);var yn=[];function Jr(o){dt(o.g,function(c,d){this.g.hasOwnProperty(d)&&H(c)},o),o.g={}}ee.prototype.N=function(){ee.aa.N.call(this),Jr(this)},ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=l.JSON.stringify,Re=l.JSON.parse,ri=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Wo(){}Wo.prototype.h=null;function Ru(o){return o.h||(o.h=o.i())}function Su(){}var Xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Go(){jt.call(this,"d")}R(Go,jt);function Qo(){jt.call(this,"c")}R(Qo,jt);var zn={},Cu=null;function si(){return Cu=Cu||new et}zn.La="serverreachability";function Pu(o){jt.call(this,zn.La,o)}R(Pu,jt);function Yr(o){const c=si();lt(c,new Pu(c))}zn.STAT_EVENT="statevent";function xu(o,c){jt.call(this,zn.STAT_EVENT,o),this.stat=c}R(xu,jt);function ue(o){const c=si();lt(c,new xu(c,o))}zn.Ma="timingevent";function Vu(o,c){jt.call(this,zn.Ma,o),this.size=c}R(Vu,jt);function Zr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function ts(){this.g=!0}ts.prototype.xa=function(){this.g=!1};function Dm(o,c,d,m,S,D){o.info(function(){if(o.g)if(D)for(var K="",At=D.split("&"),Qt=0;Qt<At.length;Qt++){var _t=At[Qt].split("=");if(1<_t.length){var ne=_t[0];_t=_t[1];var re=ne.split("_");K=2<=re.length&&re[1]=="type"?K+(ne+"="+_t+"&"):K+(ne+"=redacted&")}}else K=null;else K=D;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+c+`
`+d+`
`+K})}function Nm(o,c,d,m,S,D,K){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+c+`
`+d+`
`+D+" "+K})}function dr(o,c,d,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+km(o,d)+(m?" "+m:"")})}function Om(o,c){o.info(function(){return"TIMEOUT: "+c})}ts.prototype.info=function(){};function km(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var S=m[1];if(Array.isArray(S)&&!(1>S.length)){var D=S[0];if(D!="noop"&&D!="stop"&&D!="close")for(var K=1;K<S.length;K++)S[K]=""}}}}return Gt(d)}catch{return c}}var ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Du={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jo;function oi(){}R(oi,Wo),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},Jo=new oi;function _n(o,c,d,m){this.j=o,this.i=c,this.l=d,this.R=m||1,this.U=new ee(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nu}function Nu(){this.i=null,this.g="",this.h=!1}var Ou={},Xo={};function Yo(o,c,d){o.L=1,o.v=ci(nn(c)),o.m=d,o.P=!0,ku(o,null)}function ku(o,c){o.F=Date.now(),ai(o),o.A=nn(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Qu(d.i,"t",m),o.C=0,d=o.j.J,o.h=new Nu,o.g=dc(o.j,d?c:null,!o.m),0<o.O&&(o.M=new Ie(g(o.Y,o,o.g),o.O)),c=o.U,d=o.g,m=o.ca;var S="readystatechange";Array.isArray(S)||(S&&(yn[0]=S.toString()),S=yn);for(var D=0;D<S.length;D++){var K=F(d,S[D],m||c.handleEvent,!1,c.h||c);if(!K)break;c.g[K.key]=K}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Yr(),Dm(o.i,o.u,o.A,o.l,o.R,o.m)}_n.prototype.ca=function(o){o=o.target;const c=this.M;c&&rn(o)==3?c.j():this.Y(o)},_n.prototype.Y=function(o){try{if(o==this.g)t:{const re=rn(this.g);var c=this.g.Ba();const gr=this.g.Z();if(!(3>re)&&(re!=3||this.g&&(this.h.h||this.g.oa()||nc(this.g)))){this.J||re!=4||c==7||(c==8||0>=gr?Yr(3):Yr(2)),Zo(this);var d=this.g.Z();this.X=d;e:if(Mu(this)){var m=nc(this.g);o="";var S=m.length,D=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kn(this),es(this);var K="";break e}this.h.i=new l.TextDecoder}for(c=0;c<S;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(D&&c==S-1)});m.length=0,this.h.g+=o,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=d==200,Nm(this.i,this.u,this.A,this.l,this.R,re,d),this.o){if(this.T&&!this.K){e:{if(this.g){var At,Qt=this.g;if((At=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(At)){var _t=At;break e}}_t=null}if(d=_t)dr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,d);else{this.o=!1,this.s=3,ue(12),Kn(this),es(this);break t}}if(this.P){d=!0;let Oe;for(;!this.J&&this.C<K.length;)if(Oe=Mm(this,K),Oe==Xo){re==4&&(this.s=4,ue(14),d=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Ou){this.s=4,ue(15),dr(this.i,this.l,K,"[Invalid Chunk]"),d=!1;break}else dr(this.i,this.l,Oe,null),ta(this,Oe);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||K.length!=0||this.h.h||(this.s=1,ue(16),d=!1),this.o=this.o&&d,!d)dr(this.i,this.l,K,"[Invalid Chunked Response]"),Kn(this),es(this);else if(0<K.length&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.ba&&!ne.M&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),oa(ne),ne.M=!0,ue(11))}}else dr(this.i,this.l,K,null),ta(this,K);re==4&&Kn(this),this.o&&!this.J&&(re==4?uc(this.j,this):(this.o=!1,ai(this)))}else Zm(this.g),d==400&&0<K.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),Kn(this),es(this)}}}catch{}finally{}};function Mu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Mm(o,c){var d=o.C,m=c.indexOf(`
`,d);return m==-1?Xo:(d=Number(c.substring(d,m)),isNaN(d)?Ou:(m+=1,m+d>c.length?Xo:(c=c.slice(m,m+d),o.C=m+d,c)))}_n.prototype.cancel=function(){this.J=!0,Kn(this)};function ai(o){o.S=Date.now()+o.I,Lu(o,o.I)}function Lu(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Zr(g(o.ba,o),c)}function Zo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}_n.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Om(this.i,this.A),this.L!=2&&(Yr(),ue(17)),Kn(this),this.s=2,es(this)):Lu(this,this.S-o)};function es(o){o.j.G==0||o.J||uc(o.j,o)}function Kn(o){Zo(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Jr(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function ta(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||ea(d.h,o))){if(!o.K&&ea(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)gi(d),pi(d);else break t;ia(d),ue(18)}}else d.za=S[1],0<d.za-d.T&&37500>S[2]&&d.F&&d.v==0&&!d.C&&(d.C=Zr(g(d.Za,d),6e3));if(1>=Bu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Gn(d,11)}else if((o.K||d.g==o)&&gi(d),!L(c))for(S=d.Da.g.parse(c),c=0;c<S.length;c++){let _t=S[c];if(d.T=_t[0],_t=_t[1],d.G==2)if(_t[0]=="c"){d.K=_t[1],d.ia=_t[2];const ne=_t[3];ne!=null&&(d.la=ne,d.j.info("VER="+d.la));const re=_t[4];re!=null&&(d.Aa=re,d.j.info("SVER="+d.Aa));const gr=_t[5];gr!=null&&typeof gr=="number"&&0<gr&&(m=1.5*gr,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Oe=o.g;if(Oe){const _i=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var D=m.h;D.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(na(D,D.h),D.h=null))}if(m.D){const aa=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;aa&&(m.ya=aa,Ct(m.I,m.D,aa))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var K=o;if(m.qa=fc(m,m.J?m.ia:null,m.W),K.K){ju(m.h,K);var At=K,Qt=m.L;Qt&&(At.I=Qt),At.B&&(Zo(At),ai(At)),m.g=K}else ac(m);0<d.i.length&&mi(d)}else _t[0]!="stop"&&_t[0]!="close"||Gn(d,7);else d.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Gn(d,7):sa(d):_t[0]!="noop"&&d.l&&d.l.ta(_t),d.v=0)}}Yr(4)}catch{}}var Lm=class{constructor(o,c){this.g=o,this.map=c}};function Fu(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Bu(o){return o.h?1:o.g?o.g.size:0}function ea(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function na(o,c){o.g?o.g.add(c):o.h=c}function ju(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Fu.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function $u(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return N(o.i)}function Fm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,m=0;m<d;m++)c.push(o[m]);return c}c=[],d=0;for(m in o)c[d++]=o[m];return c}function Um(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const m in o)c[d++]=m;return c}}}function qu(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=Um(o),m=Fm(o),S=m.length,D=0;D<S;D++)c.call(void 0,m[D],d&&d[D],o)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bm(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),S=null;if(0<=m){var D=o[d].substring(0,m);S=o[d].substring(m+1)}else D=o[d];c(D,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Wn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Wn){this.h=o.h,li(this,o.j),this.o=o.o,this.g=o.g,ui(this,o.s),this.l=o.l;var c=o.i,d=new ss;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),zu(this,d),this.m=o.m}else o&&(c=String(o).match(Hu))?(this.h=!1,li(this,c[1]||"",!0),this.o=ns(c[2]||""),this.g=ns(c[3]||"",!0),ui(this,c[4]),this.l=ns(c[5]||"",!0),zu(this,c[6]||"",!0),this.m=ns(c[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}Wn.prototype.toString=function(){var o=[],c=this.j;c&&o.push(rs(c,Ku,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(rs(c,Ku,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(rs(d,d.charAt(0)=="/"?qm:$m,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",rs(d,zm)),o.join("")};function nn(o){return new Wn(o)}function li(o,c,d){o.j=d?ns(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function ui(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function zu(o,c,d){c instanceof ss?(o.i=c,Km(o.i,o.h)):(d||(c=rs(c,Hm)),o.i=new ss(c,o.h))}function Ct(o,c,d){o.i.set(c,d)}function ci(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ns(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function rs(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,jm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function jm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ku=/[#\/\?@]/g,$m=/[#\?:]/g,qm=/[#\?]/g,Hm=/[#\?@]/g,zm=/#/g;function ss(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function En(o){o.g||(o.g=new Map,o.h=0,o.i&&Bm(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}e=ss.prototype,e.add=function(o,c){En(this),this.i=null,o=pr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Wu(o,c){En(o),c=pr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Gu(o,c){return En(o),c=pr(o,c),o.g.has(c)}e.forEach=function(o,c){En(this),this.g.forEach(function(d,m){d.forEach(function(S){o.call(c,S,m,this)},this)},this)},e.na=function(){En(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){const S=o[m];for(let D=0;D<S.length;D++)d.push(c[m])}return d},e.V=function(o){En(this);let c=[];if(typeof o=="string")Gu(this,o)&&(c=c.concat(this.g.get(pr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},e.set=function(o,c){return En(this),this.i=null,o=pr(this,o),Gu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Qu(o,c,d){Wu(o,c),0<d.length&&(o.i=null,o.g.set(pr(o,c),N(d)),o.h+=d.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];const D=encodeURIComponent(String(m)),K=this.V(m);for(m=0;m<K.length;m++){var S=D;K[m]!==""&&(S+="="+encodeURIComponent(String(K[m]))),o.push(S)}}return this.i=o.join("&")};function pr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Km(o,c){c&&!o.j&&(En(o),o.i=null,o.g.forEach(function(d,m){var S=m.toLowerCase();m!=S&&(Wu(this,m),Qu(this,S,d))},o)),o.j=c}function Wm(o,c){const d=new ts;if(l.Image){const m=new Image;m.onload=I(vn,d,"TestLoadImage: loaded",!0,c,m),m.onerror=I(vn,d,"TestLoadImage: error",!1,c,m),m.onabort=I(vn,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=I(vn,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function Gm(o,c){const d=new ts,m=new AbortController,S=setTimeout(()=>{m.abort(),vn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(D=>{clearTimeout(S),D.ok?vn(d,"TestPingServer: ok",!0,c):vn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(S),vn(d,"TestPingServer: error",!1,c)})}function vn(o,c,d,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(d)}catch{}}function Qm(){this.g=new ri}function Jm(o,c,d){const m=d||"";try{qu(o,function(S,D){let K=S;f(S)&&(K=Gt(S)),c.push(m+D+"="+encodeURIComponent(K))})}catch(S){throw c.push(m+"type="+encodeURIComponent("_badmap")),S}}function hi(o){this.l=o.Ub||null,this.j=o.eb||!1}R(hi,Wo),hi.prototype.g=function(){return new fi(this.l,this.j)},hi.prototype.i=function(o){return function(){return o}}({});function fi(o,c){et.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(fi,et),e=fi.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,os(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ju(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ju(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?is(this):os(this),this.readyState==3&&Ju(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,is(this))},e.Qa=function(o){this.g&&(this.response=o,is(this))},e.ga=function(){this.g&&is(this)};function is(o){o.readyState=4,o.l=null,o.j=null,o.v=null,os(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function os(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Xu(o){let c="";return dt(o,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function ra(o,c,d){t:{for(m in d){var m=!1;break t}m=!0}m||(d=Xu(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Ct(o,c,d))}function Nt(o){et.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Nt,et);var Xm=/^https?$/i,Ym=["POST","PUT"];e=Nt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jo.g(),this.v=this.o?Ru(this.o):Ru(Jo),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(D){Yu(this,D);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)d.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())d.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),S=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ym,c,void 0))||m||S||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,K]of d)this.g.setRequestHeader(D,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ec(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){Yu(this,D)}};function Yu(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Zu(o),di(o)}function Zu(o){o.A||(o.A=!0,lt(o,"complete"),lt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,lt(this,"complete"),lt(this,"abort"),di(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),Nt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?tc(this):this.bb())},e.bb=function(){tc(this)};function tc(o){if(o.h&&typeof a<"u"&&(!o.v[1]||rn(o)!=4||o.Z()!=2)){if(o.u&&rn(o)==4)Kt(o.Ea,0,o);else if(lt(o,"readystatechange"),rn(o)==4){o.h=!1;try{const K=o.Z();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var d;if(!(d=c)){var m;if(m=K===0){var S=String(o.D).match(Hu)[1]||null;!S&&l.self&&l.self.location&&(S=l.self.location.protocol.slice(0,-1)),m=!Xm.test(S?S.toLowerCase():"")}d=m}if(d)lt(o,"complete"),lt(o,"success");else{o.m=6;try{var D=2<rn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",Zu(o)}}finally{di(o)}}}}function di(o,c){if(o.g){ec(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||lt(o,"ready");try{d.onreadystatechange=m}catch{}}}function ec(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function rn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Re(c)}};function nc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Zm(o){const c={};o=(o.g&&2<=rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(L(o[m]))continue;var d=A(o[m]);const S=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=c[S]||[];c[S]=D,D.push(d)}w(c,function(m){return m.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function rc(o){this.Aa=0,this.i=[],this.j=new ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,o),this.cb=as("retryDelaySeedMs",1e4,o),this.Wa=as("forwardChannelMaxRetries",2,o),this.wa=as("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Fu(o&&o.concurrentRequestLimit),this.Da=new Qm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=rc.prototype,e.la=8,e.G=1,e.connect=function(o,c,d,m){ue(0),this.W=o,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=fc(this,null,this.W),mi(this)};function sa(o){if(sc(o),o.G==3){var c=o.U++,d=nn(o.I);if(Ct(d,"SID",o.K),Ct(d,"RID",c),Ct(d,"TYPE","terminate"),ls(o,d),c=new _n(o,o.j,c),c.L=2,c.v=ci(nn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=dc(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ai(c)}hc(o)}function pi(o){o.g&&(oa(o),o.g.cancel(),o.g=null)}function sc(o){pi(o),o.u&&(l.clearTimeout(o.u),o.u=null),gi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function mi(o){if(!Uu(o.h)&&!o.s){o.s=!0;var c=o.Ga;bt||$n(),yt||(bt(),yt=!0),Ne.add(c,o),o.B=0}}function tg(o,c){return Bu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Zr(g(o.Ga,o,c),cc(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const S=new _n(this,this.j,o);let D=this.o;if(this.S&&(D?(D=y(D),b(D,this.S)):D=this.S),this.m!==null||this.O||(S.H=D,D=null),this.P)t:{for(var c=0,d=0;d<this.i.length;d++){e:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break t}if(c===4096||d===this.i.length-1){c=d+1;break t}}c=1e3}else c=1e3;c=oc(this,S,c),d=nn(this.I),Ct(d,"RID",o),Ct(d,"CVER",22),this.D&&Ct(d,"X-HTTP-Session-Id",this.D),ls(this,d),D&&(this.O?c="headers="+encodeURIComponent(String(Xu(D)))+"&"+c:this.m&&ra(d,this.m,D)),na(this.h,S),this.Ua&&Ct(d,"TYPE","init"),this.P?(Ct(d,"$req",c),Ct(d,"SID","null"),S.T=!0,Yo(S,d,null)):Yo(S,d,c),this.G=2}}else this.G==3&&(o?ic(this,o):this.i.length==0||Uu(this.h)||ic(this))};function ic(o,c){var d;c?d=c.l:d=o.U++;const m=nn(o.I);Ct(m,"SID",o.K),Ct(m,"RID",d),Ct(m,"AID",o.T),ls(o,m),o.m&&o.o&&ra(m,o.m,o.o),d=new _n(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=oc(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),na(o.h,d),Yo(d,m,c)}function ls(o,c){o.H&&dt(o.H,function(d,m){Ct(c,m,d)}),o.l&&qu({},function(d,m){Ct(c,m,d)})}function oc(o,c,d){d=Math.min(o.i.length,d);var m=o.l?g(o.l.Na,o.l,o):null;t:{var S=o.i;let D=-1;for(;;){const K=["count="+d];D==-1?0<d?(D=S[0].g,K.push("ofs="+D)):D=0:K.push("ofs="+D);let At=!0;for(let Qt=0;Qt<d;Qt++){let _t=S[Qt].g;const ne=S[Qt].map;if(_t-=D,0>_t)D=Math.max(0,S[Qt].g-100),At=!1;else try{Jm(ne,K,"req"+_t+"_")}catch{m&&m(ne)}}if(At){m=K.join("&");break t}}}return o=o.i.splice(0,d),c.D=o,m}function ac(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;bt||$n(),yt||(bt(),yt=!0),Ne.add(c,o),o.v=0}}function ia(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Zr(g(o.Fa,o),cc(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,lc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Zr(g(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),pi(this),lc(this))};function oa(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function lc(o){o.g=new _n(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=nn(o.qa);Ct(c,"RID","rpc"),Ct(c,"SID",o.K),Ct(c,"AID",o.T),Ct(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(c,"TO",o.ja),Ct(c,"TYPE","xmlhttp"),ls(o,c),o.m&&o.o&&ra(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=ci(nn(c)),d.m=null,d.P=!0,ku(d,o)}e.Za=function(){this.C!=null&&(this.C=null,pi(this),ia(this),ue(19))};function gi(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function uc(o,c){var d=null;if(o.g==c){gi(o),oa(o),o.g=null;var m=2}else if(ea(o.h,c))d=c.D,ju(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var S=o.B;m=si(),lt(m,new Vu(m,d)),mi(o)}else ac(o);else if(S=c.s,S==3||S==0&&0<c.X||!(m==1&&tg(o,c)||m==2&&ia(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),S){case 1:Gn(o,5);break;case 4:Gn(o,10);break;case 3:Gn(o,6);break;default:Gn(o,2)}}}function cc(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function Gn(o,c){if(o.j.info("Error code "+c),c==2){var d=g(o.fb,o),m=o.Xa;const S=!m;m=new Wn(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||li(m,"https"),ci(m),S?Wm(m.toString(),d):Gm(m.toString(),d)}else ue(2);o.G=0,o.l&&o.l.sa(c),hc(o),sc(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function hc(o){if(o.G=0,o.ka=[],o.l){const c=$u(o.h);(c.length!=0||o.i.length!=0)&&(x(o.ka,c),x(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function fc(o,c,d){var m=d instanceof Wn?nn(d):new Wn(d);if(m.g!="")c&&(m.g=c+"."+m.g),ui(m,m.s);else{var S=l.location;m=S.protocol,c=c?c+"."+S.hostname:S.hostname,S=+S.port;var D=new Wn(null);m&&li(D,m),c&&(D.g=c),S&&ui(D,S),d&&(D.l=d),m=D}return d=o.D,c=o.ya,d&&c&&Ct(m,d,c),Ct(m,"VER",o.la),ls(o,m),m}function dc(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Nt(new hi({eb:d})):new Nt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function pc(){}e=pc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function yi(){}yi.prototype.g=function(o,c){return new ve(o,c)};function ve(o,c){et.call(this),this.g=new rc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!L(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!L(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new mr(this)}R(ve,et),ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ve.prototype.close=function(){sa(this.g)},ve.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Gt(o),o=d);c.i.push(new Lm(c.Ya++,o)),c.G==3&&mi(c)},ve.prototype.N=function(){this.g.l=null,delete this.j,sa(this.g),delete this.g,ve.aa.N.call(this)};function mc(o){Go.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const d in c){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}R(mc,Go);function gc(){Qo.call(this),this.status=1}R(gc,Qo);function mr(o){this.g=o}R(mr,pc),mr.prototype.ua=function(){lt(this.g,"a")},mr.prototype.ta=function(o){lt(this.g,new mc(o))},mr.prototype.sa=function(o){lt(this.g,new gc)},mr.prototype.ra=function(){lt(this.g,"b")},yi.prototype.createWebChannel=yi.prototype.g,ve.prototype.send=ve.prototype.o,ve.prototype.open=ve.prototype.m,ve.prototype.close=ve.prototype.close,up=function(){return new yi},lp=function(){return si()},ap=zn,Za={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,Fi=ii,Du.COMPLETE="complete",op=Du,Su.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",et.prototype.listen=et.prototype.K,ps=Su,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,ip=Nt}).apply(typeof wi<"u"?wi:typeof self<"u"?self:typeof window<"u"?window:{});const yh="@firebase/firestore",_h="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ie.UNAUTHENTICATED=new ie(null),ie.GOOGLE_CREDENTIALS=new ie("google-credentials-uid"),ie.FIRST_PARTY=new ie("first-party-uid"),ie.MOCK_USER=new ie("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Yd("@firebase/firestore");function vr(){return or.logLevel}function X(e,...t){if(or.logLevel<=gt.DEBUG){const n=t.map(Hl);or.debug(`Firestore (${qr}): ${e}`,...n)}}function dn(e,...t){if(or.logLevel<=gt.ERROR){const n=t.map(Hl);or.error(`Firestore (${qr}): ${e}`,...n)}}function Or(e,...t){if(or.logLevel<=gt.WARN){const n=t.map(Hl);or.warn(`Firestore (${qr}): ${e}`,...n)}}function Hl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,cp(e,r,n)}function cp(e,t,n){let r=`FIRESTORE (${qr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dn(r),new Error(r)}function wt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||cp(t,s,r)}function at(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends $r{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Gw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ie.UNAUTHENTICATED))}shutdown(){}}class Qw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Jw{constructor(t){this.t=t,this.currentUser=ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){wt(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new hp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return wt(t===null||typeof t=="string",2055,{h:t}),new ie(t)}}class Xw{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ie.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Yw{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Xw(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(ie.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eh{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zw{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vw(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){wt(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Eh(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Eh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=t0(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ht(e,t){return e<t?-1:e>t?1:0}function tl(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return Ia(s)===Ia(i)?ht(s,i):Ia(s)?1:-1}return ht(e.length,t.length)}const e0=55296,n0=57343;function Ia(e){const t=e.charCodeAt(0);return t>=e0&&t<=n0}function kr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="__name__";class ze{constructor(t,n,r){n===void 0?n=0:n>t.length&&nt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&nt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ze.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ze?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=ze.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ht(t.length,n.length)}static compareSegments(t,n){const r=ze.isNumericId(t),s=ze.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ze.extractNumericId(t).compare(ze.extractNumericId(n)):tl(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Sn.fromString(t.substring(4,t.length-2))}}class St extends ze{construct(t,n,r){return new St(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new J(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new St(n)}static emptyPath(){return new St([])}}const r0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends ze{construct(t,n,r){return new Yt(t,n,r)}static isValidIdentifier(t){return r0.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vh}static keyField(){return new Yt([vh])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new J(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new J(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(t){this.path=t}static fromPath(t){return new tt(St.fromString(t))}static fromName(t){return new tt(St.fromString(t).popFirst(5))}static empty(){return new tt(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&St.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return St.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new tt(new St(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(e,t,n){if(!n)throw new J(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function s0(e,t,n,r){if(t===!0&&r===!0)throw new J(k.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Th(e){if(!tt.isDocumentKey(e))throw new J(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function wh(e){if(tt.isDocumentKey(e))throw new J(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function dp(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Vo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":nt(12329,{type:typeof e})}function ar(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new J(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vo(e);throw new J(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(e,t){const n={typeString:e};return t&&(n.value=t),n}function Qs(e,t){if(!dp(e))throw new J(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new J(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=-62135596800,Ah=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(t){return xt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Ah);return new xt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new J(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<bh)throw new J(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ah}_compareTo(t){return this.seconds===t.seconds?ht(this.nanoseconds,t.nanoseconds):ht(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qs(t,xt._jsonSchema))return new xt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-bh;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:Ft("string",xt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new xt(0,0))}static max(){return new it(new xt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=-1;function i0(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=it.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new Nn(s,tt.empty(),t)}function o0(e){return new Nn(e.readTime,e.key,Ls)}class Nn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Nn(it.min(),tt.empty(),Ls)}static max(){return new Nn(it.max(),tt.empty(),Ls)}}function a0(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=tt.comparator(e.documentKey,t.documentKey),n!==0?n:ht(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hr(e){if(e.code!==k.FAILED_PRECONDITION||e.message!==l0)throw e;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):M.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):M.reject(n)}static resolve(t){return new M((n,r)=>{n(t)})}static reject(t){return new M((n,r)=>{r(t)})}static waitFor(t){return new M((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(t){let n=M.resolve(!1);for(const r of t)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new M((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next(h=>{a[f]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(t,n){return new M((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function c0(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Do.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=-1;function No(e){return e==null}function no(e){return e===0&&1/e==-1/0}function h0(e){return typeof e=="number"&&Number.isInteger(e)&&!no(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="";function f0(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ih(t)),t=d0(e.get(n),t);return Ih(t)}function d0(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case pp:n+="";break;default:n+=i}}return n}function Ih(e){return e+pp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){this.comparator=t,this.root=n||Jt.EMPTY}insert(t,n){return new Dt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(t){return new Dt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bi(this.root,t,this.comparator,!1)}getReverseIterator(){return new bi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bi(this.root,t,this.comparator,!0)}}class bi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Jt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Jt.RED,this.left=s??Jt.EMPTY,this.right=i??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Jt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw nt(27949);return t+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Jt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.comparator=t,this.data=new Dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sh(this.data.getIterator())}getIteratorFrom(t){return new Sh(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof qt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new qt(this.comparator);return n.data=t,n}}class Sh{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.fields=t,t.sort(Yt.comparator)}static empty(){return new Ae([])}unionWith(t){let n=new qt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ae(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return kr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gp("Invalid base64 string: "+i):i}}(t);return new te(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new te(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ht(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}te.EMPTY_BYTE_STRING=new te("");const p0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function On(e){if(wt(!!e,39018),typeof e=="string"){let t=0;const n=p0.exec(e);if(wt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function kn(e){return typeof e=="string"?te.fromBase64String(e):te.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="server_timestamp",_p="__type__",Ep="__previous_value__",vp="__local_write_time__";function Wl(e){return(e?.mapValue?.fields||{})[_p]?.stringValue===yp}function Oo(e){const t=e.mapValue.fields[Ep];return Wl(t)?Oo(t):t}function Fs(e){const t=On(e.mapValue.fields[vp].timestampValue);return new xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n,r,s,i,a,l,u,f,h){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=h}}const ro="(default)";class Us{constructor(t,n){this.projectId=t,this.database=n||ro}static empty(){return new Us("","")}get isDefaultDatabase(){return this.database===ro}isEqual(t){return t instanceof Us&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="__type__",g0="__max__",Ai={mapValue:{}},wp="__vector__",so="value";function Mn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wl(e)?4:_0(e)?9007199254740991:y0(e)?10:11:nt(28295,{value:e})}function Ze(e,t){if(e===t)return!0;const n=Mn(e);if(n!==Mn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fs(e).isEqual(Fs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=On(s.timestampValue),l=On(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return kn(s.bytesValue).isEqual(kn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return kt(s.geoPointValue.latitude)===kt(i.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return kt(s.integerValue)===kt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=kt(s.doubleValue),l=kt(i.doubleValue);return a===l?no(a)===no(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return kr(e.arrayValue.values||[],t.arrayValue.values||[],Ze);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Rh(a)!==Rh(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Ze(a[u],l[u])))return!1;return!0}(e,t);default:return nt(52216,{left:e})}}function Bs(e,t){return(e.values||[]).find(n=>Ze(n,t))!==void 0}function Mr(e,t){if(e===t)return 0;const n=Mn(e),r=Mn(t);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=kt(i.integerValue||i.doubleValue),u=kt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Ch(e.timestampValue,t.timestampValue);case 4:return Ch(Fs(e),Fs(t));case 5:return tl(e.stringValue,t.stringValue);case 6:return function(i,a){const l=kn(i),u=kn(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const h=ht(l[f],u[f]);if(h!==0)return h}return ht(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ht(kt(i.latitude),kt(a.latitude));return l!==0?l:ht(kt(i.longitude),kt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ph(e.arrayValue,t.arrayValue);case 10:return function(i,a){const l=i.fields||{},u=a.fields||{},f=l[so]?.arrayValue,h=u[so]?.arrayValue,p=ht(f?.values?.length||0,h?.values?.length||0);return p!==0?p:Ph(f,h)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===Ai.mapValue&&a===Ai.mapValue)return 0;if(i===Ai.mapValue)return 1;if(a===Ai.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=tl(u[p],h[p]);if(g!==0)return g;const I=Mr(l[u[p]],f[h[p]]);if(I!==0)return I}return ht(u.length,h.length)}(e.mapValue,t.mapValue);default:throw nt(23264,{he:n})}}function Ch(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ht(e,t);const n=On(e),r=On(t),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function Ph(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mr(n[s],r[s]);if(i)return i}return ht(n.length,r.length)}function Lr(e){return el(e)}function el(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=On(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return kn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return tt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=el(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${el(n.fields[a])}`;return s+"}"}(e.mapValue):nt(61005,{value:e})}function Ui(e){switch(Mn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Oo(e);return t?16+Ui(t):16;case 5:return 2*e.stringValue.length;case 6:return kn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ui(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return Bn(r.fields,(i,a)=>{s+=i.length+Ui(a)}),s}(e.mapValue);default:throw nt(13486,{value:e})}}function xh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function nl(e){return!!e&&"integerValue"in e}function Gl(e){return!!e&&"arrayValue"in e}function Vh(e){return!!e&&"nullValue"in e}function Dh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bi(e){return!!e&&"mapValue"in e}function y0(e){return(e?.mapValue?.fields||{})[Tp]?.stringValue===wp}function Is(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Bn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Is(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Is(e.arrayValue.values[n]);return t}return{...e}}function _0(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===g0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.value=t}static empty(){return new ge({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Bi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Is(n)}setAll(t){let n=Yt.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Is(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Bi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ze(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Bi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Bn(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new ge(Is(this.value))}}function bp(e){const t=[];return Bn(e.fields,(n,r)=>{const s=new Yt([n]);if(Bi(r)){const i=bp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)}),new Ae(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,it.min(),it.min(),it.min(),ge.empty(),0)}static newFoundDocument(t,n,r,s){return new ae(t,1,n,it.min(),r,s,0)}static newNoDocument(t,n){return new ae(t,2,n,it.min(),it.min(),ge.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,it.min(),it.min(),ge.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ge.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(t,n){this.position=t,this.inclusive=n}}function Nh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=tt.comparator(tt.fromName(a.referenceValue),n.key):r=Mr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Oh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ze(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t,n="asc"){this.field=t,this.dir=n}}function E0(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{}class Lt extends Ap{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new T0(t,n,r):n==="array-contains"?new A0(t,r):n==="in"?new I0(t,r):n==="not-in"?new R0(t,r):n==="array-contains-any"?new S0(t,r):new Lt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new w0(t,r):new b0(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mr(n,this.value)):n!==null&&Mn(this.value)===Mn(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ue extends Ap{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Ue(t,n)}matches(t){return Ip(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ip(e){return e.op==="and"}function Rp(e){return v0(e)&&Ip(e)}function v0(e){for(const t of e.filters)if(t instanceof Ue)return!1;return!0}function rl(e){if(e instanceof Lt)return e.field.canonicalString()+e.op.toString()+Lr(e.value);if(Rp(e))return e.filters.map(t=>rl(t)).join(",");{const t=e.filters.map(n=>rl(n)).join(",");return`${e.op}(${t})`}}function Sp(e,t){return e instanceof Lt?function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&Ze(r.value,s.value)}(e,t):e instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Sp(a,s.filters[l]),!0):!1}(e,t):void nt(19439)}function Cp(e){return e instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Lr(n.value)}`}(e):e instanceof Ue?function(n){return n.op.toString()+" {"+n.getFilters().map(Cp).join(" ,")+"}"}(e):"Filter"}class T0 extends Lt{constructor(t,n,r){super(t,n,r),this.key=tt.fromName(r.referenceValue)}matches(t){const n=tt.comparator(t.key,this.key);return this.matchesComparison(n)}}class w0 extends Lt{constructor(t,n){super(t,"in",n),this.keys=Pp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class b0 extends Lt{constructor(t,n){super(t,"not-in",n),this.keys=Pp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Pp(e,t){return(t.arrayValue?.values||[]).map(n=>tt.fromName(n.referenceValue))}class A0 extends Lt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Gl(n)&&Bs(n.arrayValue,this.value)}}class I0 extends Lt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Bs(this.value.arrayValue,n)}}class R0 extends Lt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bs(this.value.arrayValue,n)}}class S0 extends Lt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Gl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function kh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new C0(e,t,n,r,s,i,a)}function Ql(e){const t=at(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>rl(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),No(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Lr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Lr(r)).join(",")),t.Te=n}return t.Te}function Jl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!E0(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Sp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oh(e.startAt,t.startAt)&&Oh(e.endAt,t.endAt)}function sl(e){return tt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P0(e,t,n,r,s,i,a,l){return new Kr(e,t,n,r,s,i,a,l)}function xp(e){return new Kr(e)}function Mh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Vp(e){return e.collectionGroup!==null}function Rs(e){const t=at(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new qt(Yt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new js(i,r))}),n.has(Yt.keyField().canonicalString())||t.Ie.push(new js(Yt.keyField(),r))}return t.Ie}function Ge(e){const t=at(e);return t.Ee||(t.Ee=x0(t,Rs(e))),t.Ee}function x0(e,t){if(e.limitType==="F")return kh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new js(s.field,i)});const n=e.endAt?new io(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new io(e.startAt.position,e.startAt.inclusive):null;return kh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function il(e,t){const n=e.filters.concat([t]);return new Kr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ol(e,t,n){return new Kr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ko(e,t){return Jl(Ge(e),Ge(t))&&e.limitType===t.limitType}function Dp(e){return`${Ql(Ge(e))}|lt:${e.limitType}`}function Tr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Cp(s)).join(", ")}]`),No(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Lr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Lr(s)).join(",")),`Target(${r})`}(Ge(e))}; limitType=${e.limitType})`}function Mo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):tt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of Rs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,u){const f=Nh(a,l,u);return a.inclusive?f<=0:f<0}(r.startAt,Rs(r),s)||r.endAt&&!function(a,l,u){const f=Nh(a,l,u);return a.inclusive?f>=0:f>0}(r.endAt,Rs(r),s))}(e,t)}function V0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Np(e){return(t,n)=>{let r=!1;for(const s of Rs(e)){const i=D0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function D0(e,t,n){const r=e.field.isKeyField()?tt.comparator(t.key,n.key):function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?Mr(u,f):nt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return nt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Bn(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return mp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Dt(tt.comparator);function pn(){return N0}const Op=new Dt(tt.comparator);function ms(...e){let t=Op;for(const n of e)t=t.insert(n.key,n);return t}function kp(e){let t=Op;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function nr(){return Ss()}function Mp(){return Ss()}function Ss(){return new cr(e=>e.toString(),(e,t)=>e.isEqual(t))}const O0=new Dt(tt.comparator),k0=new qt(tt.comparator);function ft(...e){let t=k0;for(const n of e)t=t.add(n);return t}const M0=new qt(ht);function L0(){return M0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(t)?"-0":t}}function Lp(e){return{integerValue:""+e}}function F0(e,t){return h0(t)?Lp(t):Xl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this._=void 0}}function U0(e,t,n){return e instanceof oo?function(s,i){const a={fields:{[_p]:{stringValue:yp},[vp]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wl(i)&&(i=Oo(i)),i&&(a.fields[Ep]=i),{mapValue:a}}(n,t):e instanceof $s?Up(e,t):e instanceof qs?Bp(e,t):function(s,i){const a=Fp(s,i),l=Lh(a)+Lh(s.Ae);return nl(a)&&nl(s.Ae)?Lp(l):Xl(s.serializer,l)}(e,t)}function B0(e,t,n){return e instanceof $s?Up(e,t):e instanceof qs?Bp(e,t):n}function Fp(e,t){return e instanceof ao?function(r){return nl(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class oo extends Lo{}class $s extends Lo{constructor(t){super(),this.elements=t}}function Up(e,t){const n=jp(t);for(const r of e.elements)n.some(s=>Ze(s,r))||n.push(r);return{arrayValue:{values:n}}}class qs extends Lo{constructor(t){super(),this.elements=t}}function Bp(e,t){let n=jp(t);for(const r of e.elements)n=n.filter(s=>!Ze(s,r));return{arrayValue:{values:n}}}class ao extends Lo{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Lh(e){return kt(e.integerValue||e.doubleValue)}function jp(e){return Gl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function j0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof $s&&s instanceof $s||r instanceof qs&&s instanceof qs?kr(r.elements,s.elements,Ze):r instanceof ao&&s instanceof ao?Ze(r.Ae,s.Ae):r instanceof oo&&s instanceof oo}(e.transform,t.transform)}class $0{constructor(t,n){this.version=t,this.transformResults=n}}class Fe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Fe}static exists(t){return new Fe(void 0,t)}static updateTime(t){return new Fe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ji(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Fo{}function $p(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Yl(e.key,Fe.none()):new Js(e.key,e.data,Fe.none());{const n=e.data,r=ge.empty();let s=new qt(Yt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new jn(e.key,r,new Ae(s.toArray()),Fe.none())}}function q0(e,t,n){e instanceof Js?function(s,i,a){const l=s.value.clone(),u=Uh(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof jn?function(s,i,a){if(!ji(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Uh(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(qp(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Cs(e,t,n,r){return e instanceof Js?function(i,a,l,u){if(!ji(i.precondition,a))return l;const f=i.value.clone(),h=Bh(i.fieldTransforms,u,a);return f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof jn?function(i,a,l,u){if(!ji(i.precondition,a))return l;const f=Bh(i.fieldTransforms,u,a),h=a.data;return h.setAll(qp(i)),h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(i,a,l){return ji(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function H0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Fp(r.transform,s||null);i!=null&&(n===null&&(n=ge.empty()),n.set(r.field,i))}return n||null}function Fh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&kr(r,s,(i,a)=>j0(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Js extends Fo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class jn extends Fo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Uh(e,t,n){const r=new Map;wt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,B0(a,l,n[s]))}return r}function Bh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,U0(i,a,t))}return r}class Yl extends Fo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z0 extends Fo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&q0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Cs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Cs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Mp();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=$p(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ft())}isEqual(t){return this.batchId===t.batchId&&kr(this.mutations,t.mutations,(n,r)=>Fh(n,r))&&kr(this.baseMutations,t.baseMutations,(n,r)=>Fh(n,r))}}class Zl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){wt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=function(){return O0}();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Zl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,mt;function Q0(e){switch(e){case k.OK:return nt(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return nt(15467,{code:e})}}function Hp(e){if(e===void 0)return dn("GRPC error has no .code"),k.UNKNOWN;switch(e){case Mt.OK:return k.OK;case Mt.CANCELLED:return k.CANCELLED;case Mt.UNKNOWN:return k.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return k.INTERNAL;case Mt.UNAVAILABLE:return k.UNAVAILABLE;case Mt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Mt.NOT_FOUND:return k.NOT_FOUND;case Mt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Mt.ABORTED:return k.ABORTED;case Mt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Mt.DATA_LOSS:return k.DATA_LOSS;default:return nt(39323,{code:e})}}(mt=Mt||(Mt={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Sn([4294967295,4294967295],0);function jh(e){const t=J0().encode(e),n=new sp;return n.update(t),new Uint8Array(n.digest())}function $h(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Sn([n,r],0),new Sn([s,i],0)]}class tu{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gs(`Invalid padding: ${n}`);if(r<0)throw new gs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new gs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new gs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Sn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(Sn.fromNumber(r)));return s.compare(X0)===1&&(s=new Sn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=jh(t),[r,s]=$h(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new tu(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.ge===0)return;const n=jh(t),[r,s]=$h(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class gs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Xs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Uo(it.min(),s,new Dt(ht),pn(),ft())}}class Xs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Xs(r,n,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class zp{constructor(t,n){this.targetId=t,this.Ce=n}}class Kp{constructor(t,n,r=te.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class qh{constructor(){this.ve=0,this.Fe=Hh(),this.Me=te.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ft(),n=ft(),r=ft();return this.Fe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:nt(38017,{changeType:i})}}),new Xs(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Hh()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Y0{constructor(t){this.Ge=t,this.ze=new Map,this.je=pn(),this.Je=Ii(),this.He=Ii(),this.Ye=new Dt(ht)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:nt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(sl(i))if(r===0){const a=new tt(i.path);this.et(n,a,ae.newNoDocument(a,it.min()))}else wt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=kn(r).toUint8Array()}catch(u){if(u instanceof gp)return Or("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new tu(a,s,i)}catch(u){return Or(u instanceof gs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&sl(l.target)){const u=new tt(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ae.newNoDocument(u,t))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=ft();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(t));const s=new Uo(t,n,this.Ye,this.je,r);return this.je=pn(),this.Je=Ii(),this.He=Ii(),this.Ye=new Dt(ht),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new qh,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new qt(ht),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new qt(ht),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||X("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new qh),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ii(){return new Dt(tt.comparator)}function Hh(){return new Dt(tt.comparator)}const Z0={asc:"ASCENDING",desc:"DESCENDING"},tb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eb={and:"AND",or:"OR"};class nb{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function al(e,t){return e.useProto3Json||No(t)?t:{value:t}}function lo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Wp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rb(e,t){return lo(e,t.toTimestamp())}function Qe(e){return wt(!!e,49232),it.fromTimestamp(function(n){const r=On(n);return new xt(r.seconds,r.nanos)}(e))}function eu(e,t){return ll(e,t).canonicalString()}function ll(e,t){const n=function(s){return new St(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Gp(e){const t=St.fromString(e);return wt(Zp(t),10190,{key:t.toString()}),t}function ul(e,t){return eu(e.databaseId,t.path)}function Ra(e,t){const n=Gp(t);if(n.get(1)!==e.databaseId.projectId)throw new J(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new J(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tt(Jp(n))}function Qp(e,t){return eu(e.databaseId,t)}function sb(e){const t=Gp(e);return t.length===4?St.emptyPath():Jp(t)}function cl(e){return new St(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jp(e){return wt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function zh(e,t,n){return{name:ul(e,t),fields:n.value.mapValue.fields}}function ib(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:nt(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,h){return f.useProto3Json?(wt(h===void 0||typeof h=="string",58123),te.fromBase64String(h||"")):(wt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),te.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const h=f.code===void 0?k.UNKNOWN:Hp(f.code);return new J(h,f.message||"")}(a);n=new Kp(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ra(e,r.document.name),i=Qe(r.document.updateTime),a=r.document.createTime?Qe(r.document.createTime):it.min(),l=new ge({mapValue:{fields:r.document.fields}}),u=ae.newFoundDocument(s,i,a,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new $i(f,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ra(e,r.document),i=r.readTime?Qe(r.readTime):it.min(),a=ae.newNoDocument(s,i),l=r.removedTargetIds||[];n=new $i([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ra(e,r.document),i=r.removedTargetIds||[];n=new $i([],i,s,null)}else{if(!("filter"in t))return nt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new G0(s,i),l=r.targetId;n=new zp(l,a)}}return n}function ob(e,t){let n;if(t instanceof Js)n={update:zh(e,t.key,t.value)};else if(t instanceof Yl)n={delete:ul(e,t.key)};else if(t instanceof jn)n={update:zh(e,t.key,t.data),updateMask:mb(t.fieldMask)};else{if(!(t instanceof z0))return nt(16599,{Vt:t.type});n={verify:ul(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof oo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $s)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ao)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw nt(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:nt(27497)}(e,t.precondition)),n}function ab(e,t){return e&&e.length>0?(wt(t!==void 0,14353),e.map(n=>function(s,i){let a=s.updateTime?Qe(s.updateTime):Qe(i);return a.isEqual(it.min())&&(a=Qe(i)),new $0(a,s.transformResults||[])}(n,t))):[]}function lb(e,t){return{documents:[Qp(e,t.path)]}}function ub(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qp(e,s);const i=function(f){if(f.length!==0)return Yp(Ue.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(h=>function(g){return{field:wr(g.field),direction:fb(g.dir)}}(h))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=al(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ft:n,parent:s}}function cb(e){let t=sb(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){wt(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:t=t.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=Xp(p);return g instanceof Ue&&Rp(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(R){return new js(br(R.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,No(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,I=p.values||[];return new io(I,g)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const g=!p.before,I=p.values||[];return new io(I,g)}(n.endAt)),P0(t,s,a,i,l,"F",u,f)}function hb(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Xp(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=br(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=br(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=br(n.unaryFilter.field);return Lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=br(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Lt.create(br(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ue.create(n.compositeFilter.filters.map(r=>Xp(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return nt(1026)}}(n.compositeFilter.op))}(e):nt(30097,{filter:e})}function fb(e){return Z0[e]}function db(e){return tb[e]}function pb(e){return eb[e]}function wr(e){return{fieldPath:e.canonicalString()}}function br(e){return Yt.fromServerFormat(e.fieldPath)}function Yp(e){return e instanceof Lt?function(n){if(n.op==="=="){if(Dh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NAN"}};if(Vh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NAN"}};if(Vh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(n.field),op:db(n.op),value:n.value}}}(e):e instanceof Ue?function(n){const r=n.getFilters().map(s=>Yp(s));return r.length===1?r[0]:{compositeFilter:{op:pb(n.op),filters:r}}}(e):nt(54877,{filter:e})}function mb(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Zp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t,n,r,s,i=it.min(),a=it.min(),l=te.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new bn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t){this.yt=t}}function yb(e){const t=cb({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ol(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.Cn=new Eb}addToCollectionParentIndex(t,n){return this.Cn.add(n),M.resolve()}getCollectionParents(t,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return M.resolve()}deleteFieldIndex(t,n){return M.resolve()}deleteAllFieldIndexes(t){return M.resolve()}createTargetIndexes(t,n){return M.resolve()}getDocumentsMatchingTarget(t,n){return M.resolve(null)}getIndexType(t,n){return M.resolve(0)}getFieldIndexes(t,n){return M.resolve([])}getNextCollectionGroupToUpdate(t){return M.resolve(null)}getMinOffset(t,n){return M.resolve(Nn.min())}getMinOffsetFromCollectionGroup(t,n){return M.resolve(Nn.min())}updateCollectionGroup(t,n,r){return M.resolve()}updateIndexEntries(t,n){return M.resolve()}}class Eb{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new qt(St.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new qt(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tm=41943040;class me{static withCacheSize(t){return new me(t,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */me.DEFAULT_COLLECTION_PERCENTILE=10,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,me.DEFAULT=new me(tm,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),me.DISABLED=new me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Fr(0)}static cr(){return new Fr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="LruGarbageCollector",vb=1048576;function Gh([e,t],[n,r]){const s=ht(e,n);return s===0?ht(t,r):s}class Tb{constructor(t){this.Ir=t,this.buffer=new qt(Gh),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Gh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wb{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){X(Wh,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?X(Wh,"Ignoring IndexedDB error during garbage collection: ",n):await Hr(n)}await this.Vr(3e5)})}}class bb{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return M.resolve(Do.ce);const r=new Tb(n);return this.mr.forEachTarget(t,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Kh)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kh):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,u,f;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(t,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(f=Date.now(),vr()<=gt.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Ab(e,t){return new bb(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.changes=new cr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&Cs(r.mutation,s,Ae.empty(),xt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ft()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ft()){const s=nr();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=ms();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=nr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ft()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=pn();const a=Ss(),l=function(){return Ss()}();return n.forEach((u,f)=>{const h=r.get(f.key);s.has(f.key)&&(h===void 0||h.mutation instanceof jn)?i=i.insert(f.key,f):h!==void 0?(a.set(f.key,h.mutation.getFieldMask()),Cs(h.mutation,f,h.mutation.getFieldMask(),xt.now())):a.set(f.key,Ae.empty())}),this.recalculateAndSaveOverlays(t,i).next(u=>(u.forEach((f,h)=>a.set(f,h)),n.forEach((f,h)=>l.set(f,new Rb(h,a.get(f)??null))),l))}recalculateAndSaveOverlays(t,n){const r=Ss();let s=new Dt((a,l)=>a-l),i=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let h=r.get(u)||Ae.empty();h=l.applyToLocalView(f,h),r.set(u,h);const p=(s.get(l.batchId)||ft()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,h=u.value,p=Mp();h.forEach(g=>{if(!i.has(g)){const I=$p(n.get(g),r.get(g));I!==null&&p.set(g,I),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,p))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return tt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Vp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):M.resolve(nr());let l=Ls,u=i;return a.next(f=>M.forEach(f,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?M.resolve():this.remoteDocumentCache.getEntry(t,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,u,f,ft())).next(h=>({batchId:l,changes:kp(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new tt(n)).next(r=>{let s=ms();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=ms();return this.indexManager.getCollectionParents(t,i).next(l=>M.forEach(l,u=>{const f=function(p,g){return new Kr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(h=>{h.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((u,f)=>{const h=f.getKey();a.get(h)===null&&(a=a.insert(h,ae.newInvalidDocument(h)))});let l=ms();return a.forEach((u,f)=>{const h=i.get(u);h!==void 0&&Cs(h.mutation,f,Ae.empty(),xt.now()),Mo(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Qe(s.createTime)}}(n)),M.resolve()}getNamedQuery(t,n){return M.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yb(s.bundledQuery),readTime:Qe(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.overlays=new Dt(tt.comparator),this.qr=new Map}getOverlay(t,n){return M.resolve(this.overlays.get(n))}getOverlays(t,n){const r=nr();return M.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),M.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(t,n,r){const s=nr(),i=n.length+1,a=new tt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Dt((f,h)=>f-h);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=i.get(f.largestBatchId);h===null&&(h=nr(),i=i.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=nr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,h)=>l.set(f,h)),!(l.size()>=s)););return M.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new W0(n,r));let i=this.qr.get(n);i===void 0&&(i=ft(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.sessionToken=te.EMPTY_BYTE_STRING}getSessionToken(t){return M.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.Qr=new qt(Ht.$r),this.Ur=new qt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Ht(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Gr(new Ht(t,n))}zr(t,n){t.forEach(r=>this.removeReference(r,n))}jr(t){const n=new tt(new St([])),r=new Ht(n,t),s=new Ht(n,t+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new tt(new St([])),r=new Ht(n,t),s=new Ht(n,t+1);let i=ft();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Ht(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ht{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return tt.comparator(t.key,n.key)||ht(t.Yr,n.Yr)}static Kr(t,n){return ht(t.Yr,n.Yr)||tt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Ht.$r)}checkEmpty(t){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new K0(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Ht(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(t,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Kl:this.tr-1)}getAllMutationBatches(t){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new qt(ht);return n.forEach(s=>{const i=new Ht(s,0),a=new Ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;tt.isDocumentKey(i)||(i=i.child(""));const a=new Ht(new tt(i),0);let l=new qt(ht);return this.Zr.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)},a),M.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){wt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new Ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,n){const r=new Ht(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,M.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this.ri=t,this.docs=function(){return new Dt(tt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let r=pn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ae.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=pn();const a=n.path,l=new tt(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||a0(o0(h),r)<=0||(s.has(h.key)||Mo(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(t,n,r,s){nt(9500)}ii(t,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Nb(this)}getSize(t){return M.resolve(this.size)}}class Nb extends Ib{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(t){this.persistence=t,this.si=new cr(n=>Ql(n),Jl),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new nu,this.targetCount=0,this.ai=Fr.ur()}forEachTarget(t,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(t){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return M.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Fr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(t,n){return this.Pr(n),M.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(t){return M.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),M.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(t,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,n){this.ui={},this.overlays={},this.ci=new Do(0),this.li=!1,this.li=!0,this.hi=new xb,this.referenceDelegate=t(this),this.Pi=new Ob(this),this.indexManager=new _b,this.remoteDocumentCache=function(s){return new Db(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new gb(n),this.Ii=new Cb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Pb,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new Vb(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){X("MemoryPersistence","Starting transaction:",t);const s=new kb(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(t,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,n)))}}class kb extends u0{constructor(t){super(),this.currentSequenceNumber=t}}class ru{constructor(t){this.persistence=t,this.Ri=new nu,this.Vi=null}static mi(t){return new ru(t)}get fi(){if(this.Vi)return this.Vi;throw nt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=tt.fromPath(r);return this.gi(t,s).next(i=>{i||n.removeEntry(s,it.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class uo{constructor(t,n){this.persistence=t,this.pi=new cr(r=>f0(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Ab(this,n)}static mi(t,n){return new uo(t,n)}Ei(){}di(t){return M.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}wr(t){let n=0;return this.pr(t,r=>{n++}).next(()=>n)}pr(t,n){return M.forEach(this.pi,(r,s)=>this.br(t,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,a=>this.br(t,a,n).next(l=>{l||(r++,i.removeEntry(a,it.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),M.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),M.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),M.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),M.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ui(t.data.value)),n}br(t,n,r){return M.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=ft(),s=ft();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new su(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CT()?8:c0(RT())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Mb;return this.Ss(t,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)})}).next(()=>i.result)}bs(t,n,r,s){return r.documentReadCount<this.fs?(vr()<=gt.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Tr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(vr()<=gt.DEBUG&&X("QueryEngine","Query:",Tr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(vr()<=gt.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Tr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ge(n))):M.resolve())}ys(t,n){if(Mh(n))return M.resolve(null);let r=Ge(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ol(n,null,"F"),r=Ge(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=ft(...i);return this.ps.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(t,ol(n,null,"F")):this.vs(t,f,n,u)}))})))}ws(t,n,r,s){return Mh(n)||s.isEqual(it.min())?M.resolve(null):this.ps.getDocuments(t,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?M.resolve(null):(vr()<=gt.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tr(n)),this.vs(t,a,n,i0(s,Ls)).next(l=>l))})}Ds(t,n){let r=new qt(Np(t));return n.forEach((s,i)=>{Mo(t,i)&&(r=r.add(i))}),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return vr()<=gt.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Tr(n)),this.ps.getDocumentsMatchingQuery(t,n,Nn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="LocalStore",Fb=3e8;class Ub{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Dt(ht),this.xs=new cr(i=>Ql(i),Jl),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Sb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function Bb(e,t,n,r){return new Ub(e,t,n,r)}async function nm(e,t){const n=at(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ft();for(const f of s){a.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of i){l.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:l}))})})}function jb(e,t){const n=at(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,f,h){const p=f.batch,g=p.keys();let I=M.resolve();return g.forEach(R=>{I=I.next(()=>h.getEntry(u,R)).next(N=>{const x=f.docVersions.get(R);wt(x!==null,48541),N.version.compareTo(x)<0&&(p.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),h.addEntry(N)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ft();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function rm(e){const t=at(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function $b(e,t){const n=at(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,p)));let I=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?I=I.withResumeToken(te.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),s=s.insert(p,I),function(N,x,$){return N.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Fb?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(g,I,h)&&l.push(n.Pi.updateTargetData(i,I))});let u=pn(),f=ft();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(qb(i,a,t.documentUpdates).next(h=>{u=h.ks,f=h.qs})),!r.isEqual(it.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return M.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,f)).next(()=>u)}).then(i=>(n.Ms=s,i))}function qb(e,t,n){let r=ft(),s=ft();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=pn();return n.forEach((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(it.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):X(iu,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{ks:a,qs:s}})}function Hb(e,t){const n=at(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Kl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function zb(e,t){const n=at(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,t).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new bn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r})}async function hl(e,t,n){const r=at(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!zr(a))throw a;X(iu,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Qh(e,t,n){const r=at(e);let s=it.min(),i=ft();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,h){const p=at(u),g=p.xs.get(h);return g!==void 0?M.resolve(p.Ms.get(g)):p.Pi.getTargetData(f,h)}(r,a,Ge(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:it.min(),n?i:ft())).next(l=>(Kb(r,V0(t),l),{documents:l,Qs:i})))}function Kb(e,t,n){let r=e.Os.get(t)||it.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Os.set(t,r)}class Jh{constructor(){this.activeTargetIds=L0()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Wb{constructor(){this.Mo=new Jh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Jh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="ConnectivityMonitor";class Yh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(Xh,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){X(Xh,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri=null;function fl(){return Ri===null?Ri=function(){return 268435456+Math.round(2147483648*Math.random())}():Ri++,"0x"+Ri.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RestConnection",Qb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jb{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ro?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=fl(),l=this.zo(t,n.toUriEncodedString());X(Sa,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:f}=new URL(l),h=$l(f);return this.Jo(t,l,u,r,h).then(p=>(X(Sa,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Or(Sa,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}zo(t,n){const r=Qb[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se="WebChannelConnection";class Yb extends Jb{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=fl();return new Promise((l,u)=>{const f=new ip;f.setWithCredentials(!0),f.listenOnce(op.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Fi.NO_ERROR:const p=f.getResponseJson();X(se,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Fi.TIMEOUT:X(se,`RPC '${t}' ${a} timed out`),u(new J(k.DEADLINE_EXCEEDED,"Request time out"));break;case Fi.HTTP_ERROR:const g=f.getStatus();if(X(se,`RPC '${t}' ${a} failed with status:`,g,"response text:",f.getResponseText()),g>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const R=I?.error;if(R&&R.status&&R.message){const N=function($){const L=$.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(L)>=0?L:k.UNKNOWN}(R.status);u(new J(N,R.message))}else u(new J(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new J(k.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{X(se,`RPC '${t}' ${a} completed.`)}});const h=JSON.stringify(s);X(se,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",h,r,15)})}T_(t,n,r){const s=fl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=up(),l=lp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");X(se,`Creating RPC '${t}' stream ${s}: ${h}`,u);const p=a.createWebChannel(h,u);this.I_(p);let g=!1,I=!1;const R=new Xb({Yo:x=>{I?X(se,`Not sending because RPC '${t}' stream ${s} is closed:`,x):(g||(X(se,`Opening RPC '${t}' stream ${s} transport.`),p.open(),g=!0),X(se,`RPC '${t}' stream ${s} sending:`,x),p.send(x))},Zo:()=>p.close()}),N=(x,$,L)=>{x.listen($,q=>{try{L(q)}catch(Q){setTimeout(()=>{throw Q},0)}})};return N(p,ps.EventType.OPEN,()=>{I||(X(se,`RPC '${t}' stream ${s} transport opened.`),R.o_())}),N(p,ps.EventType.CLOSE,()=>{I||(I=!0,X(se,`RPC '${t}' stream ${s} transport closed`),R.a_(),this.E_(p))}),N(p,ps.EventType.ERROR,x=>{I||(I=!0,Or(se,`RPC '${t}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),R.a_(new J(k.UNAVAILABLE,"The operation could not be completed")))}),N(p,ps.EventType.MESSAGE,x=>{if(!I){const $=x.data[0];wt(!!$,16349);const L=$,q=L?.error||L[0]?.error;if(q){X(se,`RPC '${t}' stream ${s} received error:`,q);const Q=q.status;let st=function(y){const v=Mt[y];if(v!==void 0)return Hp(v)}(Q),dt=q.message;st===void 0&&(st=k.INTERNAL,dt="Unknown error status: "+Q+" with message "+q.message),I=!0,R.a_(new J(st,dt)),p.close()}else X(se,`RPC '${t}' stream ${s} received:`,$),R.u_($)}}),N(l,ap.STAT_EVENT,x=>{x.stat===Za.PROXY?X(se,`RPC '${t}' stream ${s} detected buffering proxy`):x.stat===Za.NOPROXY&&X(se,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Ca(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e){return new nb(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="PersistentStream";class im{constructor(t,n,r,s,i,a,l,u){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sm(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(dn(n.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{t(()=>{const s=new J(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return X(Zh,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(X(Zh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zb extends im{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=ib(this.serializer,t),r=function(i){if(!("targetChange"in i))return it.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?Qe(a.readTime):it.min()}(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=cl(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=sl(u)?{documents:lb(i,u)}:{query:ub(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Wp(i,a.resumeToken);const f=al(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=lo(i,a.snapshotVersion.toTimestamp());const f=al(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=hb(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=cl(this.serializer),n.removeTarget=t,this.q_(n)}}class tA extends im{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return wt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,wt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){wt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ab(t.writeResults,t.commitTime),r=Qe(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=cl(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ob(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{}class nA extends eA{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(t,ll(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(k.UNKNOWN,i.toString())})}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(t,ll(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class rA{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dn(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="RemoteStore";class sA{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{hr(this)&&(X(lr,"Restarting streams for network reachability change."),await async function(u){const f=at(u);f.Ea.add(4),await Ys(f),f.Ra.set("Unknown"),f.Ea.delete(4),await jo(f)}(this))})}),this.Ra=new rA(r,s)}}async function jo(e){if(hr(e))for(const t of e.da)await t(!0)}async function Ys(e){for(const t of e.da)await t(!1)}function om(e,t){const n=at(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),uu(n)?lu(n):Wr(n).O_()&&au(n,t))}function ou(e,t){const n=at(e),r=Wr(n);n.Ia.delete(t),r.O_()&&am(n,t),n.Ia.size===0&&(r.O_()?r.L_():hr(n)&&n.Ra.set("Unknown"))}function au(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wr(e).Y_(t)}function am(e,t){e.Va.Ue(t),Wr(e).Z_(t)}function lu(e){e.Va=new Y0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Wr(e).start(),e.Ra.ua()}function uu(e){return hr(e)&&!Wr(e).x_()&&e.Ia.size>0}function hr(e){return at(e).Ea.size===0}function lm(e){e.Va=void 0}async function iA(e){e.Ra.set("Online")}async function oA(e){e.Ia.forEach((t,n)=>{au(e,t)})}async function aA(e,t){lm(e),uu(e)?(e.Ra.ha(t),lu(e)):e.Ra.set("Unknown")}async function lA(e,t,n){if(e.Ra.set("Online"),t instanceof Kp&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(e,t)}catch(r){X(lr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await co(e,r)}else if(t instanceof $i?e.Va.Ze(t):t instanceof zp?e.Va.st(t):e.Va.tt(t),!n.isEqual(it.min()))try{const r=await rm(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(f);h&&i.Ia.set(f,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(te.EMPTY_BYTE_STRING,h.snapshotVersion)),am(i,u);const p=new bn(h.target,u,f,h.sequenceNumber);au(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){X(lr,"Failed to raise snapshot:",r),await co(e,r)}}async function co(e,t,n){if(!zr(t))throw t;e.Ea.add(1),await Ys(e),e.Ra.set("Offline"),n||(n=()=>rm(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{X(lr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await jo(e)})}function um(e,t){return t().catch(n=>co(e,n,t))}async function $o(e){const t=at(e),n=Ln(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Kl;for(;uA(t);)try{const s=await Hb(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,cA(t,s)}catch(s){await co(t,s)}cm(t)&&hm(t)}function uA(e){return hr(e)&&e.Ta.length<10}function cA(e,t){e.Ta.push(t);const n=Ln(e);n.O_()&&n.X_&&n.ea(t.mutations)}function cm(e){return hr(e)&&!Ln(e).x_()&&e.Ta.length>0}function hm(e){Ln(e).start()}async function hA(e){Ln(e).ra()}async function fA(e){const t=Ln(e);for(const n of e.Ta)t.ea(n.mutations)}async function dA(e,t,n){const r=e.Ta.shift(),s=Zl.from(r,t,n);await um(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await $o(e)}async function pA(e,t){t&&Ln(e).X_&&await async function(r,s){if(function(a){return Q0(a)&&a!==k.ABORTED}(s.code)){const i=r.Ta.shift();Ln(r).B_(),await um(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $o(r)}}(e,t),cm(e)&&hm(e)}async function tf(e,t){const n=at(e);n.asyncQueue.verifyOperationInProgress(),X(lr,"RemoteStore received new credentials");const r=hr(n);n.Ea.add(3),await Ys(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await jo(n)}async function mA(e,t){const n=at(e);t?(n.Ea.delete(2),await jo(n)):t||(n.Ea.add(2),await Ys(n),n.Ra.set("Unknown"))}function Wr(e){return e.ma||(e.ma=function(n,r,s){const i=at(n);return i.sa(),new Zb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Xo:iA.bind(null,e),t_:oA.bind(null,e),r_:aA.bind(null,e),H_:lA.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),uu(e)?lu(e):e.Ra.set("Unknown")):(await e.ma.stop(),lm(e))})),e.ma}function Ln(e){return e.fa||(e.fa=function(n,r,s){const i=at(n);return i.sa(),new tA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:hA.bind(null,e),r_:pA.bind(null,e),ta:fA.bind(null,e),na:dA.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await $o(e)):(await e.fa.stop(),e.Ta.length>0&&(X(lr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new cu(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hu(e,t){if(dn("AsyncQueue",`${t}: ${e}`),zr(e))return new J(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{static emptySet(t){return new xr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||tt.comparator(n.key,r.key):(n,r)=>tt.comparator(n.key,r.key),this.keyedMap=ms(),this.sortedSet=new Dt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof xr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new xr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.ga=new Dt(tt.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):nt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ur{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ur(t,n,xr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ko(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class yA{constructor(){this.queries=nf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=at(n),i=s.queries;s.queries=nf(),i.forEach((a,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new J(k.ABORTED,"Firestore shutting down"))}}function nf(){return new cr(e=>Dp(e),ko)}async function _A(e,t){const n=at(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new gA,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=hu(a,`Initialization of query '${Tr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&fu(n)}async function EA(e,t){const n=at(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vA(e,t){const n=at(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&fu(n)}function TA(e,t,n){const r=at(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function fu(e){e.Ca.forEach(t=>{t.next()})}var dl,rf;(rf=dl||(dl={})).Ma="default",rf.Cache="cache";class wA{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ur(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ur.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==dl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t){this.key=t}}class dm{constructor(t){this.key=t}}class bA{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=Np(t),this.tu=new xr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new ef,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((h,p)=>{const g=s.get(h),I=Mo(this.query,p)?p:null,R=!!g&&this.mutatedKeys.has(g.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let x=!1;g&&I?g.data.isEqual(I.data)?R!==N&&(r.track({type:3,doc:I}),x=!0):this.su(g,I)||(r.track({type:2,doc:I}),x=!0,(u&&this.eu(I,u)>0||f&&this.eu(I,f)<0)&&(l=!0)):!g&&I?(r.track({type:0,doc:I}),x=!0):g&&!I&&(r.track({type:1,doc:g}),x=!0,(u||f)&&(l=!0)),x&&(I?(a=a.add(I),i=N?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort((h,p)=>function(I,R){const N=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Rt:x})}};return N(I)-N(R)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Ur(this.query,t.tu,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ef,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ft(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return t.forEach(r=>{this.Xa.has(r)||n.push(new dm(r))}),this.Xa.forEach(r=>{t.has(r)||n.push(new fm(r))}),n}cu(t){this.Ya=t.Qs,this.Xa=ft();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ur.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const du="SyncEngine";class AA{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class IA{constructor(t){this.key=t,this.hu=!1}}class RA{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new cr(l=>Dp(l),ko),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(tt.comparator),this.Au=new Map,this.Ru=new nu,this.Vu={},this.mu=new Map,this.fu=Fr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SA(e,t,n=!0){const r=Em(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await pm(r,t,n,!0),s}async function CA(e,t){const n=Em(e);await pm(n,t,!0,!1)}async function pm(e,t,n,r){const s=await zb(e.localStore,Ge(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await PA(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&om(e.remoteStore,s),l}async function PA(e,t,n,r,s){e.pu=(p,g,I)=>async function(N,x,$,L){let q=x.view.ru($);q.Cs&&(q=await Qh(N.localStore,x.query,!1).then(({documents:w})=>x.view.ru(w,q)));const Q=L&&L.targetChanges.get(x.targetId),st=L&&L.targetMismatches.get(x.targetId)!=null,dt=x.view.applyChanges(q,N.isPrimaryClient,Q,st);return of(N,x.targetId,dt.au),dt.snapshot}(e,p,g,I);const i=await Qh(e.localStore,t,!0),a=new bA(t,i.Qs),l=a.ru(i.documents),u=Xs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);of(e,n,f.au);const h=new AA(t,n,a);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function xA(e,t,n){const r=at(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!ko(a,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ou(r.remoteStore,s.targetId),pl(r,s.targetId)}).catch(Hr)):(pl(r,s.targetId),await hl(r.localStore,s.targetId,!0))}async function VA(e,t){const n=at(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ou(n.remoteStore,r.targetId))}async function DA(e,t,n){const r=UA(e);try{const s=await function(a,l){const u=at(a),f=xt.now(),h=l.reduce((I,R)=>I.add(R.key),ft());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=pn(),N=ft();return u.Ns.getEntries(I,h).next(x=>{R=x,R.forEach(($,L)=>{L.isValidDocument()||(N=N.add($))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,R)).next(x=>{p=x;const $=[];for(const L of l){const q=H0(L,p.get(L.key).overlayedDocument);q!=null&&$.push(new jn(L.key,q,bp(q.value.mapValue),Fe.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,$,l)}).next(x=>{g=x;const $=x.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(I,x.batchId,$)})}).then(()=>({batchId:g.batchId,changes:kp(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Dt(ht)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f}(r,s.batchId,n),await Zs(r,s.changes),await $o(r.remoteStore)}catch(s){const i=hu(s,"Failed to persist write");n.reject(i)}}async function mm(e,t){const n=at(e);try{const r=await $b(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?wt(a.hu,14607):s.removedDocuments.size>0&&(wt(a.hu,42227),a.hu=!1))}),await Zs(n,r,t)}catch(r){await Hr(r)}}function sf(e,t,n){const r=at(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=at(a);u.onlineState=l;let f=!1;u.queries.forEach((h,p)=>{for(const g of p.Sa)g.va(l)&&(f=!0)}),f&&fu(u)}(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function NA(e,t,n){const r=at(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new Dt(tt.comparator);a=a.insert(i,ae.newNoDocument(i,it.min()));const l=ft().add(i),u=new Uo(it.min(),new Map,new Dt(ht),a,l);await mm(r,u),r.du=r.du.remove(i),r.Au.delete(t),pu(r)}else await hl(r.localStore,t,!1).then(()=>pl(r,t,n)).catch(Hr)}async function OA(e,t){const n=at(e),r=t.batch.batchId;try{const s=await jb(n.localStore,t);ym(n,r,null),gm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zs(n,s)}catch(s){await Hr(s)}}async function kA(e,t,n){const r=at(e);try{const s=await function(a,l){const u=at(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return u.mutationQueue.lookupMutationBatch(f,l).next(p=>(wt(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>u.localDocuments.getDocuments(f,h))})}(r.localStore,t);ym(r,t,n),gm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zs(r,s)}catch(s){await Hr(s)}}function gm(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function ym(e,t,n){const r=at(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function pl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(r=>{e.Ru.containsKey(r)||_m(e,r)})}function _m(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(ou(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),pu(e))}function of(e,t,n){for(const r of n)r instanceof fm?(e.Ru.addReference(r.key,t),MA(e,r)):r instanceof dm?(X(du,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||_m(e,r.key)):nt(19791,{wu:r})}function MA(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(X(du,"New document in limbo: "+n),e.Eu.add(r),pu(e))}function pu(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new tt(St.fromString(t)),r=e.fu.next();e.Au.set(r,new IA(n)),e.du=e.du.insert(n,r),om(e.remoteStore,new bn(Ge(xp(n.path)),r,"TargetPurposeLimboResolution",Do.ce))}}async function Zs(e,t,n){const r=at(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,t,n).then(f=>{if((f||n)&&r.isPrimaryClient){const h=f?!f.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(f){s.push(f);const h=su.As(u.targetId,f);i.push(h)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,f){const h=at(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(f,g=>M.forEach(g.Es,I=>h.persistence.referenceDelegate.addReference(p,g.targetId,I)).next(()=>M.forEach(g.ds,I=>h.persistence.referenceDelegate.removeReference(p,g.targetId,I)))))}catch(p){if(!zr(p))throw p;X(iu,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const I=h.Ms.get(g),R=I.snapshotVersion,N=I.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(g,N)}}}(r.localStore,i))}async function LA(e,t){const n=at(e);if(!n.currentUser.isEqual(t)){X(du,"User change. New user:",t.toKey());const r=await nm(n.localStore,t);n.currentUser=t,function(i,a){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new J(k.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Zs(n,r.Ls)}}function FA(e,t){const n=at(e),r=n.Au.get(t);if(r&&r.hu)return ft().add(r.key);{let s=ft();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Em(e){const t=at(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NA.bind(null,t),t.Pu.H_=vA.bind(null,t.eventManager),t.Pu.yu=TA.bind(null,t.eventManager),t}function UA(e){const t=at(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=OA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kA.bind(null,t),t}class ho{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Bo(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Bb(this.persistence,new Lb,t.initialUser,this.serializer)}Cu(t){return new em(ru.mi,this.serializer)}Du(t){return new Wb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ho.provider={build:()=>new ho};class BA extends ho{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){wt(this.persistence.referenceDelegate instanceof uo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wb(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?me.withCacheSize(this.cacheSizeBytes):me.DEFAULT;return new em(r=>uo.mi(r,n),this.serializer)}}class ml{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LA.bind(null,this.syncEngine),await mA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new yA}()}createDatastore(t){const n=Bo(t.databaseInfo.databaseId),r=function(i){return new Yb(i)}(t.databaseInfo);return function(i,a,l,u){return new nA(i,a,l,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new sA(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>sf(this.syncEngine,n,0),function(){return Yh.v()?new Yh:new Gb}())}createSyncEngine(t,n){return function(s,i,a,l,u,f,h){const p=new RA(s,i,a,l,u,f);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=at(n);X(lr,"RemoteStore shutting down."),r.Ea.add(5),await Ys(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ml.provider={build:()=>new ml};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):dn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="FirestoreClient";class $A{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ie.UNAUTHENTICATED,this.clientId=zl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X(Fn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X(Fn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hu(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Pa(e,t){e.asyncQueue.verifyOperationInProgress(),X(Fn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nm(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function af(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qA(e);X(Fn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>tf(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>tf(t.remoteStore,s)),e._onlineComponents=t}async function qA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){X(Fn,"Using user provided OfflineComponentProvider");try{await Pa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await Pa(e,new ho)}}else X(Fn,"Using default OfflineComponentProvider"),await Pa(e,new BA(void 0));return e._offlineComponents}async function vm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(X(Fn,"Using user provided OnlineComponentProvider"),await af(e,e._uninitializedComponentsProvider._online)):(X(Fn,"Using default OnlineComponentProvider"),await af(e,new ml))),e._onlineComponents}function HA(e){return vm(e).then(t=>t.syncEngine)}async function zA(e){const t=await vm(e),n=t.eventManager;return n.onListen=SA.bind(null,t.syncEngine),n.onUnlisten=xA.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=CA.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=VA.bind(null,t.syncEngine),n}function KA(e,t,n={}){const r=new Cn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,f){const h=new jA({next:g=>{h.Nu(),a.enqueueAndForget(()=>EA(i,p)),g.fromCache&&u.source==="server"?f.reject(new J(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new wA(l,h,{includeMetadataChanges:!0,qa:!0});return _A(i,p)}(await zA(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="firestore.googleapis.com",uf=!0;class cf{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new J(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wm,this.ssl=uf}else this.host=t.host,this.ssl=t.ssl??uf;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=tm;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vb)throw new J(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}s0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tm(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new J(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cf(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gw;switch(r.type){case"firstParty":return new Yw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lf.get(n);r&&(X("ComponentProvider","Removing Datastore"),lf.delete(n),r.terminate())}(this),Promise.resolve()}}function WA(e,t,n,r={}){e=ar(e,qo);const s=$l(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(TT(`https://${l}`),IT("Firestore",!0)),i.host!==wm&&i.host!==l&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Zi(u,a)&&(e._setSettings(u),r.mockUserToken)){let f,h;if(typeof r.mockUserToken=="string")f=r.mockUserToken,h=ie.MOCK_USER;else{f=wT(r.mockUserToken,e._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new J(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ie(p)}e._authCredentials=new Qw(new hp(f,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new fr(this.firestore,t,this._query)}}class $t{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $t(this.firestore,t,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Qs(n,$t._jsonSchema))return new $t(t,r||null,new tt(St.fromString(n.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:Ft("string",$t._jsonSchemaVersion),referencePath:Ft("string")};class Pn extends fr{constructor(t,n,r){super(t,n,xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $t(this.firestore,null,new tt(t))}withConverter(t){return new Pn(this.firestore,t,this._path)}}function hf(e,t,...n){if(e=hn(e),fp("collection","path",t),e instanceof qo){const r=St.fromString(t,...n);return wh(r),new Pn(e,null,r)}{if(!(e instanceof $t||e instanceof Pn))throw new J(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(St.fromString(t,...n));return wh(r),new Pn(e.firestore,null,r)}}function gl(e,t,...n){if(e=hn(e),arguments.length===1&&(t=zl.newId()),fp("doc","path",t),e instanceof qo){const r=St.fromString(t,...n);return Th(r),new $t(e,null,new tt(r))}{if(!(e instanceof $t||e instanceof Pn))throw new J(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(St.fromString(t,...n));return Th(r),new $t(e.firestore,e instanceof Pn?e.converter:null,new tt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="AsyncQueue";class df{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sm(this,"async_queue_retry"),this._c=()=>{const r=Ca();r&&X(ff,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Ca();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Ca();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Cn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!zr(t))throw t;X(ff,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,dn("INTERNAL UNHANDLED ERROR: ",pf(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=cu.createAndSchedule(this,t,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&nt(47125,{Pc:pf(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function pf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class ti extends qo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new df,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new df(t),this._firestoreClient=void 0,await t}}}function GA(e,t){const n=typeof e=="object"?e:kw(),r=typeof e=="string"?e:ro,s=xw(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ET("firestore");i&&WA(s,...i)}return s}function bm(e){if(e._terminated)throw new J(k.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||QA(e),e._firestoreClient}function QA(e){const t=e._freezeSettings(),n=function(s,i,a,l){return new m0(s,i,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Tm(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new $A(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pe(te.fromBase64String(t))}catch(n){throw new J(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Pe(te.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qs(t,Pe._jsonSchema))return Pe.fromBase64String(t.bytes)}}Pe._jsonSchemaVersion="firestore/bytes/1.0",Pe._jsonSchema={type:Ft("string",Pe._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new J(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new J(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new J(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ht(this._lat,t._lat)||ht(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Je._jsonSchemaVersion}}static fromJSON(t){if(Qs(t,Je._jsonSchema))return new Je(t.latitude,t.longitude)}}Je._jsonSchemaVersion="firestore/geoPoint/1.0",Je._jsonSchema={type:Ft("string",Je._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Xe._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qs(t,Xe._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Xe(t.vectorValues);throw new J(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xe._jsonSchemaVersion="firestore/vectorValue/1.0",Xe._jsonSchema={type:Ft("string",Xe._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=/^__.*__$/;class XA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new jn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Js(t,this.data,n,this.fieldTransforms)}}class Am{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new jn(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Im(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{Ac:e})}}class gu{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new gu({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return fo(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Im(this.Ac)&&JA.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class YA{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Bo(t)}Cc(t,n,r,s=!1){return new gu({Ac:t,methodName:n,Dc:r,path:Yt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yu(e){const t=e._freezeSettings(),n=Bo(e._databaseId);return new YA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ZA(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);_u("Data must be an object, but it was:",a,r);const l=Rm(r,a);let u,f;if(i.merge)u=new Ae(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=yl(t,p,n);if(!a.contains(g))throw new J(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Cm(h,g)||h.push(g)}u=new Ae(h),f=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=a.fieldTransforms;return new XA(new ge(l),u,f)}class zo extends mu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof zo}}function tI(e,t,n,r){const s=e.Cc(1,t,n);_u("Data must be an object, but it was:",s,r);const i=[],a=ge.empty();Bn(r,(u,f)=>{const h=Eu(t,u,n);f=hn(f);const p=s.yc(h);if(f instanceof zo)i.push(h);else{const g=ei(f,p);g!=null&&(i.push(h),a.set(h,g))}});const l=new Ae(i);return new Am(a,l,s.fieldTransforms)}function eI(e,t,n,r,s,i){const a=e.Cc(1,t,n),l=[yl(t,r,n)],u=[s];if(i.length%2!=0)throw new J(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(yl(t,i[g])),u.push(i[g+1]);const f=[],h=ge.empty();for(let g=l.length-1;g>=0;--g)if(!Cm(f,l[g])){const I=l[g];let R=u[g];R=hn(R);const N=a.yc(I);if(R instanceof zo)f.push(I);else{const x=ei(R,N);x!=null&&(f.push(I),h.set(I,x))}}const p=new Ae(f);return new Am(h,p,a.fieldTransforms)}function nI(e,t,n,r=!1){return ei(n,e.Cc(r?4:3,t))}function ei(e,t){if(Sm(e=hn(e)))return _u("Unsupported field value:",t,e),Rm(e,t);if(e instanceof mu)return function(r,s){if(!Im(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=ei(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return F0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xt.fromDate(r);return{timestampValue:lo(s.serializer,i)}}if(r instanceof xt){const i=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lo(s.serializer,i)}}if(r instanceof Je)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pe)return{bytesValue:Wp(s.serializer,r._byteString)};if(r instanceof $t){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eu(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xe)return function(a,l){return{mapValue:{fields:{[Tp]:{stringValue:wp},[so]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return Xl(l.serializer,f)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Vo(r)}`)}(e,t)}function Rm(e,t){const n={};return mp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bn(e,(r,s)=>{const i=ei(s,t.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Sm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof xt||e instanceof Je||e instanceof Pe||e instanceof $t||e instanceof mu||e instanceof Xe)}function _u(e,t,n){if(!Sm(n)||!dp(n)){const r=Vo(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function yl(e,t,n){if((t=hn(t))instanceof Ho)return t._internalPath;if(typeof t=="string")return Eu(e,t);throw fo("Field path arguments must be of type string or ",e,!1,void 0,n)}const rI=new RegExp("[~\\*/\\[\\]]");function Eu(e,t,n){if(t.search(rI)>=0)throw fo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ho(...t.split("."))._internalPath}catch{throw fo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fo(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new J(k.INVALID_ARGUMENT,l+e+u)}function Cm(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vu("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sI extends Pm{data(){return super.data()}}function vu(e,t){return typeof t=="string"?Eu(e,t):t instanceof Ho?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new J(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tu{}class xm extends Tu{}function oI(e,t,...n){let r=[];t instanceof Tu&&r.push(t),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof bu).length,l=i.filter(u=>u instanceof wu).length;if(a>1||a>0&&l>0)throw new J(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class wu extends xm{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new wu(t,n,r)}_apply(t){const n=this._parse(t);return Vm(t._query,n),new fr(t.firestore,t.converter,il(t._query,n))}_parse(t){const n=yu(t.firestore);return function(i,a,l,u,f,h,p){let g;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gf(p,h);const R=[];for(const N of p)R.push(mf(u,i,N));g={arrayValue:{values:R}}}else g=mf(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gf(p,h),g=nI(l,a,p,h==="in"||h==="not-in");return Lt.create(f,h,g)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class bu extends Tu{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new bu(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ue.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Vm(a,u),a=il(a,u)}(t._query,n),new fr(t.firestore,t.converter,il(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Au extends xm{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Au(t,n)}_apply(t){const n=function(s,i,a){if(s.startAt!==null)throw new J(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new js(i,a)}(t._query,this._field,this._direction);return new fr(t.firestore,t.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Kr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function aI(e,t="asc"){const n=t,r=vu("orderBy",e);return Au._create(r,n)}function mf(e,t,n){if(typeof(n=hn(n))=="string"){if(n==="")throw new J(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vp(t)&&n.indexOf("/")!==-1)throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(St.fromString(n));if(!tt.isDocumentKey(r))throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xh(e,new tt(r))}if(n instanceof $t)return xh(e,n._key);throw new J(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vo(n)}.`)}function gf(e,t){if(!Array.isArray(e)||e.length===0)throw new J(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Vm(e,t){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new J(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new J(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class lI{convertValue(t,n="none"){switch(Mn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(kn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw nt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Bn(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){const n=t.fields?.[so].arrayValue?.values?.map(r=>kt(r.doubleValue));return new Xe(n)}convertGeoPoint(t){return new Je(kt(t.latitude),kt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Oo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fs(t));default:return null}}convertTimestamp(t){const n=On(t);return new xt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=St.fromString(t);wt(Zp(r),9688,{name:t});const s=new Us(r.get(1),r.get(3)),i=new tt(r.popFirst(5));return s.isEqual(n)||dn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Si{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vr extends Pm{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(vu("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Vr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vr._jsonSchema={type:Ft("string",Vr._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class qi extends Vr{data(t={}){return super.data(t)}}class Dr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Si(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new qi(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new qi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new qi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Si(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,h=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:cI(l.type),doc:u,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Dr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=zl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function cI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:e})}}Dr._jsonSchemaVersion="firestore/querySnapshot/1.0",Dr._jsonSchema={type:Ft("string",Dr._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class hI extends lI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function fI(e){e=ar(e,fr);const t=ar(e.firestore,ti),n=bm(t),r=new hI(t);return iI(e._query),KA(n,e._query).then(s=>new Dr(t,r,e,s))}function dI(e,t,n,...r){e=ar(e,$t);const s=ar(e.firestore,ti),i=yu(s);let a;return a=typeof(t=hn(t))=="string"||t instanceof Ho?eI(i,"updateDoc",e._key,t,n,r):tI(i,"updateDoc",e._key,t),Iu(s,[a.toMutation(e._key,Fe.exists(!0))])}function pI(e){return Iu(ar(e.firestore,ti),[new Yl(e._key,Fe.none())])}function mI(e,t){const n=ar(e.firestore,ti),r=gl(e),s=uI(e.converter,t);return Iu(n,[ZA(yu(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Fe.exists(!1))]).then(()=>r)}function Iu(e,t){return function(r,s){const i=new Cn;return r.asyncQueue.enqueueAndForget(async()=>DA(await HA(r),s,i)),i.promise}(bm(e),t)}(function(t,n=!0){(function(s){qr=s})(Ow),eo(new ks("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new ti(new Jw(r.getProvider("auth-internal")),new Zw(a,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new J(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(f.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Pr(yh,_h,t),Pr(yh,_h,"esm2020")})();const gI={apiKey:"AIzaSyA9UrWttuA4Q1gepfUWUF65mGWg8opCKt0",authDomain:"food-diary-9c29f.firebaseapp.com",projectId:"food-diary-9c29f",storageBucket:"food-diary-9c29f.firebasestorage.app",messagingSenderId:"472034696823",appId:"1:472034696823:web:e9d2c404db4ad237f57072"},yI=ep(gI),Ci=GA(yI);function _I(){const e=De([]),t=De(!1),n=De(""),r=Ed(()=>{if(!n.value)return e.value;const u=n.value.toLowerCase();return e.value.filter(f=>f.restaurant.toLowerCase().includes(u)||f.dishName.toLowerCase().includes(u)||f.notes.toLowerCase().includes(u))});return{entries:e,filteredEntries:r,loading:t,searchQuery:n,addEntry:async u=>{t.value=!0;try{const h={id:(await mI(hf(Ci,"foodEntries"),{...u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...u};return e.value.unshift(h),{success:!0,entry:h}}catch(f){return console.error("Error adding entry:",f),{success:!1,error:f.message}}finally{t.value=!1}},fetchEntries:async()=>{t.value=!0;try{const u=oI(hf(Ci,"foodEntries"),aI("createdAt","desc")),f=await fI(u);e.value=f.docs.map(h=>({id:h.id,...h.data()}))}catch(u){console.error("Error fetching entries:",u)}finally{t.value=!1}},updateEntry:async(u,f)=>{try{const h=gl(Ci,"foodEntries",u);await dI(h,{...f,updatedAt:new Date().toISOString()});const p=e.value.findIndex(g=>g.id===u);return p!==-1&&(e.value[p]={...e.value[p],...f}),{success:!0}}catch(h){return console.error("Error updating entry:",h),{success:!1,error:h.message}}},deleteEntry:async u=>{try{return await pI(gl(Ci,"foodEntries",u)),e.value=e.value.filter(f=>f.id!==u),{success:!0}}catch(f){return console.error("Error deleting entry:",f),{success:!1,error:f.message}}}}}const EI={class:"min-h-screen bg-gray-50"},vI={class:"bg-white shadow-sm border-b border-gray-200"},TI={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},wI={class:"flex justify-between items-center py-6"},bI={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},AI={key:0,class:"mb-8"},II={key:1,class:"flex justify-center items-center py-16"},RI={key:3,class:"text-center py-16"},SI={key:4,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},CI={__name:"App",setup(e){const{entries:t,filteredEntries:n,loading:r,searchQuery:s,addEntry:i,fetchEntries:a,deleteEntry:l,updateEntry:u}=_I(),f=De(!1),h=De(!1),p=De(null);Qf(()=>{a()});const g=async $=>{(await i($)).success?f.value=!1:alert("Failed to add entry. Please try again.")},I=async $=>{confirm("Are you sure you want to delete this food memory?")&&((await l($)).success||alert("Failed to delete entry. Please try again."))},R=$=>{p.value={...$},h.value=!0},N=async $=>{(await u(p.value.id,$)).success?(h.value=!1,p.value=null):alert("Failed to update entry. Please try again.")},x=()=>{h.value=!1,p.value=null};return($,L)=>(Tt(),Pt(we,null,[C("div",EI,[C("header",vI,[C("div",TI,[C("div",wI,[L[6]||(L[6]=C("div",{class:"flex items-center gap-3"},[C("img",{src:w_,alt:"Food Diary Logo",class:"h-10 w-10 object-contain"}),C("div",null,[C("h1",{class:"text-3xl font-bold text-gray-900"},"Food Diary"),C("p",{class:"text-gray-600 mt-1"},"Culinary journey for the community")])],-1)),C("button",{onClick:L[0]||(L[0]=q=>f.value=!0),class:"inline-flex items-center px-4 py-2 bg-sage-600 text-gray-900 font-medium rounded-xl hover:bg-sage-700 transition-colors shadow-sm"},L[5]||(L[5]=[C("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ml(" New Memory ")]))])])]),C("main",bI,[Xn(t).length>0?(Tt(),Pt("div",AI,[Le($v,{modelValue:Xn(s),"onUpdate:modelValue":L[1]||(L[1]=q=>Zt(s)?s.value=q:null)},null,8,["modelValue"])])):tr("",!0),Xn(r)?(Tt(),Pt("div",II,L[7]||(L[7]=[C("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-sage-500"},null,-1),C("span",{class:"ml-4 text-gray-600"},"Loading food memories...",-1)]))):Xn(t).length===0?(Tt(),ds(Hv,{key:2,onAddEntry:L[2]||(L[2]=q=>f.value=!0)})):Xn(n).length===0?(Tt(),Pt("div",RI,L[8]||(L[8]=[C("div",{class:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[C("span",{class:"text-3xl"},"🔍")],-1),C("h3",{class:"text-xl font-semibold text-gray-900 mb-2"}," No matches found ",-1),C("p",{class:"text-gray-600"},"Try adjusting your search terms",-1)]))):(Tt(),Pt("div",SI,[(Tt(!0),Pt(we,null,Nl(Xn(n),q=>(Tt(),ds(Uv,{key:q.id,entry:q,onDelete:I,onEdit:R},null,8,["entry"]))),128))]))]),C("button",{onClick:L[3]||(L[3]=q=>f.value=!0),class:"fixed bottom-6 right-6 w-14 h-14 bg-terracotta-600 text-gray-800 rounded-full shadow-lg hover:bg-terracotta-700 transition-all transform hover:scale-105 md:hidden flex items-center justify-center"},L[9]||(L[9]=[C("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),f.value?(Tt(),ds(gv,{key:0,onClose:L[4]||(L[4]=q=>f.value=!1),onAddEntry:g})):tr("",!0),h.value?(Tt(),ds(lT,{key:1,entry:p.value,onUpdateEntry:N,onClose:x},null,8,["entry"])):tr("",!0)]),L[10]||(L[10]=Fy('<footer class="py-8 text-center text-gray-500 text-sm"><p> Made with <span class="text-red-500">❤️</span> by <a href="https://github.com/leecheeyong" target="_blank" class="text-gray-700 hover:underline"> Chee Yong Lee </a></p><p class="mt-1"> Project available as open source under the terms of <a href="https://github.com/leecheeyong/FoodDiary/blob/main/LICENSE" target="_blank" class="text-gray-700 hover:underline">MIT License</a></p></footer>',1))],64))}};E_(CI).mount("#app");
